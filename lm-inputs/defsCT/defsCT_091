Definition 5.1. Let $(I,{\mathop{\preceq}\nolimits})$ be a finite poset and $J\in{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$. Then $(J,{\mathop{\preceq}\nolimits})$ is also a finite poset, and $K\subseteq J$ is an f-set in $(J,{\mathop{\preceq}\nolimits})$ if and only if it is an f-set in $(I,{\mathop{\preceq}\nolimits})$. Hence ${\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}% \nolimits})}}\!\subseteq\!{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I% ,{\mathop{\preceq}\nolimits})}}$. We also have ${\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}% \nolimits})}}\!=\!{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{% \mathop{\preceq}\nolimits})}}\!\cap\!({\mathbin{\mathcal{F}}}_{\smash{% \scriptscriptstyle(J,{\mathop{\preceq}\nolimits})}}\!\times\!{\mathbin{% \mathcal{F}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}\nolimits})}})$ and ${\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}% \nolimits})}}\!=\!{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{% \mathop{\preceq}\nolimits})}}\!\cap\!({\mathbin{\mathcal{F}}}_{\smash{% \scriptscriptstyle(J,{\mathop{\preceq}\nolimits})}}\!\times\!{\mathbin{% \mathcal{F}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}\nolimits})}})$, so that ${\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}% \nolimits})}}\!\subseteq\!{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I% ,{\mathop{\preceq}\nolimits})}}$ and ${\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}% \nolimits})}}\!\subseteq\!{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I% ,{\mathop{\preceq}\nolimits})}}$. Let $(\sigma,\iota,\pi)$ be an $(I,{\mathop{\preceq}\nolimits})$-configuration in an abelian or exact category ${\mathbin{\mathcal{A}}}$, and define $\sigma^{\prime}:{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(J,{\mathop{% \preceq}\nolimits})}}\rightarrow\mathop{\rm Obj\kern 1.0pt}\nolimits({\mathbin% {\mathcal{A}}})$, $\iota^{\prime}:{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(J,{\mathop{% \preceq}\nolimits})}}\rightarrow\mathop{\rm Mor}\nolimits({\mathbin{\mathcal{A% }}})$ and $\pi^{\prime}:{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(J,{\mathop{% \preceq}\nolimits})}}\rightarrow\mathop{\rm Mor}\nolimits({\mathbin{\mathcal{A% }}})$ by $\sigma^{\prime}=\sigma|_{{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(J,% {\mathop{\preceq}\nolimits})}}}$, $\iota^{\prime}=\iota|_{{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(J,{% \mathop{\preceq}\nolimits})}}}$ and $\pi^{\prime}=\pi|_{{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(J,{% \mathop{\preceq}\nolimits})}}}$. Then (A)–(D) of Definition 12 for $(\sigma,\iota,\pi)$ imply (A)–(D) for $(\sigma^{\prime},\iota^{\prime},\pi^{\prime})$, so $(\sigma^{\prime},\iota^{\prime},\pi^{\prime})$ is a $(J,{\mathop{\preceq}\nolimits})$-configuration in ${\mathbin{\mathcal{A}}}$. We call $(\sigma^{\prime},\iota^{\prime},\pi^{\prime})$ a subconfiguration of $(\sigma,\iota,\pi)$.
Definition 10.2. Let $Q=(Q_{0},Q_{1},b,e)$ be a quiver. A representation of $Q$ consists of finite-dimensional ${\mathbin{\mathbb{K}}}$-vector spaces $X_{v}$ for each $v\in Q_{0}$, and linear maps $\rho_{a}:X_{b(a)}\rightarrow X_{e(a)}$ for each $a\in Q_{1}$. Representations of $Q$ are in 1-1 correspondence with finite-dimensional left ${\mathbin{\mathbb{K}}}Q$-modules $(X,\rho)$, as follows. Given $X_{v},\rho_{a}$, define $X=\bigoplus_{v\in Q_{0}}X_{v}$, and a linear $\rho:{\mathbin{\mathbb{K}}}Q\rightarrow\mathop{\rm End}(X)$ taking (52) to the linear map $X\rightarrow X$ acting as $\rho_{a_{k}}\circ\rho_{a_{k-1}}\circ\cdots\circ\rho_{a_{1}}$ on $X_{v_{0}}$, and 0 on $X_{v}$ for $v\neq v_{0}$. Then $(X,\rho)$ is a left ${\mathbin{\mathbb{K}}}Q$-module. Conversely, any such $(X,\rho)$ comes from a unique representation of $Q$, taking $X_{v}$ for $v\in Q_{0}$ to be the 1-eigenspace of $\rho(v)$ in $X$, and $\rho_{a}$ for $a\in Q_{1}$ to be the restriction of $\rho(a):X\rightarrow X$ to $X_{b(a)}$. We generally write representations of $Q$ as left ${\mathbin{\mathbb{K}}}Q$-modules $(X,\rho)$. A morphism of representations $\phi:(X,\rho)\rightarrow(Y,\sigma)$ is a linear map $\phi:X\rightarrow Y$ with $\phi\circ\rho(\gamma)=\sigma(\gamma)\circ\phi$ for all $\gamma\in{\mathbin{\mathbb{K}}}Q$. Equivalently, $\phi$ defines linear maps $\phi_{v}:X_{v}\rightarrow Y_{v}$ for all $v\in Q_{0}$ with $\phi_{e(a)}\circ\rho_{a}=\sigma_{a}\circ\phi_{b(a)}$ for all $a\in Q_{1}$. A representation $(X,\rho)$ of $Q$ is called nilpotent if $\rho({\mathbin{\mathbb{K}}}Q_{(n)})=\{0\}$ in $\mathop{\rm End}(X)$ for some $n\geqslant 0$. Let $(Q,I)$ be a quiver with relations. A representation of $(Q,I)$ is a representation $(X,\rho)$ of $Q$ with $\rho(I)=\{0\}$. Then $X$ is a representation of the quotient algebra ${\mathbin{\mathbb{K}}}Q/I$. Write mod-${\mathbin{\mathbb{K}}}Q$ for the category of representations of $Q$, and nil-${\mathbin{\mathbb{K}}}Q$ for the full subcategory of nilpotent representations of $Q$. If $(Q,I)$ is a quiver with relations, write mod-${\mathbin{\mathbb{K}}}Q/I$ for the category of representations of $(Q,I)$, and nil-${\mathbin{\mathbb{K}}}Q/I$ for the full subcategory of nilpotent representations of $(Q,I)$. It is easy to show all of these are abelian categories, of finite length. If $Q$ has no oriented cycles then $\text{\rm mod-${\mathbin{\mathbb{K}}}Q$}=\text{\rm nil-${\mathbin{\mathbb{K}}}% Q$}$, since ${\mathbin{\mathbb{K}}}Q_{(n)}=0$ for $n>|Q_{1}|$. If ${\mathbin{\mathbb{K}}}Q_{(n)}\subseteq I$ for some $n\geqslant 2$ then $\text{\rm mod-${\mathbin{\mathbb{K}}}Q/I$}=\text{\rm nil-${\mathbin{\mathbb{K}% }}Q/I$}$.
Definition 3.2. Let $(I,{\mathop{\preceq}\nolimits})$ be a finite poset. Define $J\subseteq I$ to be (i) an s-set if $i\in I$, $j\in J$ and $i{\mathop{\preceq}\nolimits}j$ implies $i\in J$, (ii) a q-set if $i\in I$, $j\in J$ and $j{\mathop{\preceq}\nolimits}i$ implies $i\in J$, and (iii) an f-set if $i\in I$ and $h,j\in J$ and $h{\mathop{\preceq}\nolimits}i{\mathop{\preceq}\nolimits}j$ implies $i\in J$. The motivation for this is that below s-sets will correspond to subobjects $S\subset X$, q-sets to quotient objects $X/S$, and f-sets to factors $T/S$ for $S\subset T\subset X$.
Definition 2.9. Let ${\mathbin{\mathfrak{F}}}$ be a ${\mathbin{\mathbb{K}}}$-stack. Regarding $\mathop{\rm Spec}\nolimits{\mathbin{\mathbb{K}}}$ as a ${\mathbin{\mathbb{K}}}$-stack, we can form $\mathop{\rm Hom}(\mathop{\rm Spec}\nolimits{\mathbin{\mathbb{K}}},{\mathbin{% \mathfrak{F}}})$. This is a groupoid, with objects 1-morphisms $\mathop{\rm Spec}\nolimits{\mathbin{\mathbb{K}}}\rightarrow{\mathbin{\mathfrak% {F}}}$, and morphisms 2-morphisms. Define ${\mathbin{\mathfrak{F}}}({\mathbin{\mathbb{K}}})$ to be the set of isomorphism classes of objects in $\mathop{\rm Hom}(\mathop{\rm Spec}\nolimits{\mathbin{\mathbb{K}}},{\mathbin{% \mathfrak{F}}})$. Elements of ${\mathbin{\mathfrak{F}}}({\mathbin{\mathbb{K}}})$ are called ${\mathbin{\mathbb{K}}}$-points, or geometric points, of ${\mathbin{\mathfrak{F}}}$. If $\phi:{\mathbin{\mathfrak{F}}}\rightarrow{\mathbin{\mathfrak{G}}}$ is a 1-morphism of ${\mathbin{\mathbb{K}}}$-stacks then composition with $\phi$ yields a morphism of groupoids $\mathop{\rm Hom}(\mathop{\rm Spec}\nolimits{\mathbin{\mathbb{K}}},{\mathbin{% \mathfrak{F}}})\rightarrow\mathop{\rm Hom}(\mathop{\rm Spec}\nolimits{\mathbin% {\mathbb{K}}},{\mathbin{\mathfrak{G}}})$, and therefore induces a map of sets $\phi_{*}:{\mathbin{\mathfrak{F}}}({\mathbin{\mathbb{K}}})\rightarrow{\mathbin{% \mathfrak{G}}}({\mathbin{\mathbb{K}}})$.
Definition 5.7. Let $(J,\mathop{\lesssim\kern 0.5pt}\nolimits)$ and $(K,\trianglelefteq\nobreak)$ be nonempty finite posets with $J\cap K=\emptyset$, and $l\in K$. Set $I=J\cup(K\setminus\{l\})$, and define a partial order ${\mathop{\preceq}\nolimits}$ on $I$ by $i{\mathop{\preceq}\nolimits}j\quad\text{for $i,j\in I$ if}\quad\begin{cases}i% \mathop{\lesssim\kern 0.5pt}\nolimits j,&i,j\in J,\\ i\trianglelefteq\nobreak j,&i,j\in K\setminus\{l\},\\ l\trianglelefteq\nobreak j,&i\in J,\quad j\in K\setminus\{l\},\\ i\trianglelefteq\nobreak l,&i\in K\setminus\{l\},\quad j\in J,\end{cases}$ and a surjective map $\phi:I\rightarrow K$ by $\phi(i)=l$ if $i\in J$, and $\phi(i)=i$ if $i\!\in\!K\!\setminus\!\{l\}$. Let ${\mathbin{\mathcal{A}}}$ be an abelian or exact category, $(\sigma^{\prime},\iota^{\prime},\pi^{\prime})$ a $(J,\mathop{\lesssim\kern 0.5pt}\nolimits)$-configuration in ${\mathbin{\mathcal{A}}}$, and $(\tilde{\sigma},\tilde{\iota},\tilde{\pi})$ a $(K,\trianglelefteq\nobreak)$-configuration in ${\mathbin{\mathcal{A}}}$ with $\sigma^{\prime}(J)=\tilde{\sigma}(\{l\})$. Then by Theorem 5.5 there exists an $(I,{\mathop{\preceq}\nolimits})$-configuration $(\sigma,\iota,\pi)$ in ${\mathbin{\mathcal{A}}}$, unique up to canonical isomorphism, such that $(\sigma^{\prime},\iota^{\prime},\pi^{\prime})$ is its $(J,\mathop{\lesssim\kern 0.5pt}\nolimits)$-subconfiguration, and $(\tilde{\sigma},\tilde{\iota},\tilde{\pi})$ its quotient $(K,\trianglelefteq\nobreak)$-configuration from $\phi$. We call $(\sigma,\iota,\pi)$ the substitution of $(\sigma^{\prime},\iota^{\prime},\pi^{\prime})$ into $(\tilde{\sigma},\tilde{\iota},\tilde{\pi})$.
Definition 2.2. Let $\smash{X{\buildrel f\over{\rightarrow}}Y{\buildrel g\over{\rightarrow}}Z}$ be a sequence in ${\mathbin{\mathcal{A}}}$ with $g\circ f=0$. Let $k:K\rightarrow Y$ be the kernel of $g$ and $c:Y\rightarrow C$ the cokernel of $f$. Then there exist unique morphisms $a:X\rightarrow K$ and $b:C\rightarrow Z$ with$f=k\circ a$ and $g=b\circ c$. We say $\smash{X{\buildrel f\over{\rightarrow}}Y{\buildrel g\over{\rightarrow}}Z}$ is exact at $Y$ if $a$ is surjective, or equivalently if $b$ is injective. A short exact sequence $0\rightarrow X\rightarrow Y\rightarrow Z\rightarrow 0$ in ${\mathbin{\mathcal{A}}}$ is called split if there exists a compatible isomorphism $X\oplus Z\rightarrow Y$. The Grothendieck group $K_{0}({\mathbin{\mathcal{A}}})$ of ${\mathbin{\mathcal{A}}}$ is the abelian group generated by $\mathop{\rm Obj\kern 1.0pt}\nolimits({\mathbin{\mathcal{A}}})$, with a relation $[Y]=[X]+[Z]$ for each short exact sequence $0\!\rightarrow\!X\!\rightarrow\!Y\!\rightarrow\!Z\!\rightarrow\!0$ in ${\mathbin{\mathcal{A}}}$. Throughout the paper $K({\mathbin{\mathcal{A}}})$ will mean the quotient of $K_{0}({\mathbin{\mathcal{A}}})$ by some fixed subgroup.
Definition 2.6. We call an abelian category ${\mathbin{\mathcal{A}}}$ artinian if all descending chains of subobjects $\cdots\!\subset\!A_{2}\!\subset\!A_{1}\!\subset\!X$ stabilize, that is, $A_{n+1}=A_{n}$ for $n\gg 0$. We call ${\mathbin{\mathcal{A}}}$ noetherian if all ascending chains of subobjects $A_{1}\!\subset\!A_{2}\!\subset\!\cdots\!\subset\!X$ stabilize. We call ${\mathbin{\mathcal{A}}}$ of finite length if it is artinian and noetherian. A nonzero object $X$ in ${\mathbin{\mathcal{A}}}$ is called simple if it has no nontrivial proper subobjects. Let $X\in{\mathbin{\mathcal{A}}}$ and consider filtrations of subobjects $0=A_{0}\subset A_{1}\subset\cdots\subset A_{n}=X.$ We call (3) a composition series if the factors $S_{k}\!=\!A_{k}/A_{k-1}$ are all simple.
Definition 4.1. Let $(I,{\mathop{\preceq}\nolimits})$ be a finite poset, and use the notation of Definition 3.2. Define ${\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ to be the set of f-sets of $I$. Define ${\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ to be the subset of $(J,K)\in{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}\times{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{% \mathop{\preceq}\nolimits})}}$ such that $J\subseteq K$, and if $j\in J$ and $k\in K$ with $k{\mathop{\preceq}\nolimits}j$, then $k\in J$. Define ${\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ to be the subset of $(J,K)\in{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}\times{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{% \mathop{\preceq}\nolimits})}}$ such that $K\subseteq J$, and if $j\in J$ and $k\in K$ with $k{\mathop{\preceq}\nolimits}j$, then $j\in K$. It is easy to show that ${\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ and ${\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ have the following properties: (a) $(J,K)$ lies in ${\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ if and only if $(K,K\setminus J)$ lies in ${\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$. (b) If $(J,K)\in{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ and $(K,L)\in{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ then $(J,L)\in{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$. (c) If $(J,K)\in{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ and $(K,L)\in{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ then $(J,L)\in{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$. (d) If $(J,K)\!\in\!{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{% \preceq}\nolimits})}}$, $(K,L)\!\in\!{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{% \preceq}\nolimits})}}$ then $(J,J\!\cap\!L)\!\in\!{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{% \mathop{\preceq}\nolimits})}}$, $(J\!\cap\!L,L)\!\in\!{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{% \mathop{\preceq}\nolimits})}}$. Let ${\mathbin{\mathcal{A}}}$ be an abelian category, or more generally an exact category, as in §2.1. Define an $(I,{\mathop{\preceq}\nolimits})$-configuration $(\sigma,\iota,\pi)$ in ${\mathbin{\mathcal{A}}}$ to be maps $\sigma:{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}\rightarrow\mathop{\rm Obj\kern 1.0pt}\nolimits({\mathbin{% \mathcal{A}}})$, $\iota:{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}\rightarrow\mathop{\rm Mor}\nolimits({\mathbin{\mathcal{A}}})$, and $\pi:{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}\rightarrow\mathop{\rm Mor}\nolimits({\mathbin{\mathcal{A}}})$, where (i) $\sigma(J)$ is an object in ${\mathbin{\mathcal{A}}}$ for $J\in{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$, with $\sigma(\emptyset)=0$. (ii) $\iota(J,K):\sigma(J)\!\rightarrow\!\sigma(K)$ is injective for $(J,K)\!\in\!{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{% \preceq}\nolimits})}}$, and $\iota(J,J)\!=\!\mathop{\rm id}\nolimits_{\sigma(J)}$. (iii) $\pi(J,K)\!:\!\sigma(J)\!\rightarrow\!\sigma(K)$ is surjective for $(J,K)\!\in\!{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{% \preceq}\nolimits})}}$, and $\pi(J,J)\!=\!\mathop{\rm id}\nolimits_{\sigma(J)}$. These should satisfy the conditions: (A) Let $(J,K)\in{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ and set $L=K\setminus J$. Then the following is exact in ${\mathbin{\mathcal{A}}}$: $\xymatrix@C=40pt{0\ar[r]&\sigma(J)\ar[r]^{\iota(J,K)}&\sigma(K)\ar[r]^{\pi(K,L% )}&\sigma(L)\ar[r]&0.}$ (B) If $(J,K)\in{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ and $(K,L)\in{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ then $\iota(J,L)=\iota(K,L)\circ\iota(J,K)$. (C) If $(J,K)\in{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ and $(K,L)\in{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ then $\pi(J,L)=\pi(K,L)\circ\pi(J,K)$. (D) If $(J,K)\in{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ and $(K,L)\in{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ then $\pi(K,L)\circ\iota(J,K)=\iota(J\cap L,L)\circ\pi(J,J\cap L).$ Note that (A)–(D) make sense because of properties (a)–(d), respectively. A morphism $\alpha:(\sigma,\iota,\pi)\rightarrow(\sigma^{\prime},\iota^{\prime},\pi^{% \prime})$ of $(I,{\mathop{\preceq}\nolimits})$-configurations in ${\mathbin{\mathcal{A}}}$ is a collection of morphisms $\alpha(J):\sigma(J)\rightarrow\sigma^{\prime}(J)$ for each $J\in{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$ satisfying $\displaystyle\alpha(K)\circ\iota(J,K)$ $\displaystyle=\iota^{\prime}(J,K)\circ\alpha(J)$ for all $(J,K)\in{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$, and (12) $\displaystyle\alpha(K)\circ\pi(J,K)$ $\displaystyle=\pi^{\prime}(J,K)\circ\alpha(J)$ for all $(J,K)\in{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$. It is an isomorphism if $\alpha(J)$ is an isomorphism for all $J\in{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$. Morphisms compose in the obvious way.
Definition 2.10. Let $\phi:{\mathbin{\mathfrak{F}}}\rightarrow{\mathbin{\mathfrak{H}}}$, $\psi:{\mathbin{\mathfrak{G}}}\rightarrow{\mathbin{\mathfrak{H}}}$ be 1-morphisms of ${\mathbin{\mathbb{K}}}$-stacks. Define the fibre product ${\mathbin{\mathfrak{F}}}\times_{\phi,{\mathbin{\mathfrak{H}}},\psi}{\mathbin{% \mathfrak{G}}}$, or ${\mathbin{\mathfrak{F}}}\times_{\mathbin{\mathfrak{H}}}{\mathbin{\mathfrak{G}}}$ for short, such that $({\mathbin{\mathfrak{F}}}\times_{\mathbin{\mathfrak{H}}}{\mathbin{\mathfrak{G}% }})(U)$ for $U\in\mathop{\rm Sch}\nolimits_{\mathbin{\mathbb{K}}}$ is the groupoid with objects triples $(A,B,\alpha)$ for $A\in\mathop{\rm Obj\kern 1.0pt}\nolimits({\mathbin{\mathfrak{F}}}(U))$, $B\in\mathop{\rm Obj\kern 1.0pt}\nolimits({\mathbin{\mathfrak{G}}}(U))$ and $\alpha:\phi(U)A\rightarrow\psi(U)B$ in $\mathop{\rm Mor}\nolimits({\mathbin{\mathfrak{H}}}(U))$, and morphisms $(\beta,\gamma):(A,B,\alpha)\rightarrow(A^{\prime},B^{\prime},\alpha^{\prime})$ for $\beta:A\rightarrow A^{\prime}$ in $\mathop{\rm Mor}\nolimits({\mathbin{\mathfrak{F}}}(U))$ and $\gamma:B\rightarrow B^{\prime}$ in $\mathop{\rm Mor}\nolimits({\mathbin{\mathfrak{G}}}(U))$ with $\alpha^{\prime}\circ(\phi(U)\beta)=(\psi(U)\gamma)\circ\alpha$ in $\mathop{\rm Mor}\nolimits({\mathbin{\mathfrak{H}}}(U))$. The rest of the data to make a contravariant $2$-functor ${\mathbin{\mathfrak{F}}}\times_{\mathbin{\mathfrak{H}}}{\mathbin{\mathfrak{G}}% }:\mathop{\rm Sch}\nolimits_{\mathbin{\mathbb{K}}}\rightarrow({\rm groupoids})$ is defined in the obvious way. Then ${\mathbin{\mathfrak{F}}}\times_{\mathbin{\mathfrak{H}}}{\mathbin{\mathfrak{G}}}$ is a ${\mathbin{\mathbb{K}}}$-stack, with projection 1-morphisms $\pi_{\mathbin{\mathfrak{F}}}:{\mathbin{\mathfrak{F}}}\times_{\mathbin{% \mathfrak{H}}}{\mathbin{\mathfrak{G}}}\rightarrow{\mathbin{\mathfrak{F}}}$, $\pi_{\mathbin{\mathfrak{G}}}:{\mathbin{\mathfrak{F}}}\times_{\mathbin{% \mathfrak{H}}}{\mathbin{\mathfrak{G}}}\rightarrow{\mathbin{\mathfrak{G}}}$ fitting into a commutative diagram: $\begin{gathered}\displaystyle\xymatrix@R=2pt{&\displaystyle{\mathbin{\mathfrak% {F}}}\ar[dr]^{\phi}\ar@{=>}[dd]^{A}\\ \displaystyle{\mathbin{\mathfrak{F}}}\times_{\mathbin{\mathfrak{H}}}{\mathbin{% \mathfrak{G}}}\ar[dr]_{\pi_{\mathbin{\mathfrak{G}}}}\ar[ur]^{\pi_{\mathbin{% \mathfrak{F}}}}&&\displaystyle{\mathbin{\mathfrak{H}}},\\ &\displaystyle{\mathbin{\mathfrak{G}}}\ar[ur]_{\psi}\\ \end{gathered}}$ where $A:\phi\circ\pi_{\mathbin{\mathfrak{F}}}\rightarrow\psi\circ\pi_{\mathbin{% \mathfrak{G}}}$ is a 2-isomorphism. Any commutative diagram $\begin{gathered}\displaystyle\xymatrix@R=2pt{&\displaystyle{\mathbin{\mathfrak% {F}}}\ar[dr]^{\phi}\ar@{=>}[dd]^{B}\\ \displaystyle{\mathbin{\mathfrak{E}}}\ar[dr]_{\eta}\ar[ur]^{\theta}&&% \displaystyle{\mathbin{\mathfrak{H}}}\\ &\displaystyle{\mathbin{\mathfrak{G}}}\ar[ur]_{\psi}\\ \end{gathered}}$ extends to a commutative diagram with $\rho$ unique up to 2-isomorphism $\begin{gathered}\displaystyle\xymatrix@R=5pt@C=15pt{&&\displaystyle{\mathbin{% \mathfrak{F}}}\ar[dr]^{\phi}\ar@{=>}[dd]^{A}\\ \displaystyle{\mathbin{\mathfrak{E}}}\ar@(dr,l)[drr]_{(}0.2)\eta\ar@(ur,l)[urr% ]^{(}0.2)\theta\ar[r]^{\rho}&\displaystyle{\mathbin{\mathfrak{F}}}\times_{% \mathbin{\mathfrak{H}}}{\mathbin{\mathfrak{G}}}\ar@{=>}[u]^{C}\ar@{=>}[d]_{D}% \ar[dr]^{(}0,6){\pi_{\mathbin{\mathfrak{G}}}}\ar[ur]_{(}0.6){\pi_{\mathbin{% \mathfrak{F}}}}&&\displaystyle{\mathbin{\mathfrak{H}}},\\ &&\displaystyle{\mathbin{\mathfrak{G}}}\ar[ur]_{\psi}\\ \end{gathered}\;\>\begin{gathered}\displaystyle\text{with}\\ \displaystyle\text{commuting}\\ \displaystyle\text{2-morphisms}\end{gathered}\;\>\begin{gathered}\displaystyle% \xymatrix@R=17pt@C=18pt{\phi\circ\pi_{\mathbin{\mathfrak{F}}}\circ\rho\ar[r]_{% \phi\circ C}\ar[d]_{A\circ\rho}&\displaystyle\phi\circ\theta\ar[d]^{B}\\ \displaystyle\psi\circ\pi_{\mathbin{\mathfrak{G}}}\circ\rho\ar[r]^{\psi\circ D% }&\displaystyle\psi\circ\eta.\end{gathered}}}$ We call (8) a Cartesian square if $\rho$ in (9) is a 1-isomorphism, so that ${\mathbin{\mathfrak{E}}}$ is 1-isomorphic to ${\mathbin{\mathfrak{F}}}\times_{\mathbin{\mathfrak{H}}}{\mathbin{\mathfrak{G}}}$. Cartesian squares may also be characterized by a universal property, as in [1, §3]. By the product ${\mathbin{\mathfrak{F}}}\times{\mathbin{\mathfrak{G}}}$ of ${\mathbin{\mathbb{K}}}$-stacks ${\mathbin{\mathfrak{F}}},{\mathbin{\mathfrak{G}}}$ we mean their fibre product ${\mathbin{\mathfrak{F}}}\times_{\mathop{\rm Spec}\nolimits{\mathbin{\mathbb{K}% }}}{\mathbin{\mathfrak{G}}}$ over $\mathop{\rm Spec}\nolimits{\mathbin{\mathbb{K}}}$, using the natural projections ${\mathbin{\mathfrak{F}}},{\mathbin{\mathfrak{G}}}\rightarrow\mathop{\rm Spec}% \nolimits{\mathbin{\mathbb{K}}}$.
Definition 7.7. Define 1-morphisms ${\mathfrak{b}},{\mathfrak{m}},{\mathfrak{e}}:\mathop{\mathfrak{Exact}\kern 0.5% pt}\nolimits_{\mathbin{\mathcal{A}}}\rightarrow\mathop{\mathfrak{Obj}\kern 0.5% pt}\nolimits_{\mathbin{\mathcal{A}}}$ as follows. For $U\in\mathop{\rm Sch}\nolimits_{\mathbin{\mathbb{K}}}$, let ${\mathfrak{b}}(U),{\mathfrak{m}}(U),{\mathfrak{e}}(U):\mathop{\mathfrak{Exact}% \kern 0.5pt}\nolimits_{\mathbin{\mathcal{A}}}(U)\rightarrow\mathop{\mathfrak{% Obj}\kern 0.5pt}\nolimits_{\mathbin{\mathcal{A}}}(U)$ act on $(X,Y,Z,\phi,\psi)$ in $\mathop{\rm Obj\kern 1.0pt}\nolimits(\mathop{\mathfrak{Exact}\kern 0.5pt}% \nolimits_{\mathbin{\mathcal{A}}}(U))$ and $(\alpha,\beta,\gamma)$ in $\mathop{\rm Mor}\nolimits(\mathop{\mathfrak{Exact}\kern 0.5pt}\nolimits_{% \mathbin{\mathcal{A}}}(U))$ by $\displaystyle{\mathfrak{b}}(U):(X,Y,Z,\phi,\psi)\mapsto X,\;\>{\mathfrak{b}}(U% ):(\alpha,\beta,\gamma)\mapsto\alpha,\;\>{\mathfrak{m}}(U):(X,Y,Z,\phi,\psi)% \mapsto Y,$ $\displaystyle{\mathfrak{m}}(U):(\alpha,\beta,\gamma)\mapsto\beta,\quad{% \mathfrak{e}}(U):(X,Y,Z,\phi,\psi)\mapsto Z\;\>\text{and}\;\>{\mathfrak{e}}(U)% :(\alpha,\beta,\gamma)\mapsto\gamma.$ Then ${\mathfrak{b}},{\mathfrak{m}},{\mathfrak{e}}$ project to the beginning, middle and end objects $X,Y,Z$ respectively in $0\rightarrow X\rightarrow Y\rightarrow Z\rightarrow 0$. For $\alpha,\beta,\gamma\in\bar{C}({\mathbin{\mathcal{A}}})$ with $\beta=\alpha+\gamma$, these restrict to ${\mathfrak{b}}:\mathop{\mathfrak{Exact}\kern 0.5pt}\nolimits_{\mathbin{% \mathcal{A}}}^{\alpha,\beta,\gamma}\rightarrow\mathop{\mathfrak{Obj}\kern 0.5% pt}\nolimits_{\mathbin{\mathcal{A}}}^{\alpha},\;\>{\mathfrak{m}}:\mathop{% \mathfrak{Exact}\kern 0.5pt}\nolimits_{\mathbin{\mathcal{A}}}^{\alpha,\beta,% \gamma}\rightarrow\mathop{\mathfrak{Obj}\kern 0.5pt}\nolimits_{\mathbin{% \mathcal{A}}}^{\beta},\;\>{\mathfrak{e}}:\mathop{\mathfrak{Exact}\kern 0.5pt}% \nolimits_{\mathbin{\mathcal{A}}}^{\alpha,\beta,\gamma}\rightarrow\mathop{% \mathfrak{Obj}\kern 0.5pt}\nolimits_{\mathbin{\mathcal{A}}}^{\gamma}.$ For $(I,{\mathop{\preceq}\nolimits})$ a finite poset, $\kappa:I\rightarrow\bar{C}({\mathbin{\mathcal{A}}})$, and $J\in{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I,{\mathop{\preceq}% \nolimits})}}$, define a 1-morphism $\boldsymbol{\sigma}(J):{\mathfrak{M}}(I,{\mathop{\preceq}\nolimits})_{\mathbin% {\mathcal{A}}}\rightarrow\mathop{\mathfrak{Obj}\kern 0.5pt}\nolimits_{\mathbin% {\mathcal{A}}}$, where $\boldsymbol{\sigma}(J)(U):{\mathfrak{M}}(I,{\mathop{\preceq}\nolimits})_{% \mathbin{\mathcal{A}}}(U)\rightarrow\mathop{\mathfrak{Obj}\kern 0.5pt}% \nolimits_{\mathbin{\mathcal{A}}}(U)$ acts as $\boldsymbol{\sigma}(J)(U):(\sigma,\iota,\pi)\mapsto\sigma(J)$ on objects and $\boldsymbol{\sigma}(J)(U):\alpha\mapsto\alpha(J)$ on morphisms, for $U\in\mathop{\rm Sch}\nolimits_{\mathbin{\mathbb{K}}}$. It restricts to $\boldsymbol{\sigma}(J):{\mathfrak{M}}(I,{\mathop{\preceq}\nolimits},\kappa)_{% \mathbin{\mathcal{A}}}\rightarrow\mathop{\mathfrak{Obj}\kern 0.5pt}\nolimits_{% \mathbin{\mathcal{A}}}^{\kappa(J)}$. As in Definition 5.1 ${\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}% \nolimits})}}\!\subseteq\!{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I% ,{\mathop{\preceq}\nolimits})}}$, ${\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}% \nolimits})}}\!\subseteq\!{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I% ,{\mathop{\preceq}\nolimits})}}$ and ${\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}% \nolimits})}}\!\subseteq\!{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I% ,{\mathop{\preceq}\nolimits})}}$. Define the $(J,{\mathop{\preceq}\nolimits})$-subconfiguration $1$-morphism $S(I,{\mathop{\preceq}\nolimits},J):{\mathfrak{M}}(I,{\mathop{\preceq}\nolimits% })_{\mathbin{\mathcal{A}}}\rightarrow{\mathfrak{M}}(J,{\mathop{\preceq}% \nolimits})_{\mathbin{\mathcal{A}}}$ by $S(I,{\mathop{\preceq}\nolimits},J)(U):(\sigma,\iota,\pi)\mapsto(\sigma|_{{% \mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}\nolimits% })}}},\iota|_{{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(J,{\mathop{% \preceq}\nolimits})}}},\pi|_{{\mathbin{\mathcal{H}}}_{\smash{% \scriptscriptstyle(J,{\mathop{\preceq}\nolimits})}}}),\quad\alpha\mapsto\alpha% |_{{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(J,{\mathop{\preceq}% \nolimits})}}}$ on $(\sigma,\iota,\pi)\!\in\!\mathop{\rm Obj\kern 1.0pt}\nolimits({\mathfrak{M}}(I% ,{\mathop{\preceq}\nolimits})_{\mathbin{\mathcal{A}}}(U))$ and $\alpha\!\in\!\mathop{\rm Mor}\nolimits({\mathfrak{M}}(I,{\mathop{\preceq}% \nolimits})_{\mathbin{\mathcal{A}}}(U))$, for $U\!\in\!\mathop{\rm Sch}\nolimits_{\mathbin{\mathbb{K}}}$. It restricts to $S(I,{\mathop{\preceq}\nolimits},J):{\mathfrak{M}}(I,{\mathop{\preceq}\nolimits% },\kappa)_{\mathbin{\mathcal{A}}}\rightarrow{\mathfrak{M}}(J,{\mathop{\preceq}% \nolimits},\kappa|_{J})_{\mathbin{\mathcal{A}}}$. Now let $(I,{\mathop{\preceq}\nolimits})$ and $(K,\trianglelefteq\nobreak)$ be finite posets, and $\phi:I\rightarrow K$ a surjective map with $i{\mathop{\preceq}\nolimits}j$ implies $\phi(i)\trianglelefteq\nobreak\phi(j)$ for $i,j\in I$. As in Definition 5.2, pullback of subsets of $K$ to $I$ gives injective maps $\phi^{*}:{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(K,\trianglelefteq% \nobreak)}}\!\rightarrow\!{\mathbin{\mathcal{F}}}_{\smash{\scriptscriptstyle(I% ,{\mathop{\preceq}\nolimits})}}$, $\phi^{*}:{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(K,\trianglelefteq% \nobreak)}}\!\rightarrow\!{\mathbin{\mathcal{G}}}_{\smash{\scriptscriptstyle(I% ,{\mathop{\preceq}\nolimits})}}$ and $\phi^{*}:{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(K,\trianglelefteq% \nobreak)}}\!\rightarrow\!{\mathbin{\mathcal{H}}}_{\smash{\scriptscriptstyle(I% ,{\mathop{\preceq}\nolimits})}}$. Define the quotient $(K,\trianglelefteq\nobreak)$-configuration $1$-morphism $Q(I,{\mathop{\preceq}\nolimits},K,\trianglelefteq\nobreak,\phi):{\mathfrak{M}}% (I,{\mathop{\preceq}\nolimits})_{\mathbin{\mathcal{A}}}\rightarrow{\mathfrak{M% }}(K,\trianglelefteq\nobreak)_{\mathbin{\mathcal{A}}}$ by $Q(I,{\mathop{\preceq}\nolimits},K,\trianglelefteq\nobreak,\phi)(U):(\sigma,% \iota,\pi)\mapsto(\sigma\circ\phi^{*},\iota\circ\phi^{*},\pi\circ\phi^{*}),% \quad\alpha\mapsto\alpha\circ\phi^{*}$ on $(\sigma,\iota,\pi)\!\in\!\mathop{\rm Obj\kern 1.0pt}\nolimits({\mathfrak{M}}(I% ,{\mathop{\preceq}\nolimits})_{\mathbin{\mathcal{A}}}(U))$ and $\alpha\!\in\!\mathop{\rm Mor}\nolimits({\mathfrak{M}}(I,{\mathop{\preceq}% \nolimits})_{\mathbin{\mathcal{A}}}(U))$, for $U\!\in\!\mathop{\rm Sch}\nolimits_{\mathbin{\mathbb{K}}}$. In the special case when $I=K$ and $\phi:I\rightarrow I$ is the identity map $\mathop{\rm id}\nolimits_{I}$, write $Q(I,{\mathop{\preceq}\nolimits},\trianglelefteq\nobreak)=Q(I,{\mathop{\preceq}% \nolimits},I,\trianglelefteq\nobreak,\mathop{\rm id}\nolimits_{I})$. Given $\kappa:I\rightarrow\bar{C}({\mathbin{\mathcal{A}}})$, define $\mu:K\rightarrow\bar{C}({\mathbin{\mathcal{A}}})$ by $\mu(k)=\kappa(\phi^{-1}(k))$. Then $Q(I,{\mathop{\preceq}\nolimits},K,\trianglelefteq\nobreak,\phi)$ restricts to $Q(I,{\mathop{\preceq}\nolimits},K,\trianglelefteq\nobreak,\phi):{\mathfrak{M}}% (I,{\mathop{\preceq}\nolimits},\kappa)_{\mathbin{\mathcal{A}}}\rightarrow{% \mathfrak{M}}(K,\trianglelefteq\nobreak,\mu)_{\mathbin{\mathcal{A}}}$. When $I=K$ and $\phi=\mathop{\rm id}\nolimits_{I}$ we have $\mu=\kappa$, so $Q(I,{\mathop{\preceq}\nolimits},\trianglelefteq\nobreak):{\mathfrak{M}}(I,{% \mathop{\preceq}\nolimits},\kappa)_{\mathbin{\mathcal{A}}}\rightarrow{% \mathfrak{M}}(I,\trianglelefteq\nobreak,\kappa)_{\mathbin{\mathcal{A}}}$.
Definition 5.3. Let $(J,\mathop{\lesssim\kern 0.5pt}\nolimits),(K,\trianglelefteq\nobreak)$ be finite posets and $L\subset K$ an f-set, with $J\cap(K\setminus L)=\emptyset$. Suppose $\psi:J\rightarrow L$ is a surjective map with $\psi(i)\trianglelefteq\nobreak\psi(j)$ when $i,j\in J$ with $i\mathop{\lesssim\kern 0.5pt}\nolimits j$. Set $I=J\cup(K\setminus L)$, and define a binary relation ${\mathop{\preceq}\nolimits}$ on $I$ by $i{\mathop{\preceq}\nolimits}j\quad\text{for $i,j\in I$ if}\quad\begin{cases}i% \mathop{\lesssim\kern 0.5pt}\nolimits j,&i,j\in J,\\ i\trianglelefteq\nobreak j,&i,j\in K\setminus L,\\ \psi(i)\trianglelefteq\nobreak j,&i\in J,\quad j\in K\setminus L,\\ i\trianglelefteq\nobreak\psi(j),&i\in K\setminus L,\quad j\in J.\end{cases}$ One can show ${\mathop{\preceq}\nolimits}$ is a partial order on $I$, and $J\subseteq I$ an f-set in $(I,{\mathop{\preceq}\nolimits})$. The restriction of ${\mathop{\preceq}\nolimits}$ to $J$ is $\mathop{\lesssim\kern 0.5pt}\nolimits$. Define $\phi:I\rightarrow K$ by $\phi(i)=\psi(i)$ if $i\in J$ and $\phi(i)=i$ if $i\in K\setminus L$. Then $\phi$ is surjective, with $\phi(i)\trianglelefteq\nobreak\phi(j)$ when $i,j\in I$ with $i{\mathop{\preceq}\nolimits}j$.
Definition 2 ([Illusie]). Define $\mathrm{Dec}_{0}\colon s\mathscr{C}\to as\mathscr{C}$ to be the functor given by restriction along $\sigma(-,[0])\colon\Delta_{a}\to\Delta$, so that if $X$ is a simplicial object in $\mathscr{C}$ then $\mathrm{Dec}_{0}X$ is the augmented simplicial object given by $\mathrm{Dec}_{0}X([n])=X([n+1]),$ whose face maps $d_{i}\colon(\mathrm{Dec}_{0}X)_{n}\to(\mathrm{Dec}_{0}X)_{n-1}$ are given by $d_{i}\colon X_{n+1}\to X_{n}$ for $i=0,1,\ldots,n$, and whose degeneracy maps $s_{i}\colon(\mathrm{Dec}_{0}X)_{n}\to(\mathrm{Dec}_{0}X)_{n+1}$ are given by $s_{i}\colon X_{n+1}\to X_{n+2}$ for $i=0,1,\ldots,n$. The augmentation $(\mathrm{Dec}_{0}X)_{0}\to X_{0}$ is given by $d_{0}\colon X_{1}\to X_{0}$. $\mathrm{Dec}_{0}X$ is obtained from $X$ by forgetting the top face and degeneracy map at each level and re-indexing by shifting degrees up by one. Thus the augmented simplicial object $\mathrm{Dec}_{0}X$ can be pictured as
Definition 4.1. A Herbrand assembly over ${\mathcal{P}}$ is a triple $(A,{\cal A},\alpha)$ in which • $A$ is a set, • ${\cal A}$ is a subset of ${\mathcal{P}}$, and • $\alpha:A\to{\rm Pow}^{upcl}_{i}(!{\cal A})$ is a function whose codomain ${\rm Pow}^{upcl}_{i}(!{\cal A})$ consists of the subsets $X$ of $!{\cal A}$ that are inhabited and upwards closed in $!{\mathcal{A}}$. A morphism $f:(B,{\cal B},\beta)\to(A,{\cal A},\alpha)$ of Herbrand assemblies is a function $f:B\to A$ for which there is an $n\in{\mathcal{P}}$ such that • for all $m\in!{\cal B}$, the expression $n\cdot m$ is defined and its value belongs to $!{\cal A}$, • and if $b\in B$ and $m\in\beta(b)$, then $n\cdot m\in\alpha(fb)$. We will say that such an $n$ tracks $f$ or is a tracking of $f$. This clearly defines a category: we will denote it by ${\mathcal{HA}sm}[{\mathcal{P}}]$.
Definition 2.2. An operad $\mathcal{O}$ in $\mathscr{V}$ is a sequence $\mathcal{O}=\{\mathcal{O}(n)\}_{n\geq 0}$ of objects in $\mathscr{V}$ equipped with an identity, $\mathrm{id}_{\mathcal{O}}\colon\mathbb{I}\rightarrow\mathcal{O}(1),$ and composition laws, $1\leq i\leq p$, $q\geq 0$, $\circ_{i}\colon\mathcal{O}(p)\otimes\mathcal{O}(q)\longrightarrow\mathcal{O}(p% +q-1),$ satisfying certain associativity and unit equations, see [Mur11, Remark 2.6]. We refer to $\mathcal{O}(n)$ as the arity $n$ component of $\mathcal{O}$. A morphism of operads $f\colon\mathcal{O}\rightarrow\mathcal{P}$ is a sequence of morphisms $f(n)\colon\mathcal{O}(n)\rightarrow\mathcal{P}(n)$ in $\mathscr{V}$, $n\geq 0$, compatible with the identities and composition laws in the obvious way. We denote $\operatorname{Op}(\mathscr{V})$ the model category of operads in $\mathscr{V}$. An operad morphism $f$ is a fibration (resp. weak equivalence) if $f(n)$ is a fibration (resp. weak equivalence) in $\mathscr{V}$ for all $n\geq 0$ [Mur11, Theorem 1.1].
Definition 5.23. Let $\mathcal{O}$ be an admissible operad in $\mathscr{V}$ and $F$ a substack of $\underline{\operatorname{QCoh}}$. We define the restricted stack of $\mathcal{O}$-algebras $\underline{\operatorname{Alg}}_{F}(\mathcal{O})$ as the following pull-back, $\xymatrix{\underline{\operatorname{Alg}}_{F}(\mathcal{O})\ar[r]\ar[d]\ar@{}[rd% ]|-{\text{pull}}&\underline{\operatorname{Alg}}_{\mathscr{V}}(\mathcal{O})\ar[% d]^{-}{\xi^{\mathcal{O}}}\\ F\ar[r]_{-}{\text{incl.}}&\underline{\operatorname{QCoh}}.}$
Definition 6.9. Given an object $U$ in $\mathscr{V}$ and an integer $m\geq 0$, denote $U[m]$ the sequence of objects in $\mathscr{V}$ whose $m^{\text{th}}$ term is $U$ and whose other terms are the initial object $\varnothing$. This construction defines a functor $\mathscr{V}\rightarrow\mathscr{V}^{\mathbb{N}}$, left adjoint to $\{V(n)\}_{n\geq 0}\mapsto V(m)$. Let $q_{\mathbb{I}}\colon\tilde{\mathbb{I}}\stackrel{{\scriptstyle\sim}}{{% \twoheadrightarrow}}\mathbb{I}$ be a cofibrant replacement of the tensor unit. Choose a cylinder for $\tilde{\mathbb{I}}$, which is a factorization of the folding map $\tilde{\mathbb{I}}\coprod\tilde{\mathbb{I}}\stackrel{{\scriptstyle i}}{{% \rightarrowtail}}C\mathop{\twoheadrightarrow}^{p}_{\sim}\tilde{\mathbb{I}}.$ The operad $\mathtt{Ass}^{\operatorname{qu}}$ is defined as the following push-out in $\operatorname{Op}(\mathscr{V})$, $\xymatrix@C=80pt{\mathcal{F}((\tilde{\mathbb{I}}\coprod\tilde{\mathbb{I}})[1])% \coprod\mathcal{F}((\tilde{\mathbb{I}}\coprod\tilde{\mathbb{I}})[1])\ar@{>->}[% r]^{-}{\mathcal{F}(i[1])\coprod\mathcal{F}(i[1])}\ar[d]_{(c_{1},c_{2})}\ar@{}[% rd]|{\text{push}}&\mathcal{F}(C[1])\coprod\mathcal{F}(C[1])\ar[d]\\ \mathtt{Ass}\coprod\mathcal{F}(\tilde{\mathbb{I}}[0])\ar@{>->}[r]&\mathtt{Ass}% ^{\operatorname{qu}}}$ The morphism $c_{1}$ is defined by a map $(c_{11},c_{12})\colon\tilde{\mathbb{I}}\coprod\tilde{\mathbb{I}}\rightarrow(% \mathtt{Ass}\coprod\mathcal{F}(\tilde{\mathbb{I}}[0]))(1)$. The map $c_{11}$ is the composite $\tilde{\mathbb{I}}\mathop{\twoheadrightarrow}^{q_{\mathbb{I}}}_{\sim}\mathbb{I% }=\mathtt{Ass}(1)\longrightarrow(\mathtt{Ass}\coprod\mathcal{F}(\tilde{\mathbb% {I}}[0]))(1),$ where the second map is given by the inclusion of the first factor of the coproduct. The map $c_{12}$ is the composite $\xy(-6.3,0)*{\tilde{\mathbb{I}}\cong\mathbb{I}\otimes\tilde{\mathbb{I}}=% \mathtt{Ass}(2)\otimes\mathcal{F}(\tilde{\mathbb{I}}[0])(0)}="a",(0,-10)*+{(% \mathtt{Ass}\coprod\mathcal{F}(\tilde{\mathbb{I}}[0]))(2)\otimes(\mathtt{Ass}% \coprod\mathcal{F}(\tilde{\mathbb{I}}[0]))(0)}="b",(0,-20)*+{(\mathtt{Ass}% \coprod\mathcal{F}(\tilde{\mathbb{I}}[0]))(1).}="c"\ar(0,-3);"b"\ar"b";"c"^{% \circ_{1}}\endxy$ Here the first arrow is given by the tensor product of the inclusions of the factors of the coproduct. Similarly $c_{2}$ is defined by a map $(c_{21},c_{22})$ such that $c_{21}=c_{11}$ and $c_{22}$ is defined like $c_{12}$ replacing $\circ_{1}$ with $\circ_{2}$.
Definition 2.5. A model $\mathscr{V}$-algebra $\mathscr{C}$ is a monoidal model category, in the sense of Definition 2.1, equipped with a left Quillen functor $z\colon\mathscr{V}\rightarrow\mathscr{C}$ and natural isomorphisms $\displaystyle\text{\emph{multiplication}}\colon z(X)\otimes_{\mathscr{C}}z(X^{% \prime})$ $\displaystyle\stackrel{{\scriptstyle}}{{\longrightarrow}}z(X\otimes_{\mathscr{% V}}X^{\prime}),$ $\displaystyle\text{\emph{unit}}\colon\mathbb{I}_{\mathscr{C}}$ $\displaystyle\stackrel{{\scriptstyle}}{{\longrightarrow}}z(\mathbb{I}_{% \mathscr{V}}),$ $\displaystyle\zeta(X,Y)\colon z(X)\otimes_{\mathscr{C}}Y$ $\displaystyle\stackrel{{\scriptstyle}}{{\longrightarrow}}Y\otimes_{\mathscr{C}% }z(X),$ satisfying some coherence laws, see [Bor94, Definition 6.4.1] and [Mur11, §7]. We also assume that $z$ satisfies the $\mathbb{I}$-cofibrant axiom [Mur13, Definition B.6]. Hence, Quillen equivalent $\mathscr{V}$-algebras have Quillen equivalent categories of algebras over a same nice enough operad, see [Mur13, Theorem D.11]. A symmetric model $\mathscr{V}$-algebra $\mathscr{C}$ is a symmetric monoidal model category equipped with a strong symmetric monoidal left Quillen functor $z\colon\mathscr{V}\rightarrow\mathscr{C}$ satisfying the $\mathbb{I}$-cofibrant axiom. In Hovey’s terminology, a model $\mathscr{V}$-algebra is the same as a central monoidal $\mathscr{V}$-model category, and a symmetric model $\mathscr{V}$-algebra is a symmetric $\mathscr{V}$-model category, see the paragraph after [Hov99, Definition 4.2.20].
Definition 2.1. A monoidal model category $\mathscr{C}$ in the sense of [Hov99, Definition 4.2.6] is a biclosed monoidal category endowed with a model structure such that the push-out product axiom [SS00, Definitions 3.1] and the unit axiom hold. These two axioms imply that the homotopy category $\operatorname{Ho}\mathscr{C}$ has an induced biclosed monoidal structure [Hov99, §4.3]. The tensor product is denoted by $\otimes$ and the tensor unit by $\mathbb{I}$. If we need to distinguish between different monoidal categories we add a subscript, e.g. $\otimes_{\mathscr{C}}$ and $\mathbb{I}_{\mathscr{C}}$. We further assume that monoidal model categories satisfy the monoid axiom [Mur11, Definition 9.1] and the strong unit axiom [Mur13, Definition A.9], recalled in Remark A.2 below. They guarantee the existence of transferred model structures on monoids, operads, algebras over operads, etc. See [SS00, Mur11]. The strong unit axiom allows the transfer of Quillen equivalences and always holds if the tensor unit is cofibrant, see [Mur13]. We will also assume that all monoidal model categories are cofibrantly generated by sets of generating (trivial) cofibrations with presentable sources. A symmetric monoidal model category $\mathscr{V}$ is a monoidal model category as above whose underlying monoidal category is symmetric. In this case the monoid axiom simplifies, see [SS00, Definitions 3.3].
Definition 5.18 ([TV08, Definition 1.2.3.6]). Let $Y$ be an object in $\mathscr{V}$. For the sake of simplicity, let us assume that $Y$ is fibrant and cofibrant. Let $\displaystyle q_{X}\colon$ $\displaystyle QX\stackrel{{\scriptstyle\sim}}{{\twoheadrightarrow}}X,$ $\displaystyle r_{X}\colon$ $\displaystyle X\stackrel{{\scriptstyle\sim}}{{\rightarrowtail}}RX,$ be functorial cofibrant and fibrant replacements in $\mathscr{V}$, respectively. Moreover, denote internal morphism objects in $\mathscr{V}$ by $\operatorname{Hom}_{\mathscr{V}}$. The dual of $Y$ is $Y^{\vee}=\operatorname{Hom}_{\mathscr{V}}(Y,R\mathbb{I})$. The object $Y$ is perfect if the composition of the two vertical morphisms in the following diagram is a weak equivalence in $\mathscr{V}$, $\xymatrix@C=7pt{Y\otimes Y^{\vee}\ar@{=}[r]&\operatorname{Hom}_{\mathscr{V}}(% \mathbb{I},Y)\otimes\operatorname{Hom}_{\mathscr{V}}(Y,R\mathbb{I})\ar[rr]^{-}% \sim_{-}{q_{\mathbb{I}}^{*}\otimes\mathrm{id}}&&\operatorname{Hom}_{\mathscr{V% }}(Q\mathbb{I},Y)\otimes\operatorname{Hom}_{\mathscr{V}}(Y,R\mathbb{I})\ar[d]^% {-}\otimes\\ &&&\operatorname{Hom}_{\mathscr{V}}(Q\mathbb{I}\otimes Y,Y\otimes R\mathbb{I})% \ar[d]^{(r_{Y\otimes R\mathbb{I}})_{*}}\\ \operatorname{Hom}_{\mathscr{V}}(Y,Y)\ar@{=}[r]&\operatorname{Hom}_{\mathscr{V% }}(\mathbb{I}\otimes Y,Y\otimes\mathbb{I})\ar[rr]^{-}\sim_{-}{\begin{array}[]{% c}\\ \scriptstyle\operatorname{Hom}_{\mathscr{V}}(q_{\mathbb{I}}\otimes\mathrm{id}_% {Y},r_{Y\otimes R\mathbb{I}}(\mathrm{id}_{Y}\otimes r_{Y}))\end{array}}&&% \operatorname{Hom}_{\mathscr{V}}(Q\mathbb{I}\otimes Y,R(Y\otimes R\mathbb{I}))}$ In this case, this diagram yields an isomorphism $Y\otimes Y^{\vee}\cong\operatorname{Hom}_{\mathscr{V}}(Y,Y)$ in $\operatorname{Ho}\mathscr{V}$. An arbitrary $Y$ is perfect if a fibrant-cofibrant replacement is perfect. If $A$ is a commutative algebra, we can replace $\mathscr{V}$ with $\mathrm{Mod}(A)$ and $\mathbb{I}$ with $A$ in the previous paragraphs. This yields the notions of dual and perfect $A$-module.
Definition 2.11. The endomorphism operad of an object $Y$ in $\mathscr{C}$ is the operad $\texttt{End}_{\mathscr{C}}(Y)$ in $\mathscr{V}$ with $\texttt{End}_{\mathscr{C}}(Y)(n)=\operatorname{Hom}_{\mathscr{C}}(Y^{\otimes n% },Y).$ The identity of this operad is the $\mathscr{V}$-enriched identity in $Y$. Composition laws are described in [Mur11, Definition 7.1].
Definition 6.5. An associative algebra $X$ in $\mathscr{C}$ with underlying fibrant-cofibrant object is quasi-unital if there exists a map $u\colon\tilde{\mathbb{I}}\rightarrow X$, where $q_{\mathbb{I}}\colon\tilde{\mathbb{I}}\stackrel{{\scriptstyle\sim}}{{% \twoheadrightarrow}}\mathbb{I}$ is a cofibrant replacement of the tensor unit, such that the maps $\begin{array}[]{c}\tilde{\mathbb{I}}\otimes X\stackrel{{\scriptstyle u\otimes X% }}{{\longrightarrow}}X\otimes X\stackrel{{\scriptstyle\text{mult.}}}{{% \longrightarrow}}X,\\ X\otimes\tilde{\mathbb{I}}\stackrel{{\scriptstyle X\otimes u}}{{% \longrightarrow}}X\otimes X\stackrel{{\scriptstyle\text{mult.}}}{{% \longrightarrow}}X,\end{array}$ are homotopic to $\tilde{\mathbb{I}}\otimes X\mathop{\longrightarrow}\limits^{q_{\mathbb{I}}% \otimes X}_{\sim}\mathbb{I}\otimes X\cong X$ and $X\otimes\tilde{\mathbb{I}}\mathop{\longrightarrow}\limits^{X\otimes q_{\mathbb% {I}}}_{\sim}\mathbb{I}\otimes X\cong X$, respectively. If the associative algebra $X$ does not have an underlying fibrant-cofibrant object, we say that $X$ is quasi-unital if a (and hence any) fibrant-cofibrant replacement of $X$ in $\operatorname{Alg}_{\mathscr{C}}(\mathtt{Ass})$ is quasi-unital. Such a fibrant-cofibrant replacement has an underlying fibrant-cofibrant object in $\mathscr{C}$ by [Mur13, Corollary D.3].
Definition 5.3. A symmetric $\mathscr{V}$-algebra functor is a lax symmetric monoidal functor between symmetric $\mathscr{V}$-algebras $F\colon\mathscr{C}\rightarrow\mathscr{D}$ equipped with a monoidal natural isomorphism $Fz_{\mathscr{C}}(X)\cong z_{\mathscr{D}}(X)$. A symmetric $\mathscr{V}$-algebra Quillen adjunction $F\colon\mathscr{C}\rightleftarrows\mathscr{D}\colon G$ is a Quillen pair between symmetric model $\mathscr{V}$-algebras which is a lax-lax symmetric monoidal adjunction and such that $F$ is equipped with the structure of a symmetric $\mathscr{V}$-algebra functor. In particular $F$ is strong monoidal. We assume in addition that the $\mathbb{I}$-cofibrant axiom in [Mur13, Definition B.6] is satisfied.
Definition 6.21. The differential graded $A$-infinity operad $\mathtt{A}_{\infty}$ is defined as follows. The underlying graded operad of $\mathtt{A}_{\infty}$ is freely generated by $\mu_{n}\in\mathtt{A}_{\infty}(n)_{n-2},\qquad n\geq 2,$ and the differential is given by $d(\mu_{n})=\sum_{\begin{array}[]{c}\\ \scriptstyle p+q-1=n\\ \scriptstyle 1\leq i\leq p\end{array}}(-1)^{qp+(q-1)i}\mu_{p}\circ_{i}\mu_{q}.$
Definition 5.7. Given a cosimplicial commutative algebra $A^{\bullet}$, a cosimplicial $A^{\bullet}$-module $M^{\bullet}=(M^{n},d^{i},s^{i})$ consists of a $A^{n}$-module $M^{n}$ for each $n\geq 0$ together with coface $d^{i}\colon M^{n-1}\rightarrow M^{n}$ and codegeneracy $s^{i}\colon M^{n+1}\rightarrow M^{n}$ morphisms of $A^{n}$-modules satisfying the usual cosimplicial identities. Here $M^{n-1}$ and $M^{n+1}$ are regarded as $A^{n}$-modules via restriction of scalars along the coface $d^{i}\colon A^{n-1}\rightarrow A^{n}$ and codegeneracy $s^{i}\colon A^{n+1}\rightarrow A^{n}$ in $A^{\bullet}$, respectively, $0\leq i\leq n$, A cosimplicial $A^{\bullet}$-module $M^{\bullet}$ is homotopy cartesian if the derived adjoints $M^{n-1}\otimes^{\mathbb{L}}_{A^{n-1}}A^{n}\rightarrow M^{n}$ and $M^{n+1}\otimes^{\mathbb{L}}_{A^{n+1}}A^{n}\rightarrow M^{n}$ of all coface and codegeneracy maps are weak equivalences.
Definition 2.8. Let $\mathcal{O}$ be an operad in $\mathscr{V}$. An $\mathcal{O}$-algebra $A$ in $\mathscr{C}$ is an object of $\mathscr{C}$ equipped with structure morphisms $\nu_{n}\colon z(\mathcal{O}(n))\otimes A^{\otimes n}\longrightarrow A,\qquad n% \geq 0,$ satisfying compatibility relations with the composition laws and the unit of $\mathcal{O}$, see [Mur11, Definition 7.1]. An $\mathcal{O}$-algebra morphism $g\colon A\rightarrow B$ is a morphism in $\mathscr{C}$ compatible with the structure morphisms in the obvious way, see again [Mur11, Definition 7.1]. We denote $\operatorname{Alg}_{\mathscr{C}}(\mathcal{O})$ the model category of $\mathcal{O}$-algebras $A$ in $\mathscr{C}$, where a morphism is a fibration (resp. weak equivalence) if its underlying morphism in $\mathscr{C}$ is a fibration (resp. weak equivalence) [Mur11, Theorem 1.2].
Definition 2.15. A $\mathscr{V}$-algebra functor is a lax monoidal functor between $\mathscr{V}$-algebras $F\colon\mathscr{C}\rightarrow\mathscr{D}$ equipped with a monoidal natural isomorphism $Fz_{\mathscr{C}}(X)\cong z_{\mathscr{D}}(X)$ such that the diagram in [Hov99, Definition 4.1.11] commutes (after replacing Hovey’s $i$ with our $z$, which is just a matter of notation).
Definition 5.21. Given a stack $G$, a substack of $G$ is a stack $F$ such that, for any $X$ in ${\operatorname{Aff}}_{\mathscr{V}}$, $F(X)\subset G(X)$ is a simplicial subset formed by certain connected components of $G(X)$ and the inclusions define a morphism $F\rightarrow G$.
Definition A.1. A monoidal model category $\mathscr{C}$ satisfies the very strong unit axiom if for any object $X$ and any cofibrant replacement $q\colon\tilde{\mathbb{I}}\stackrel{{\scriptstyle\sim}}{{\twoheadrightarrow}}% \mathbb{I}$ of the tensor unit, the morphisms $X\otimes q$ and $q\otimes X$ are weak equivalences.
Definition 5.14. Let $\mathcal{O}$ be an admissible operad in $\mathscr{V}$, $A$ a commutative algebra in $\mathscr{V}$, and $M$ an $A$-module. The stack of $\mathcal{O}$-algebra structures on $M$ is the stack over $\mathbb{R}\underline{\operatorname{Spec}}(A)$ $\underline{\operatorname{Map}}_{\operatorname{Op}(\mathscr{V})}(\mathcal{O},% \mathtt{End}_{\mathrm{Mod}(A)}(M))$ defined as the homotopy pull-back of $\xi^{\mathcal{O}}$ along the morphism $g\colon\mathbb{R}\underline{\operatorname{Spec}}(A)\rightarrow\underline{% \operatorname{QCoh}}$ represented by $M$.
Definition 6.17 ([TV08, Definition 1.2.3.1]). An object $X$ in a model category $\mathscr{M}$ is homotopically finitely presented if the mapping space functor $\operatorname{Map}_{\mathscr{M}}(X,-)$ preserves filtered homotopy colimits. A morphism $X\rightarrow Y$ in $\mathscr{M}$ is homotopically finitely presented if it is homotopically finitely presented as an object in the comma model category $X\downarrow\mathscr{M}$.
Definition 6.1. A map of simplicial sets $g\colon K\rightarrow L$ is a homotopy monomorphism if it corestricts to a weak equivalence between $K$ and a subset of connected components of $L$. This is equivalent to say that the homotopy fibers of $g$ are empty or weakly contractible. A morphism $f\colon X\rightarrow Y$ in a model category $\mathscr{M}$ is a homotopy epimorphism if for any object $Z$ in $\mathscr{M}$ the induced map $f^{*}\colon\operatorname{Map}_{\mathscr{M}}(Y,Z)\rightarrow\operatorname{Map}_% {\mathscr{M}}(X,Z)$ is a homotopy monomorphism. A map $f\colon X\rightarrow Y$ is a homotopy monomorphism in $\mathscr{M}$ if it is a homotopy epimorphism in $\mathscr{M}^{\mathrm{op}}$. This is the same as saying that the derived codiagonal, which is the map $\Delta=\binom{1_{X}}{1_{X}}\colon X\rightarrow X\times_{Y}^{h}X$ to the homotopy product of $X$ with itself over $Y$, is a weak equivalence. The two notions of homotopy monomorphism of simplicial sets coincide.
Definition 4.2. An object $X$ in $\mathscr{V}$ is $\mathbb{I}$-cofibrant if there exists a cofibration $\mathbb{I}\rightarrowtail X$ from the tensor unit $\mathbb{I}$. An operad $\mathcal{O}$ in $\mathscr{V}$ is admissible if each $\mathcal{O}(n)$ is cofibrant or $\mathbb{I}$-cofibrant, $n\geq 0$.
Definition 2.3. A Banach bundle $({\mathscr{E}},\pi,{\mathscr{X}})$ is a surjective continuous open map $\pi:{\mathscr{E}}\to{\mathscr{X}}$ such that for all $x\in{\mathscr{X}}$ the fiber ${\mathscr{E}}_{x}:=\pi^{-1}(x)$ is a complex Banach space and satisfying the following additional conditions: • the operation of additon $+:{\mathscr{E}}\times_{\mathscr{X}}{\mathscr{E}}\to{\mathscr{E}}$ is continuous on the set ${\mathscr{E}}\times_{\mathscr{X}}{\mathscr{E}}:=\{(x,y)\in{\mathscr{E}}\times{% \mathscr{E}}\ |\ \pi(x)=\pi(y)\}$, • the operation of multiplication by scalars $\cdot:{\mathbb{C}}\times{\mathscr{E}}\to{\mathscr{E}}$ is continuous, • the norm $\|\cdot\|:{\mathscr{E}}\to{\mathbb{R}}$ is continuous, • for all $x_{o}\in{\mathscr{X}}$, the family $U_{x_{o}}^{{\mathscr{O}},\epsilon}=\{e\in{\mathscr{E}}\ |\ \|e\|<\epsilon,\pi(% e)\in{\mathscr{O}}\}$ where ${\mathscr{O}}\subset{\mathscr{X}}$ is an open set containing $x_{o}\in{\mathscr{X}}$ and $\epsilon>0$, is a fundamental system of neighbourhood of $0\in E_{x_{o}}$. For a Hilbert bundle we require that for all $x\in{\mathscr{X}}$, fiber ${\mathscr{E}}_{x}$ is a Hilbert space.
Definition 3.14. Given two Fell bundles $({\mathscr{E}}_{j},\pi_{j},{\mathscr{X}}_{j})$, $j=1,2$, enriched in a (weak-)monoidal $*$-category, a morphism between them is a pair $(f,\mathcal{F}):({\mathscr{E}}_{1},\pi_{1},{\mathscr{X}}_{1})\to({\mathscr{E}}% _{2},\pi_{2},{\mathscr{X}}_{2})$ such that $f:{\mathscr{X}}_{1}\to{\mathscr{X}}_{2}$ is a $*$-functor and ${\mathscr{F}}:(f^{\bullet}({\mathscr{E}}_{2}),\pi_{2}^{f},{\mathscr{X}}_{1})% \to({\mathscr{E}}_{1},\pi_{1},{\mathscr{X}}_{1})$ is a morphisms of $*$-categorical bundles over the $*$-category ${\mathscr{X}}_{1}$, as specified in definition 3.13.
Definition 3.2. A (weak-)monoidal $*$-category $\scr{M}^{*}$ is just a monoidal category equipped with a contravariant functor ${\dagger}:\scr{M}^{*}\to\scr{M}^{*}$ such that for all $A,B\in\operatorname{Ob}_{\scr{M}^{*}}$ there are natural isomorphisms $\displaystyle(A^{\dagger})^{\dagger}\xrightarrow{\beta_{A}}A,\quad(A\otimes B)% ^{\dagger}\xrightarrow{\gamma_{A,B}}B^{\dagger}\otimes A^{\dagger},$ making any possible diagram in the category $\scr{M}^{*}$ whose morphisms are obtained by (eventually reapeated) applications of the functors $\otimes$ and ${\dagger}$ to instances of $\alpha$, $\beta$, $\gamma$, $\lambda$, $\rho$, $\iota$ and their inverses commutative. For an object $A$ (or respectively an arrow $f:A\to B$) in $\scr{M}^{*}$, we will say that $A^{\dagger}$ (respectively $f^{\dagger}:B^{\dagger}\to A^{\dagger}$) is its monoidal dual.
Definition 2.7. A Fell bundle is unital if, for all Hermitian idempotents $x\in{\mathscr{X}}$, the C*-algebras ${\mathscr{E}}_{x}$ are unital. A Fell bundle is commutative if the category ${\mathscr{E}}$ is commutative (equivalently, if the monoid $\pi^{-1}({\mathscr{X}}_{AA})$ is commutative for all $A\in\operatorname{Ob}_{\mathscr{X}}$).6This implies that the inverse $*$-category ${\mathscr{X}}$ is commutative (i.e. ${\mathscr{X}}_{AA}$ is a commutative monoid for all $A\in\operatorname{Ob}_{\mathscr{X}}$) and for all Hermitian idempotents $x\in{\mathscr{X}}$ the C*-algebra ${\mathscr{E}}_{x}$ is commutative. A Fell bundle is saturated if all the Hilbert C*-bimodules ${\mathscr{E}}_{x}$ are full. A small C*-category is a full C*-category if it is saturated as a Fell bundle. A small C*-category is unital (respectively commutative) whenever it is unital (respectively commutative) as a Fell bundle.
Definition 3.7. Let $\scr{M}^{*}$ be a (weak-)monoidal $*$-category. Let ${\mathscr{X}}$ be a $*$-category. An $\scr{M}^{*}$-enriched $*$-categorical bundle9Again, whenever the object of $\scr{M}^{*}$ are Banach spaces (or more generally disjoint union of Banach spaces) we ask $\nu_{x}:{\mathscr{E}}_{x}^{\dagger}\to{\mathscr{E}}_{x^{*}}$ to be linear and isometric $\|\nu_{x}(e)\|=\|e\|$. over the base $*$-category ${\mathscr{X}}$ is a categorical bundle enriched in the (weak-)monoidal $*$-category $\scr{M}^{*}$ such that • for all $x\in{\mathscr{X}}$, there is an associated morphism $\nu_{x}\in\operatorname{Hom}_{\scr{M}^{*}}(({\mathscr{E}}_{x})^{\dagger},{% \mathscr{E}}_{x^{*}})$ such that the following diagrams commute: $\xymatrix{(({\mathscr{E}}_{x})^{\dagger})^{\dagger}\ar[rr]^{\beta_{{\mathscr{E% }}_{x}}}\ar[rd]_{(\nu_{x})^{\dagger}}&&{\mathscr{E}}_{x}\\ &({\mathscr{E}}_{x^{*}})^{\dagger}\ar[ur]_{\nu_{x^{*}}}&}\xymatrix{({\mathscr{% E}}_{x}\otimes{\mathscr{E}}_{y})^{\dagger}\ar[d]_{(\mu_{x,y})^{\dagger}}\ar[rr% ]^{\gamma_{{\mathscr{E}}_{x},{\mathscr{E}}_{y}}}&&({\mathscr{E}}_{y})^{\dagger% }\otimes({\mathscr{E}}_{x})^{\dagger}\ar[d]^{\nu_{y}\otimes\nu_{x}}\\ ({\mathscr{E}}_{xy})^{\dagger}\ar[dr]_{\nu_{xy}}&&{\mathscr{E}}_{y^{*}}\otimes% {\mathscr{E}}_{x^{*}}\ar[dl]^{\mu_{y^{*},x^{*}}}\\ &{\mathscr{E}}_{(xy)^{*}}={\mathscr{E}}_{y^{*}x^{*}}&}$
Definition 2.2. A C*-category3First introduced in P. Ghez-R. Lima-J. Roberts [10] and further developed in P. Mitchener [16]. is a $*$-category ${\mathscr{C}}$ such that: the sets ${\mathscr{C}}_{AB}:=\operatorname{Hom}_{\mathscr{C}}(B,A)$ are complex Banach spaces; the compositions are bilinear maps such that $\|xy\|\leq\|x\|\cdot\|y\|$, for all $x\in{\mathscr{C}}_{AB}$, $y\in{\mathscr{C}}_{BC}$; the involutions are conjugate linear maps such that $\|x^{*}x\|=\|x\|^{2}$, $\forall x\in{\mathscr{C}}_{BA}$ and such that $x^{*}x$ is a positive element in the C*-algebra ${\mathscr{C}}_{AA}$, for every $x\in{\mathscr{C}}_{BA}$ (i.e. $x^{*}x=y^{*}y$ for some $y\in{\mathscr{C}}_{AA}$). A C*-category is commutative is for all $A\in\operatorname{Ob}_{\mathscr{C}}$, the C*-algebras ${\mathscr{C}}_{AA}$ are commutative.
Definition 3.12. Given two categorical bundles enriched in a monoidal category $({\mathscr{E}}_{j},\pi_{j},{\mathscr{X}}_{j})$, for $j=1,2$, a morphism between them is a pair $(f,\mathcal{F}):({\mathscr{E}}_{1},\pi_{1},{\mathscr{X}}_{1})\to({\mathscr{E}}% _{2},\pi_{2},{\mathscr{X}}_{2})$ such that $f:{\mathscr{X}}_{1}\to{\mathscr{X}}_{2}$ is a functor and ${\mathscr{F}}:(f^{\bullet}({\mathscr{E}}_{2}),\pi_{2}^{f},{\mathscr{X}}_{1})% \to({\mathscr{E}}_{1},\pi_{1},{\mathscr{X}}_{1})$ is a morphisms of enriched categorical bundles, over the category ${\mathscr{X}}_{1}$ as specified in definition 3.11.
Definition 2.8. A (compact Hausdorff) topological spaceoid for a commutative full C*-category (or simply a spaceoid, for short) $({\mathscr{E}},\pi,{\mathscr{X}})$ is a unital rank-one Fell bundle over the product involutive topological category ${\mathscr{X}}:=\Delta_{X}\times{\mathscr{G}}_{\mathscr{O}}$ where $\Delta_{X}:=\{(p,p)\ |\ p\in X\}$ is the minimal equivalence relation of a compact Hausdorff space $X$ and ${\mathscr{G}}_{\mathscr{O}}:={\mathscr{O}}\times{\mathscr{O}}$ is a the total equivalence relation on a discrete space ${\mathscr{O}}$. A morphism of spaceoids $({\mathscr{E}}_{j},\pi_{j},{\mathscr{X}}_{j})$, for $j=1,2$, is given by a pair $(f,\mathcal{F})$, where $f=(f_{\Delta},f_{\mathscr{G}})$ with $f_{\Delta}:\Delta_{X_{1}}\to\Delta_{X_{2}}$ continuous map between compact Hausdorff spaces, $f_{\mathscr{G}}:{\mathscr{G}}_{1}\to{\mathscr{G}}_{2}$ isomorphism of groupoids and where $\mathcal{F}:f^{\bullet}({\mathscr{E}}_{2})\to{\mathscr{E}}_{1}$ is continuous $*$-functor that is also a fiberwise linear bundle map over ${\mathscr{X}}_{1}$.7Recall that with the same notation used in [5, Section 3], $f^{\bullet}({\mathscr{E}}_{2})$ denotes the total space of the standard pull-back $(f^{\bullet}({\mathscr{E}}_{2}),\pi^{f},{\mathscr{X}}_{1})$ of the Fell bundle ${\mathscr{E}}_{2}$ under the map $f:{\mathscr{X}}_{1}\to{\mathscr{X}}_{2}$ and that $f^{\pi_{2}}:f^{\bullet}({\mathscr{E}}_{2})\to{\mathscr{E}}_{2}$ is the unique bundle morphism such that $f\circ\pi_{2}^{f}=\pi_{2}\circ f^{\pi_{2}}$.
Definition 3.9. A $*$-categorical bundle over an inverse $*$-category ${\mathscr{X}}$ enriched in a concrete (weak-)monoidal $*$-category $\scr{M}^{*}$ whose objects are equipped with a Banach norm is called a Fell bundle enriched in the (weak-)monoidal $*$-category $\scr{M}^{*}$ if it satisfies the following version of the C*-property $\|\mu_{x^{*},x}(\nu_{x}(e),e)\|=\|e\|^{2}$, for all $e\in{\mathscr{E}}_{x}$ and, for all $e\in{\mathscr{E}}_{x}$, there exists $h\in{\mathscr{E}}_{x^{*}x}$ such that $\mu_{x^{*},x}(\nu_{x}(e),e)=\mu_{x^{*}x,x^{*}x}(\nu_{x^{*}x}(h),h)$.
Definition 3.1. A monoidal category is a category $\scr{M}$ equipped with a covariant bifunctor $\otimes:\scr{M}\times\scr{M}$ and an identity object $I\in\operatorname{Ob}{M}$ such that for all objects $A,B,C\in\operatorname{Ob}{M}$ there are natural isomorphisms $\displaystyle(A\otimes B)\otimes C\xrightarrow{\alpha_{A,B,C}}A\otimes(B% \otimes C),$ $\displaystyle A\otimes I\xrightarrow{\rho_{A}}A,\quad I\otimes B\xrightarrow{% \lambda_{B}}B$ making any diagram with objects in $\scr{M}$ and whose morphisms are obtained by (eventually repeated) applications of the functor $\otimes$ to instances of $\alpha$, $\lambda$, $\rho$, $\iota$ and their inverses commutative.
Definition 3.13. A morphism $\mathcal{F}:({\mathscr{E}}^{1},\pi^{1},{\mathscr{X}})\to({\mathscr{E}}^{2},\pi% ^{2},{\mathscr{X}})$ of $*$-categorical bundles, on the same $*$-category ${\mathscr{X}}$, enriched in the same (weak-)monoidal $*$-category $\scr{M}^{*}$, is a morphism of categorical bundles over ${\mathscr{X}}$ such that the following further properties are satisfied: $\displaystyle\mathcal{F}_{x}\circ\beta_{{\mathscr{E}}^{1}_{x}}=\beta_{{% \mathscr{E}}^{2}_{x}}\circ(\mathcal{F}_{x}^{\dagger})^{\dagger},\quad\forall x% \in{\mathscr{X}},$ $\displaystyle(\mathcal{F}_{y}^{\dagger}\otimes\mathcal{F}_{x}^{\dagger})\circ% \gamma_{{\mathscr{E}}^{1}_{x},{\mathscr{E}}^{1}_{y}}=\gamma_{{\mathscr{E}}^{2}% _{x},{\mathscr{E}}^{2}_{y}}\circ(F_{x}\otimes\mathcal{F}_{y})^{\dagger},\quad% \forall x,y\in{\mathscr{X}},$ $\displaystyle\mathcal{F}_{x^{*}}\circ\nu_{x}=\nu_{x}\circ\mathcal{F}_{x}^{% \dagger},\quad\forall x\in{\mathscr{X}}.$ Again, since the total space of a $*$-categorical bundle enriched in a (weak-)monoidal $*$-category is naturally equipped with the structure of a $*$-category, every such morphism $\mathcal{F}$ becomes a $*$-functor.
Definition 2.1. A $*$-category (also called dagger category or involutive category)2The definition from M. Burgin [7], essentially implicit in [10], has been (re-)introduced and used by several authors, see e.g. J. Lambek [14], P. Mitchener [16], S. Abramski-B. Coecke [2], P. Selinger [18]. is a category ${\mathscr{C}}$ with contravariant functor $*:{\mathscr{C}}\to{\mathscr{C}}$ acting identically on the objects that is involutive i.e. $(x^{*})^{*}=x$ for all $x\in\operatorname{Hom}_{\mathscr{C}}$. A $*$-category is an inverse $*$-category if $xx^{*}x=x$ for all $x\in\operatorname{Hom}_{\mathscr{C}}$. Whenever $\operatorname{Hom}_{\mathscr{C}}$ is equipped with a topology, we require the compositions and involutions to be continuous.
Definition 3.5. Let $\scr{M}$ be a monoidal category. An $\scr{M}$-enriched categorical bundle over the base category ${\mathscr{X}}$ is a bundle8For now $\pi$ can be assumed to be just a surjective map. Continuity of $\pi$ will be required whenever ${\mathscr{E}}$ and ${\mathscr{X}}$ are topological spaces. Whenever the objects of the monoidal category $\scr{M}$ are Banach spaces (or more generally, disjoint union of Banach spaces), we require $({\mathscr{E}},\pi,{\mathscr{X}})$ to be a Banach bundle. In this last case, also the maps $\mu_{x,y}\circ\otimes:{\mathscr{E}}_{x}\times{\mathscr{E}}_{y}\to{\mathscr{E}}% _{x\circ y}$ are supposed to be bilinear such that $\|\mu_{x,y}(e,f)\|\leq\|e\|\cdot\|f\|$. $\pi:{\mathscr{E}}\to{\mathscr{X}}$ such that: • for all $x\in{\mathscr{X}}$, the fiber ${\mathscr{E}}_{x}:=\pi^{-1}(x)$ is an object of the monoidal category $\scr{M}$; • for all pairs $(x,y)\in{\mathscr{X}}^{2}$ of composable arrows in ${\mathscr{X}}$, there is an associated morphism $\mu_{x,y}\in\operatorname{Hom}{M}({\mathscr{E}}_{x}\otimes{\mathscr{E}}_{y},{% \mathscr{E}}_{x\circ y})$ that makes the following diagram commutative: $\xymatrix{{\mathscr{E}}_{x}\otimes({\mathscr{E}}_{y}\otimes{\mathscr{E}}_{z})% \ar[d]_{\iota_{{\mathscr{E}}_{x}}\otimes\mu_{y,z}}\ar[rr]^{\alpha_{{\mathscr{E% }}_{x},{\mathscr{E}}_{y},{\mathscr{E}}_{z}}}&&({\mathscr{E}}_{x}\otimes{% \mathscr{E}}_{y})\otimes{\mathscr{E}}_{z}\ar[d]^{\mu_{x,y}\otimes\iota_{{% \mathscr{E}}_{z}}}\\ {\mathscr{E}}_{x}\otimes{\mathscr{E}}_{y\circ z}\ar[dr]_{\mu_{x,y\circ z}}&&{% \mathscr{E}}_{x\circ y}\otimes{\mathscr{E}}_{z}\ar[dl]^{\mu_{x\circ y,z}}\\ &{\mathscr{E}}_{x\circ y\circ z}.}$ • for all identities $y\in{\mathscr{X}}^{o}$, there is a morphism $j_{y}\in\operatorname{Hom}{M}(I,{\mathscr{E}}_{y})$ that makes the following diagrams commutative: $\xymatrix{{\mathscr{E}}_{x}\otimes I\ar[dr]_{\rho_{{\mathscr{E}}_{x}}}\ar[rr]^% {\iota_{{\mathscr{E}}_{x}}\otimes j_{y}}&&{\mathscr{E}}_{x}\otimes{\mathscr{E}% }_{y},\ar[dl]^{\mu_{x,y}}\\ &{\mathscr{E}}_{x}&}\quad\xymatrix{I\otimes{\mathscr{E}}_{z}\ar[dr]_{\lambda_{% {\mathscr{E}}_{z}}}\ar[rr]^{j_{y}\otimes\iota_{{\mathscr{E}}_{z}}}&&{\mathscr{% E}}_{y}\otimes{\mathscr{E}}_{z}.\ar[dl]^{\mu_{y,z}}\\ &{\mathscr{E}}_{z}&}$
Definition 2.4. A Fell bundle5Fell bundles over topological groups were first introduced by J. Fell [9, Section II.16] and later generalized to the case of groupoids by S. Yamagami (see A. Kumjian [12] and references therein) and to the case of inverse semigroups by N. Sieben (see R. Exel [8, Section 2]). $({\mathscr{E}},\pi,{\mathscr{X}})$ over an inverse $*$-category ${\mathscr{X}}$ is a Banach bundle that is also a $*$-category ${\mathscr{E}}$ fibered over the $*$-category ${\mathscr{X}}$ with continuous fiberwise bilinear compositions and fiberwise conjugate-linear involutions such that $\|ef\|\leq\|e\|\cdot\|f\|$ for all composable $e,f\in{\mathscr{E}}$, $\|e^{*}e\|=\|e\|^{2}$ for all $e\in{\mathscr{E}}$ and $e^{*}e$ is a positive element in the C*-algebra ${\mathscr{E}}_{\pi(e^{*}e)}:=\{f\ |\ \pi(f)=\pi(e^{*}e)\}$. By a morphism of Fell bundles $({\mathscr{E}}_{j},\pi_{j},{\mathscr{X}}_{j})$, for $j=1,2$, we mean a pair $(\phi,\Phi)$ such that $\phi:{\mathscr{X}}_{1}\to{\mathscr{X}}_{2}$ is a $*$-isomorphism of $*$-categories and $\Phi:{\mathscr{E}}_{1}\to{\mathscr{E}}_{2}$ is a continuous fiberwise linear $*$-functor such that $\phi\circ\pi_{1}=\pi_{2}\circ\Phi$.
Definition 3.11. A morphism $\mathcal{F}:({\mathscr{E}}^{1},\pi^{1},{\mathscr{X}})\to({\mathscr{E}}^{2},\pi% ^{2},{\mathscr{X}})$ of categorical bundles, over the same category ${\mathscr{X}}$, enriched in the monoidal category $\scr{M}$, is a map $\mathcal{F}:{\mathscr{E}}^{1}\to{\mathscr{E}}^{2}$ satisfying $\pi^{2}\circ\mathcal{F}=\pi^{1}$ such that for all $x\in{\mathscr{X}}$, $\mathcal{F}_{x}:{\mathscr{E}}^{1}_{x}\to{\mathscr{E}}^{2}_{x}$ is a morphism in $\scr{M}$ with the properties $\displaystyle\mathcal{F}_{x}\otimes(\mathcal{F}_{y}\otimes\mathcal{F}_{z})% \circ\alpha_{{\mathscr{E}}^{1}_{x},{\mathscr{E}}^{1}_{y},{\mathscr{E}}^{1}_{z}% }=\alpha_{{\mathscr{E}}^{2}_{x},{\mathscr{E}}^{2}_{y},{\mathscr{E}}^{2}_{z}}% \circ(\mathcal{F}_{x}\otimes\mathcal{F}_{y})\otimes\mathcal{F}_{z},\quad% \forall(x,y,z)\in{\mathscr{X}}^{(3)},$ $\displaystyle\mathcal{F}_{x}\circ\rho_{{\mathscr{E}}^{1}_{x}}=\rho_{{\mathscr{% E}}^{2}_{x}}\circ(\mathcal{F}_{x}\otimes\iota_{I}),\quad\mathcal{F}_{x}\circ% \lambda_{{\mathscr{E}}^{1}_{x}}=\lambda_{{\mathscr{E}}^{2}_{x}}\circ(\iota_{I}% \otimes\mathcal{F}_{x}),\quad\forall x\in{\mathscr{X}},$ $\displaystyle\mathcal{F}_{x\circ y}\circ\mu^{1}_{x,y}=\mu^{2}_{x,y}\circ(% \mathcal{F}_{x}\otimes\mathcal{F}_{y}),\quad\forall(x,y)\in{\mathscr{X}}^{(2)},$ $\displaystyle j^{2}_{y}\circ\iota_{I}=\mathcal{F}_{y}\circ j^{1}_{y},\quad% \text{for all the identities $y$ in ${\mathscr{X}}^{o}$}.$ Whenever ${\mathscr{E}}^{1},{\mathscr{E}}^{2}$ are topological spaces, we require $\mathcal{F}$ to be a continuous map and whenever the object of the monoidal category $\scr{M}$ are (disjoint union of) Banach spaces, we require $\mathcal{F}$ to be fiberwise linear. Note again that for a categorical bundle $({\mathscr{E}},\pi,{\mathscr{X}})$ enriched in the monoidal category $\scr{M}$, the total space ${\mathscr{E}}$ can be equipped with the structure of a category and a morphism $\mathcal{F}$ as defined above becomes immediately a functor.
Definition 6.6. We shall say that a presentable quasicategory $\mathcal{C}$ is reduced if the inclusion $\tau_{\leq 0}\mathcal{C}\hookrightarrow\mathcal{C}$ strongly generates $\mathcal{C}$.
Definition 8.7. For any nonnegative integer $n$, an $n$-categorical pair $(\mathcal{C},F)$ consists of a reduced quasicategory $\mathcal{C}$ (Df. 6.6), along with an equivalence $F\colon\tau_{\leq 0}\mathcal{C}\to\operatorname{Gaunt}_{n}$. When such an equivalence $F$ exists, we shall say that the reduced quasicategory $\mathcal{C}$ admits an $n$-categorical pair structure.
Definition 2.1. A small strict $0$-category is a set. Proceeding recursively, for any positive integer $n$, a small strict $n$-category is a small category enriched in small $(n-1)$-categories. We denote by $\operatorname{Cat}_{n}$ the category of small strict $n$-categories.
