Definition 4.3.1. [14] A category $\mathcal{D}$ is an exactly definable additive category if it is equivalent to the category $\mathrm{Ex}[\mathcal{B},\mathrm{Ab}]$ of exact functors on a small abelian category $\mathcal{B}$.
Definition 2.3.4. We say that a morphism $f:K\to L$ in a locally finitely presentable category $\mathcal{K}$ is $(\omega,\lambda)$-pure if, given morphisms $g:A\to B,\ u:A\to K,\ v:B\to L$ such that $fu=vg$ where $A$ is finitely presentable and $B$ is $\lambda$-presentable, there exists $t:B\to K$ such that $tg=u$.
Definition 5.3.3. [5] A regular theory is a theory consisting only of the sentences of the form $\forall\overline{x}(\psi(\overline{x})\rightarrow\phi(\overline{x}))$ where $\phi$ and $\psi$ are regular formulas in the infinitary logic $L_{\infty}$ (i.e., formulas constructed only using truth, conjunctions and existential quantifiers of appropriate arities).
Definitions 5.1.1. [11, Remark D3.3.10] An object $A$ of a topos $\mathcal{E}$ is called supercompact if every jointly epimorphic family $(f_{i}:B_{i}\to A)_{i\in I}$ contains at least one epimorphism $f_{i}:B_{i}\to A$. An object $C$ of a topos $\mathcal{E}$ is called regular if it is supercompact and for any pullback $P\simeq B\times_{C}B^{\prime}$ with $B$ and $B^{\prime}$ supercompact, the object $P$ is supercompact as well.
Definition 3.1.1. In a lex category $\mathcal{C}$ an (internal) equivalence relation on an object $X$ is a subobject $(p_{1},p_{2}):R\rightarrowtail X\times X$ equipped with the following morphisms: • (reflexivity) $r:X\to R$ such that $p_{1}\circ r=p_{2}\circ r=\mathrm{id}_{X}$. • (symmetry) $s:R\to R$ such that $p_{1}\circ s=p_{2}$ and $p_{2}\circ s=p_{1}$. • (transitivity) $t:R\times_{X}R\to R$ with projection maps $q_{1},q_{2}:R\times_{X}R\to R$ such that $p_{1}\circ q_{1}=p_{1}\circ t$ and $p_{2}\circ q_{2}=p_{2}\circ t$.
Definition 4.1.1. The free abelian completion of a small preadditive category $\mathcal{A}$ is a small abelian category $Ab(\mathcal{A})$ together with an additive functor $h:\mathcal{A}\to Ab(\mathcal{A})$ such that $h$ has the following universal property: for any abelian category $\mathcal{B}$, there is an equivalence of categories $-\circ h:\mathrm{Ex}[Ab(\mathcal{A}),\mathcal{B}]\to[\mathcal{A},\mathcal{B}]$.
Definition 5.1. For any simplicial set $S$ we define a category $\mathfrak{C}_{\square_{c}}(S)$ enriched over cubical sets with connections. Define the objects of $\mathfrak{C}_{\square_{c}}(S)$ to be the vertices of $S$, i.e. the elements of $S_{0}$. For any $x,y\in S_{0}$ define $\displaystyle\mathfrak{C}_{\square_{c}}(S)(x,y):=\underset{T\to S\in(Nec% \downarrow S)_{x,y}}{\text{colim}}C_{\square_{c}}(T)$ where $(Nec\downarrow S)_{x,y}$ is the category whose objects are morphisms $f:T\to S$ for some $T\in Nec$ such that $f(\alpha_{T})=x$ and $f(\omega_{T})=y$. For any $x,y,z\in S_{0}$ the composition law $\displaystyle\mathfrak{C}_{\square_{c}}(S)(y,z)\otimes\mathfrak{C}_{\square_{c% }}(S)(x,y)\to\mathfrak{C}_{\square_{c}}(S)(x,z)$ is induced as follows. Note that given $T\to S\in(Nec\downarrow S)_{x,y}$ and $U\to S\in(Nec\downarrow S)_{y,z}$, we obtain $T\vee U\to S\in(Nec\downarrow S)_{x,z}$. Then the composition $\displaystyle C_{\square_{c}}(U)\otimes C_{\square_{c}}(T)\to C_{\square_{c}}(% (T\vee U)(\alpha_{U},\omega_{U}))\otimes C_{\square_{c}}((T\vee U)(\alpha_{T},% \omega_{T}))\to C_{\square_{c}}(T\vee U)$ of morphisms of cubical sets with connections induces the desired composition law after taking colimits. Recall that $(T\vee U)(\alpha_{U},\omega_{U})$ denotes the unique subnecklace of $T\vee U$ with joints $J_{T\vee U}(\alpha_{U},\omega_{U})$ and vertices $V_{T\vee U}(\alpha_{U},\omega_{U})$. It follows from Remark 4.3 that the above composition is well defined, it is, in fact, the map $\square_{c}^{N}\otimes\square_{c}^{N^{\prime}}\to\square_{c}^{N+N^{\prime}}$ of cubical sets with connections. Finally, it is clear that $\mathfrak{C}_{\square_{c}}(S)$ is functorial in $S$.
Definition 4.5. Define the functor $C_{\square_{c}}:Nec\to Set_{\square_{c}}$ to be the composition of functors $C_{\square_{c}}:=Y\circ P_{\mathbf{1}}$ where $Y:\square_{c}\to\text{Hom}_{Cat}((\square_{c})^{op},Set)=Set_{\square_{c}}$ is the Yoneda embedding.
Definition 14. A generalized typed lambda calculus is a pre-generalized typed lambda calculus on which there is an equality relation on the terms $\mathscr{S}_{\Lambda}$ of $\Lambda$ defined as follows: Let $\mathscr{P}$ be the finite power set $\mathscr{P}_{fi}(\mathscr{X})$ of $\mathscr{X}$. For each finite set $\bar{x}=\{x_{1},\dots,x_{n}\}$ in $\mathscr{P}$, let $\mathscr{R}(\Lambda,\bar{x}):=\{s\in\mathscr{S}_{\Lambda}\mid\operatorname{FV}% (s)\subset\bar{x}\}.$ We define the relation $=_{\bar{x}}$ on $\mathscr{R}(\Lambda,\bar{x})$ to be the smallest equivalence relation that satisfies (1) $=_{\bar{x}}$ is reflexive, symmetric, and transitive, (2) Substitutivity conditions: (a) if $s=_{\bar{x}}t$, and $\pi(s)$ $\downarrow$, then $\pi(s)=_{\bar{x}}\pi(t)$, and $\pi^{\prime}(s)=_{\bar{x}}\pi^{\prime}(t)$, (b) if $s=_{\bar{x}}t$, then $s\wr r=_{\bar{x}}t\wr r$ and $u\wr s=_{\bar{x}}u\wr t$ whenever these expressions are well-defined, (c) if $s=_{\bar{x}}t$, and $\langle s,r\rangle$ $\downarrow$, then $\langle s,r\rangle=_{\bar{x}}\langle t,r\rangle$, and similarly in the second argument, (d) if $s=_{\bar{x}}t$, then $s\wr r=_{\bar{x}}t\wr r$ and $u\wr s=_{\bar{x}}u\wr t$ whenever these expressions are well-defined, (3) for all $s:\top$, $s=_{\bar{x}}*$, (4) for all $a:A,b:B,$ $\pi(\langle a,b\rangle)=_{\bar{x}}a,$ $\pi^{\prime}(\langle a,b\rangle)=_{\bar{x}}b,$ (5) for all $c:A\wedge B$, $\langle\pi(c),\pi^{\prime}(c)\rangle=_{\bar{x}}c,$ (6) For all terms $s\in\mathscr{S}_{\Lambda}$, terms $a\in\mathscr{S}_{\Lambda}$, and variable $x$ that may appear in $\bar{x}$, (a) $(\lambda(x,s))\wr a=_{\bar{x}}s[x/a],$ (b) $\lambda(x,s\wr x)=_{\bar{x}}s$, (c) if $\operatorname{FV}(s)=\{x\}$, there exists a unique $A\in\mathscr{T}_{\Lambda}$ such that $s=_{\{x\}}\ulcorner A\urcorner\wr x$. (d) ($\alpha$-conversion for lambda terms) $\lambda(y,s)=_{\bar{x}}\lambda(y^{\prime},s[y/y^{\prime}])$ if $\operatorname{ty}(y)=\operatorname{ty}(y^{\prime})$ and $y^{\prime}\notin\operatorname{FV}(s)$. We observe that $\operatorname{FV}()$ is still well-defined. We denote by $s^{\natural}$ the type $A$ given by Axiom 6c. We impose the condition on the $=_{\bar{x}}$’s that: (1) if $\bar{x}\subset\bar{y}$ then for all $s,t\in\mathscr{R}(\Lambda,\bar{y})$, $s=_{\bar{x}}t$ implies $s=_{\bar{y}}t$. Because (1) $s=_{\operatorname{FV}s}s$, and (2) if $s=_{\bar{x}}t$ and $s=_{\bar{y}}t$, then there exists a finite set $\bar{z}$ such that $s=_{\bar{z}}t$ and $\bar{x},\bar{y}\subset\bar{z}$, we may define an equivalence relation equality in $\mathscr{S}_{\Lambda}$ on the set $\mathscr{S}_{\Lambda}$ of terms of $\Lambda$ by $s=t\,\,\,\text{ if }\,\,s=_{\bar{x}}t\text{ for some $\bar{x}$ in $\mathscr{P}% $}.$ A morphism $\Phi:\Lambda\to\text{M}$ of generalized typed lambda calculi, also called a translation, is a mapping $\Phi:\Lambda\to\text{M}$ that satisfies the following, where equalities between terms are interpreted as equality in $\mathscr{S}_{\Lambda}$: (1) for all $A\in\mathscr{T}_{\Lambda},s\in\mathscr{S}_{\Lambda}$, $\Phi(A)\in\mathscr{T}_{\text{M}}$ and $\Phi(s)\in\mathscr{S}_{\text{M}},$ (2) the restriction of $\Phi$ to $\mathscr{T}_{\Lambda}$ is a morphism of ideal categories that satisfies $\Phi(\top_{\Lambda})=\top_{\text{M}},$ $\Phi(A\wedge B)=\Phi(A)\wedge\Phi(B),$ (3) if $s=_{\bar{x}}t$, then $\Phi(s)=_{\Phi(\bar{x})}\Phi(t)$. (4) $\Phi(\operatorname{ty}(s))=\operatorname{ty}(\Phi(s)),$ (5) $\Phi(\ulcorner A\urcorner)=\ulcorner\Phi(A)\urcorner,$ (6) $\Phi(*)=*$, (7) for all $\alpha\in\Lambda$, $\Phi(\alpha^{\cdot})=\Phi(\alpha)^{\cdot},$ (8) $\Phi(\pi(c))=\pi(\Phi(c),$ and $\Phi(\pi^{\prime}(c))=\pi^{\prime}(\Phi(c)),$ (9) $\Phi(s\wr t)=\Phi(s)\wr\Phi(t),$ (10) $\Phi(\langle s,t\rangle)=\langle\Phi(s),\Phi(t)\rangle,$ (11) $\Phi(\lambda(x,s))=\lambda(\Phi(x),\Phi(s)).$ As a consequence of (3), $\Phi$ preserves equalities in $\Lambda$: $s=t\text{ implies }\Phi(s)=\Phi(t).$ This gives a category $\text{$\lambda$-}{\bf Calc}$ of generalized typed lambda calculi.
Definition 7. A generalized typed deductive system or simply a generalized deductive system is a structure $(\mathscr{A},s,t,\cdot,\vdash,\mathscr{V}),$ where $(\mathscr{A},s,t)$ is a generalized graph, ($\cdot$) is a partially-defined operation $\mathscr{A}\times\mathscr{A}\to\mathscr{A}$ on $\mathscr{A}$, $(\vdash)$ is an operation $\mathscr{A}\times\mathscr{A}\to\mathscr{A}$, and $\mathscr{V}$ is a subset of $\mathscr{A}$, satisfying (1) for all $a,b\in\mathscr{A}$, $b\cdot a\text{ is defined iff }ta=sb$ (2) $s(ab)=s(b)$ and $t(ab)=t(a)$ (3) $s(a\vdash b)=a$ and $t(a\vdash b)=b$. (4) for every $a\in\mathscr{A}$, $a\vdash a\in\mathscr{V}$. (5) if $a,b\in\mathscr{V}$, and $a\cdot b$ $\downarrow$, then $a\cdot b\in\mathscr{V}$. (6) for every $a,b\in\mathscr{A}$, if there exists $u\in\mathscr{V}$ with $\bar{u}=a$ and $\hat{u}=b$, then $a\vdash b\in\mathscr{V}$. A morphism of generalized typed deductive systems $\phi:\mathscr{A}\to\mathscr{B}$ is a morphism of generalized graphs satisfying (1) $\phi(a\cdot b)=\phi(a)\cdot\phi(b),$ (2) $\phi(a\vdash b)=\phi(a)\vdash\phi(b),$ (3) if $a\in\mathscr{V}$, then $\phi(a)\in\mathscr{V}$. This gives a category ${\bf DedSys}$ of generalized (typed) deductive systems.
Definition 11. Let $\mathscr{A}$ be a positive intuitionistic deductive system. Let $x$ be an indeterminate with target $\hat{x}$ in $\mathscr{A}$. We write $\mathscr{A}[x]$ for the positive intuitionistic deduction system freely generated on the set $\mathscr{A}\cup\{x\}$. This means that (1) Operations on $\mathscr{A}$ of Definition 8 are extended from $\mathscr{A}$ to $\mathscr{A}[x]$ by free generation on expressions $\phi$ containing any instance of $x$: $\phi::=f\,\mid\,x\,\mid\,\phi\vdash\phi\,\mid\,\phi\wedge\phi\,\mid\,\langle% \phi,\phi\rangle\,\mid\,\phi^{*}$ where $f$ can be any element of $\mathscr{A}$, and $x$ is any indeterminate. Expressions so generated that do not contain any instance of $x$ are thrown out, and the set of all elements of $\mathscr{A}$ is then added back in. (2) The valid elements of $\mathscr{A}[x]$ are $x$, those of $\mathscr{A}$, and those generated from $x$ and those of $\mathscr{A}$ using the validities of Definition 8. There is an obvious embedding of $\mathscr{A}$ in $\mathscr{A}[x]$, via which we will usually view $\mathscr{A}$ as a subset of $\mathscr{A}[x]$.
Definition 17. Let $\Lambda$ be a generalized typed lambda calculus. Define a mapping $\Lambda$ to $\mathbf{L}\mathbf{C}\Lambda$ by defining, in the pre-generalized typed lambda calculus $\Lambda_{0}$ obtained by ignoring equalities in $\mathscr{S}_{\Lambda}$, $\displaystyle\eta_{\Lambda}(A)$ $\displaystyle:=A_{\left({}^{\bullet}\,A\right)}$ $\displaystyle A\in\mathscr{T}_{\Lambda},$ $\displaystyle\eta_{\Lambda}(k)$ $\displaystyle:=\left({}^{x}\,k\right),$ $\displaystyle k\in\mathscr{S}_{\Lambda},\operatorname{FV}(k)=\text{{\O}},% \operatorname{ty}(x)=\top_{\mathbf{L}\mathbf{C}\Lambda},$ $\displaystyle\eta_{\Lambda}(\alpha^{\cdot})$ $\displaystyle:=(\eta_{\Lambda}(\alpha))^{\cdot},$ $\displaystyle\alpha\in\Lambda,$ $\displaystyle\eta_{\Lambda}(\pi(\phi))$ $\displaystyle:=\pi(\eta_{\Lambda}\phi),$ $\displaystyle\eta_{\Lambda}(\pi^{\prime}(\phi))$ $\displaystyle:=\pi^{\prime}(\eta_{\Lambda}\phi),$ $\displaystyle\eta_{\Lambda}(\langle\phi,\psi\rangle)$ $\displaystyle:=\langle\eta_{\Lambda}(\phi),\eta_{\Lambda}(\psi)\rangle$ $\displaystyle\eta_{\Lambda}(\phi\wr\psi)$ $\displaystyle:=\eta_{\Lambda}(\phi)\wr\eta_{\Lambda}(\psi)$ $\displaystyle\eta_{\Lambda}(\lambda(x,\phi))$ $\displaystyle:=\lambda(\eta_{\Lambda}(x),\eta_{\Lambda}(\phi))$ $\displaystyle x\in\mathscr{X}_{\Lambda}$ The map $\eta_{\Lambda}$ is well-defined upon passage to $\Lambda$, since analogous equalities between polynomials hold in both $\Lambda$ and $\mathbf{L}\mathbf{C}\Lambda$.
Definition 9. A ideal category or ideal generalized category is a structure $(\mathscr{C},\vdash,\mathscr{V})$ consisting of a generalized category $\mathscr{C}$ (section 2), a distinguished subset of elements $\mathscr{V}\subset\mathscr{C}$, a distinguished subset of elements $\mathscr{K}\subset\mathscr{C}$, and an operation $\vdash:\mathscr{C}\times\mathscr{C}\to\mathscr{C}$ such that (1) $\leavevmode\hbox{\set@color \leavevmode\hbox{\set@color$f\vdash g$}% \raisebox{7.999893pt}{$\leavevmode\hbox{\set@color\raisebox{0.0pt}{\resizebox{% 0.0pt}{0.0pt}{\leavevmode\hbox{\set@color$\mathchoice{\raisebox{0.0pt}{% \resizebox{0.0pt}{0.0pt}{\leavevmode\hbox{\set@color$\displaystyle\mathchoice{% \raisebox{-1.999969pt}{\resizebox{7.499886pt}{6.999893pt}{\leavevmode\hbox{% \set@color$\displaystyle\kern-0.6pt\bigwedge\kern-0.6pt$}}}}{\raisebox{-1.9999% 69pt}{\resizebox{7.499886pt}{6.999893pt}{\leavevmode\hbox{\set@color$% \textstyle\kern-0.6pt\bigwedge\kern-0.6pt$}}}}{\raisebox{-1.999969pt}{% \resizebox{7.499886pt}{6.999893pt}{\leavevmode\hbox{\set@color$\scriptstyle% \kern-0.6pt\bigwedge\kern-0.6pt$}}}}{\raisebox{-1.999969pt}{\resizebox{7.49988% 6pt}{6.999893pt}{\leavevmode\hbox{\set@color$\scriptscriptstyle\kern-0.6pt% \bigwedge\kern-0.6pt$}}}}$}}}}{\raisebox{0.0pt}{\resizebox{0.0pt}{0.0pt}{% \leavevmode\hbox{\set@color$\textstyle\mathchoice{\raisebox{-1.999969pt}{% \resizebox{7.499886pt}{6.999893pt}{\leavevmode\hbox{\set@color$\displaystyle% \kern-0.6pt\bigwedge\kern-0.6pt$}}}}{\raisebox{-1.999969pt}{\resizebox{7.49988% 6pt}{6.999893pt}{\leavevmode\hbox{\set@color$\textstyle\kern-0.6pt\bigwedge% \kern-0.6pt$}}}}{\raisebox{-1.999969pt}{\resizebox{7.499886pt}{6.999893pt}{% \leavevmode\hbox{\set@color$\scriptstyle\kern-0.6pt\bigwedge\kern-0.6pt$}}}}{% \raisebox{-1.999969pt}{\resizebox{7.499886pt}{6.999893pt}{\leavevmode\hbox{% \set@color$\scriptscriptstyle\kern-0.6pt\bigwedge\kern-0.6pt$}}}}$}}}}{% \raisebox{0.0pt}{\resizebox{0.0pt}{0.0pt}{\leavevmode\hbox{\set@color$% \scriptstyle\mathchoice{\raisebox{-1.399979pt}{\resizebox{5.24992pt}{4.899925% pt}{\leavevmode\hbox{\set@color$\displaystyle\kern-0.6pt\bigwedge\kern-0.6pt$}% }}}{\raisebox{-1.399979pt}{\resizebox{5.24992pt}{4.899925pt}{\leavevmode\hbox{% \set@color$\textstyle\kern-0.6pt\bigwedge\kern-0.6pt$}}}}{\raisebox{-1.399979% pt}{\resizebox{5.24992pt}{4.899925pt}{\leavevmode\hbox{\set@color$\scriptstyle% \kern-0.6pt\bigwedge\kern-0.6pt$}}}}{\raisebox{-1.399979pt}{\resizebox{5.24992% pt}{4.899925pt}{\leavevmode\hbox{\set@color$\scriptscriptstyle\kern-0.6pt% \bigwedge\kern-0.6pt$}}}}$}}}}{\raisebox{0.0pt}{\resizebox{0.0pt}{0.0pt}{% \leavevmode\hbox{\set@color$\scriptscriptstyle\mathchoice{\raisebox{-0.999985% pt}{\resizebox{3.749943pt}{3.499947pt}{\leavevmode\hbox{\set@color$% \displaystyle\kern-0.6pt\bigwedge\kern-0.6pt$}}}}{\raisebox{-0.999985pt}{% \resizebox{3.749943pt}{3.499947pt}{\leavevmode\hbox{\set@color$\textstyle\kern% -0.6pt\bigwedge\kern-0.6pt$}}}}{\raisebox{-0.999985pt}{\resizebox{3.749943pt}{% 3.499947pt}{\leavevmode\hbox{\set@color$\scriptstyle\kern-0.6pt\bigwedge\kern-% 0.6pt$}}}}{\raisebox{-0.999985pt}{\resizebox{3.749943pt}{3.499947pt}{% \leavevmode\hbox{\set@color$\scriptscriptstyle\kern-0.6pt\bigwedge\kern-0.6pt$% }}}}$}}}}$}}}}$} }=f,$ (2) $\overline{f\vdash g}=g.$ (3) $f\cdot(\bar{f}\vdash g)=\hat{f}\vdash g,$ unless $\bar{f}=g$, in which case $f\cdot(\bar{f}\vdash g)=f$, or unless $f\in\mathscr{K}$ or $\bar{f}\vdash g\in\mathscr{K}$. (4) $(f\vdash\hat{g})\cdot g=f\vdash\bar{g},$ unless $f=\hat{g}$, in which case $(f\vdash\hat{g})\cdot g=g$, (5) if $g\cdot f$ $\downarrow$, and $g,f\in\mathscr{V}$, then $g\cdot f\in\mathscr{V}$, (6) $f\vdash f\in\mathscr{V}$ for all $f\in\mathscr{C}$, (7) (witnesses) $u\in\mathscr{V}$ implies $\hat{u}\vdash\bar{u}\in\mathscr{V}$. (8) $\vdash$ is substitutive (Section 3.1) in both arguments. A functor $F:\mathscr{C}\to\mathscr{D}$ between generalized ideal categories is an ordinary functor (section 2) which preserves validity and $\vdash$: (1) $f\in\mathscr{V}_{\mathscr{C}}\text{ implies }F(f)\in\mathscr{V}_{\mathscr{D}},$ (2) $F(f\vdash g)=F(f)\vdash F(g)$. This defines a category ${\bf IdealCat}$.
Definition 4. Let $\mathscr{C}$ and $\mathscr{D}$ be generalized categories. An adjunction $(F,G,\eta,\epsilon)$ is a pair of functors together with natural transformations $\eta:\text{id}_{\mathscr{C}}\to G\circ F,\quad\epsilon:F\circ G\to\text{id}_{% \mathscr{D}},$ satisfying the identities $\displaystyle(G\circ\epsilon)\mathbin{\raisebox{0.86pt}{$\scriptscriptstyle{% \Delta}$}}(\eta\circ G)$ $\displaystyle=1_{G},$ $\displaystyle(\epsilon\circ F)\mathbin{\raisebox{0.86pt}{$\scriptscriptstyle{% \Delta}$}}(F\circ\eta)$ $\displaystyle=1_{F},$ where $1_{F}$ is the mapping $f\mapsto 1_{F(f)}$.
Definition 19. An ideal elementary topos is an ideal cartesian closed category with (1) all finite limits and colimits, (2) a subobject classifier.
Definition 2. Let $\mathscr{C},\mathscr{D}$ be generalized categories. A functor from $\mathscr{C}$ to $\mathscr{D}$ is a structure-preserving map, that is, a mapping $F:\mathscr{C}\to\mathscr{D}$ satisfying: (1) $\rule{0.0pt}{12.04pt}F(gf)=F(g)F(f)$ (2) $\rule{0.0pt}{12.04pt}F(\bar{f})=\overline{F(f)}$ (3) $\rule{0.0pt}{12.04pt}F(\hat{f})=\widehat{F(f)}$
Definition 16. Let $\mathscr{C}$ be an ideal cartesian closed category. We define the symbol $\mathbf{L}\mathscr{C}$ as follows: (1) The set of types of $\mathbf{L}\mathscr{C}$ is the set of symbols $A_{f}$ indexed by elements $f\in\mathscr{C}$: $\mathscr{T}_{\mathbf{L}\mathscr{C}}:=\{A_{f}\mid f\in\mathscr{C}\},$ in fact we set $A_{f}=f$ and take $\mathscr{C}$ itself as the set of types (this is needed for the proof of Theorem 5.4), however, we use the notation $A_{f}$ at times when it seems to lessen the potential for confusion. (2) The set of terms of $\mathbf{L}\mathscr{C}$ is the set of polynomials $\phi$ over $\mathscr{C}$ sourced at $\top$, that is, $\mathscr{S}_{\mathbf{L}\mathscr{C}}:=\{\phi\mid\phi\in\mathscr{C}[\vec{x}]% \text{ for some $\vec{x}$, }\hat{\phi}\text{ is in $\mathscr{C}$, and }\bar{% \phi}=\top\},$ where we assume that indeterminates have internal structure given by the syntax $()^{\cdot}$. (3) Define $\displaystyle\operatorname{ty}(\phi)$ $\displaystyle:=A_{\hat{\phi}},$ $\displaystyle s(A_{f})$ $\displaystyle:=A_{sf},$ $\displaystyle t(A_{f})$ $\displaystyle:=A_{tf},$ $\displaystyle A_{f}\cdot A_{g}$ $\displaystyle:=A_{f\cdot g},$ $\displaystyle A_{f}\wedge A_{g}$ $\displaystyle:=A_{f\wedge g},$ $\displaystyle A_{f}\vdash A_{g}$ $\displaystyle:=A_{f\vdash g},$ $\displaystyle\ulcorner A_{f}\urcorner$ $\displaystyle:=\ulcorner f\urcorner,\quad\text{ the name of $f$,}$ $\displaystyle\top_{\mathbf{L}\mathscr{C}}$ $\displaystyle:=\top_{\mathscr{C}}\vdash\top_{\mathscr{C}},$ $\displaystyle:=\top_{\mathscr{C}},$ $\displaystyle\mathscr{K}_{\mathbf{L}\mathscr{C}}$ is the set of constant polynomials. (4) if $\phi$ is a bulletin in $x$ over $\mathscr{C}$, then let $\phi^{\natural}:=A_{\epsilon_{x}\phi}.$ (5) $\mathscr{V}_{\mathbf{L}\mathscr{C}}$ is the set $\{A_{f}\mid f\in\mathscr{V}_{\mathscr{C}}\}$ joined with the set of valid constant terms, joined with the set of polynomials valid according to Definition 11. (6) Define $\displaystyle\top_{\mathbf{L}\mathscr{C}}$ $\displaystyle:=\top\vdash\top,$ ${}_{\mathbf{L}\mathscr{C}}$ $\displaystyle:=\top,$ Then we have a pre-generalized typed lambda calculus. We make from this a generalized typed lambda calculus by imposing the equality relation on terms inherited from equality in $\mathscr{C}(\vec{x})$: the equality relation $=_{\vec{x}}$ is defined to be equality in $\mathscr{C}(\vec{x})$, along with the usual inclusions of polynomial systems in one another.
Definition 10. An ideal cartesian closed category is a ideal category with identities $\mathscr{C}$ that is equipped with a structure $(\top,\wedge,\langle,\rangle,()^{*})$ where (1) $\top$ is a distinguished valid element in $\mathscr{C}$, (2) $\wedge$ is an operation $\mathscr{C}\times\mathscr{C}\to\mathscr{C}$, (3) $\langle,\rangle$ is a partially defined operation $\mathscr{C}\times\mathscr{C}\to\mathscr{C}$ (4) $()^{*}$ is a partially defined operation $\mathscr{C}\to\mathscr{C}$ which satisfies the conditions: (1) $\top\in\mathscr{K}$, and $\mathscr{K}$ is closed under $\wedge,\langle,\rangle,$ and $()^{*}$, (2) the structure $(s,t,\mathscr{V},\vdash,\cdot,\top,\wedge,\langle,\rangle,()^{*})$ defines a positive intuitionistic deductive system on $\mathscr{C}$. (3) for all $a\in\mathscr{C}$, if $f:a\to\top$ then $f=(a\vdash\top)$. (4) For every pair $(a,b)$ of subjects of $\mathscr{C}$, there exists a good pair $(\pi,\pi^{\prime})$ for $(a,b)$. (5) For every good pair $(\pi,\pi^{\prime})$ for any pair of subjects $(a,b)$, there is a good evaluation $\epsilon=\epsilon_{\pi,\pi^{\prime}}$ for $(\pi,\pi^{\prime})$. Here, if $(a,b)$ is a pair of subjects of $\mathscr{C}$, then a pair $(\pi,\pi^{\prime})$ of elements of $\mathscr{C}$ are a good pair for $(a,b)$ if (1) $\pi$ and $\pi^{\prime}$ are valid, (2) $\pi:a\wedge b\to a$, and $\pi^{\prime}:a\wedge b\to b$, (3) if $\pi\langle f,g\rangle$ $\downarrow$ then $\pi\langle f,g\rangle=f,$ (4) if $\pi^{\prime}\langle f,g\rangle$ $\downarrow$ then $\pi^{\prime}\langle f,g\rangle=g,$ (5) if $\langle\pi f,\pi^{\prime}f\rangle$ $\downarrow$ then $\langle\pi f,\pi^{\prime}f\rangle=f$, (6) if $f\cdot\pi$ and $g\cdot\pi^{\prime}$ $\downarrow$, then $\langle f\cdot\pi,g\cdot\pi^{\prime}\rangle=f\wedge g$. and a good evaluation for a good pair $(\pi,\pi^{\prime})$ for a pair of subjects $(a,b)$ is an element $\epsilon=\epsilon_{\pi,\pi^{\prime}}$ of $\mathscr{C}$ that satisfies, for every $c\in\mathscr{C}$ and every good pair $(\pi_{c,a},\pi^{\prime}_{c,a})$ for $(c,a)$, (1) $\epsilon$ is valid, (2) $\epsilon:(a\vdash b)\wedge a\to b$, (3) if $\epsilon\cdot\langle f^{*}\cdot\pi_{c,a},\pi^{\prime}_{c,a}\rangle$ $\downarrow$ then $\epsilon\cdot\langle f^{*}\cdot\pi_{c,a},\pi^{\prime}_{c,a}\rangle=f,$ (4) if $(\epsilon\cdot\langle f\cdot\pi_{c,a},\pi^{\prime}_{c,a}\rangle)^{*}$ $\downarrow$ then $(\epsilon\cdot\langle f\cdot\pi_{c,a},\pi^{\prime}_{c,a}\rangle)^{*}=f$. A morphism $F:\mathscr{C}\to\mathscr{D}$ between ideal cartesian closed categories $\mathscr{C}$ and $\mathscr{D}$ is a functor of ideal categories satisfying (1) $F(\top)=\top$, (2) $F(a\wedge b)=F(a)\wedge F(b),$ (3) $F(\langle a,b\rangle)=\langle F(a),F(b)\rangle,$ (4) $F$ sends a good pair in $\mathscr{C}$ to a good pair in $\mathscr{D}$. Thus we have a category ${\bf ICCC}$ of ideal cartesian closed categories.
Definition 13. A pre-generalized typed lambda calculus is a structure $(\Lambda,\mathscr{T}_{\Lambda},\mathscr{S}_{\Lambda},s,t,\cdot,\vdash,\top,% \wedge,\operatorname{ty},\ulcorner\urcorner,*,()^{\cdot},\pi,\pi^{\prime},\wr,% \langle,\rangle,\lambda,\mathscr{V}_{\Lambda})$ where (1) $\Lambda$ is a set, (2) $\mathscr{T}_{\Lambda}$ and $\mathscr{S}_{\Lambda}$ are disjoint subsets of $\Lambda$ and $\mathscr{T}_{\Lambda}\cup\mathscr{S}_{\Lambda}=\Lambda$, (3) $\mathscr{V}_{\Lambda}$ is a subset of $\Lambda$, (4) the system $(\mathscr{T}_{\Lambda},s,t,\cdot,\vdash,\mathscr{V}^{\prime})$ is an ideal category, where $\mathscr{V}^{\prime}=\mathscr{V}_{\Lambda}\cap\mathscr{T}_{\Lambda}$, (5) $\top$ is a designated element of $\mathscr{T}_{\Lambda}$, (6) $\wedge$ is a mapping $\mathscr{T}_{\Lambda}\times\mathscr{T}_{\Lambda}\to\mathscr{T}_{\Lambda}$, (7) $\ulcorner\urcorner$ is a mapping $\mathscr{T}_{\Lambda}\to\mathscr{S}_{\Lambda}$, (8) $\operatorname{ty}$ is a mapping $\mathscr{S}_{\Lambda}\to\mathscr{T}_{\Lambda}$, (9) and in $\mathscr{S}_{\Lambda}$: (a) $*$ is a designated element of $\mathscr{S}_{\Lambda}$, (b) $()^{\cdot}$ is a mapping $\Lambda\to\mathscr{S}_{\Lambda}$, (c) $\pi$, $\pi^{\prime}$ are partially defined mappings $\mathscr{S}_{\Lambda}\to\mathscr{S}_{\Lambda}$, (d) $\wr$ and $\langle,\rangle$ are partially defined mappings $\mathscr{S}_{\Lambda}\times\mathscr{S}_{\Lambda}\to\mathscr{S}_{\Lambda}$, (e) $\lambda$ is a mapping $\mathscr{X}\times\mathscr{S}\to\mathscr{S}$, where $\mathscr{X}$ is defined below, subject to the conditions (1) $\hat{\top}=\bar{\top}=\top,$ (2) for all $s\in\mathscr{S}_{\Lambda}$, $\pi(s)$ $\downarrow$ iff $\pi^{\prime}(s)$ $\downarrow$ iff there exist $A,B\in\mathscr{T}_{\Lambda}$ such that $\operatorname{ty}(s)=A\wedge B$, (3) $s\wr t$ $\downarrow$ iff there exist $A,B\in\mathscr{T}_{\Lambda}$ such that $\operatorname{ty}(s)=A\vdash B$ and $\operatorname{ty}(t)=A$, (4) $\langle s,t\rangle$ $\downarrow$ iff $\operatorname{ty}(s)=\operatorname{ty}(t)$, typing conditions (1) $\operatorname{ty}(\ulcorner A\urcorner)=\bar{A}\vdash\hat{A}$, (2) $\operatorname{ty}(*)=\top$, (3) for all $\alpha\in\Lambda$, $\operatorname{ty}(\alpha^{\cdot})=\operatorname{ty}(\alpha),$ (4) if $s\in\mathscr{S}_{\Lambda}$ and $\operatorname{ty}(s)=A\wedge B$, then $\operatorname{ty}(\pi(s))=A$ and $\operatorname{ty}(\pi^{\prime}(s))=B$, (5) if $s\wr t$ $\downarrow$, then $\operatorname{ty}(s\wr t)=\widehat{\operatorname{ty}(s)}$, (6) if $\langle s,t\rangle$ $\downarrow$, then $\operatorname{ty}(\langle s,t\rangle)=\operatorname{ty}(s)\wedge\operatorname{% ty}(t)$, (7) if $\lambda(x,s)$ $\downarrow$, then $\operatorname{ty}(\lambda(x,s))=\operatorname{ty}(x)\vdash\operatorname{ty}(s)$, and the validities (1) $*\in\mathscr{V}_{\Lambda}$, (2) if $A,B\in\mathscr{V}_{\Lambda}$, then $A\wedge B\in\mathscr{V}_{\Lambda}$, (3) (witnesses, propositions-as-types) if $s\in\mathscr{V}_{\Lambda}$, then $\operatorname{ty}(s)\in\mathscr{V}_{\Lambda}$, (4) If $A\in\mathscr{V}_{\Lambda}$, then $\ulcorner A\urcorner\in\mathscr{V}_{\Lambda}$. (5) $*\in\mathscr{V}_{\Lambda}$, (6) if $c\in\mathscr{V}_{\Lambda}$ and $\pi(c),\pi^{\prime}(c)$ $\downarrow$, then $\pi(c),\pi^{\prime}(c)\in\mathscr{V}_{\Lambda}$, (7) if $a,f\in\mathscr{V}$, then $f\wr a\in\mathscr{V}$, (8) $a,b\in\mathscr{V}_{\Lambda}$ implies $\langle a,b\rangle\in\mathscr{V}_{\Lambda}$, (9) if $s\in\mathscr{V}_{\Lambda}$, then $\lambda(x,s)\in\mathscr{V}_{\Lambda}$.
Definition 6. A generalized graph is a triple $(\mathscr{A},s,t)$, where $\mathscr{A}$ is a set, $s,t$ are maps $\mathscr{A}\to\mathscr{A}$. A morphism $\Phi:\mathscr{A}\to\mathscr{B}$ of generalized graphs is a mapping $\Phi$ from $\mathscr{A}$ to $\mathscr{B}$ such that (1) $\Phi(s(a))=s(\Phi(a))$ (2) $\Phi(t(a))=t(\Phi(a))$ This gives a category $\bf{Graph}$ of generalized graphs.
Definition 3. Let $\mathscr{C}$ and $\mathscr{D}$ be generalized categories, and let $F,G:\mathscr{C}\to\mathscr{D}$ be functors. A natural transformation from $\mathscr{C}$ to $\mathscr{D}$ is a mapping $\theta:\mathscr{C}\to\mathscr{D}$ such that for every $f,g\in\mathscr{C}$, $\theta(\hat{f})F(f)=G(f)\theta(\bar{f})\,\,\downarrow$
Definition 5. Let $\mathscr{C}$ be a generalized category. A monad on $\mathscr{C}$ is a structure $(T,\eta,\mu)$, where $T:\mathscr{C}\to\mathscr{C}$ is a functor, and $\eta$ and $\mu$ are (order-preserving) natural transformations $\text{id}_{\mathscr{C}}\to T$ and $T^{2}\to T$, respectively, such that the following hold: (1) $\mu\mathbin{\raisebox{0.86pt}{$\scriptscriptstyle{\Delta}$}}(T\circ\mu)=\mu% \mathbin{\raisebox{0.86pt}{$\scriptscriptstyle{\Delta}$}}(\mu\circ T)$ (2) $\mu\mathbin{\raisebox{0.86pt}{$\scriptscriptstyle{\Delta}$}}(T\circ\eta)=\mu% \mathbin{\raisebox{0.86pt}{$\scriptscriptstyle{\Delta}$}}(\eta\circ T)=1_{T}$, where $1_{T}$ denotes the mapping $f\mapsto 1_{T(f)}$. for all $x,y$ in $\mathscr{C}$,
Definition 1. A generalized category is a structure $(\mathscr{C},\sqsubseteq,\operatorname{{\bf s}},\operatorname{{\bf t}},\cdot)$ where $\mathscr{C}$ is a set, $\sqsubseteq$ is a relation on $\mathscr{C}$, $\operatorname{{\bf s}}$ and $\operatorname{{\bf t}}$ are mappings $\mathscr{C}\to\mathscr{C}$, and $(\cdot)$ is a partially defined mapping $\mathscr{C}\times\mathscr{C}\to\mathscr{C}$, denoted $a\cdot b$ or $ab$. These are required to satisfy (1) $(\mathscr{C},\sqsubseteq)$ is a partially ordered set, (2) $ab$ $\downarrow$ if and only if $\operatorname{{\bf s}}(a)\sqsubseteq\operatorname{{\bf t}}(b)$. (3) If $(ab)c$ $\downarrow$ or $a(bc)$ $\downarrow$ then $(ab)c=a(bc)$. (4) If $ab$ $\downarrow$ then $\operatorname{{\bf s}}(ab)=\operatorname{{\bf s}}(b)$ and $\operatorname{{\bf t}}(ab)=\operatorname{{\bf t}}(a)$. (5) (Element-Identity) For all $a\in\mathscr{C}$, there exists $b\in\mathscr{C}$ such that (a) $\operatorname{{\bf s}}(b)=\operatorname{{\bf t}}(b)=a$, (b) if $bc$ $\downarrow$ then $bc=c$, (c) if $cb$ $\downarrow$ then $cb=c$, (6) (Object-Identity) Let $a\in\mathscr{C}$ and $\operatorname{{\bf s}}(a)=\operatorname{{\bf t}}(a)=a$. Then (a) if $ba$ $\downarrow$ then $ba=b$. (b) If $ab$ $\downarrow$ then $ab=b$. The element $c$ of axiom (5) is unique, and is denoted $1_{a}$ or $\text{id}_{a}$, and called the identity on $a$. (7) (Order Congruences) (a) If $a\sqsubseteq b$ then $\operatorname{{\bf s}}(a)\sqsubseteq\operatorname{{\bf s}}(b)$ and $\operatorname{{\bf t}}(a)\sqsubseteq\operatorname{{\bf t}}(b)$. (b) $a\sqsubseteq b$ and $c\sqsubseteq d$ and $ac,bd$ $\downarrow$ implies $ac\sqsubseteq bd.$ (c) $a\sqsubseteq b$ implies $1_{a}\sqsubseteq 1_{b}$.
Definition 18. Let $\Lambda$ be a generalized typed lambda calculus, and let $x\in\mathscr{X}_{\Lambda}$ be a variable. We define the symbol $\Lambda_{x}$ to be the generalized typed lambda calculus is defined exactly as $\Lambda$, except that $\mathscr{V}_{\Lambda_{x}}:=\{x\}\cup\mathscr{V},$ that is, $x$ is taken to be a validating term in $\Lambda_{x}$.
Definition 12. Let $\mathscr{C}$ be an ideal cartesian closed category. Let $x$ be an indeterminate in $\mathscr{C}$. To define the symbol $\mathscr{C}(x),$ observe that $\mathscr{C}$ is equipped with the structure $(s,t,\cdot,\vdash,\mathscr{I},\mathscr{V})$ of a positive intuitionistic deductive system, when regarded as a generalized graph. Take $\mathscr{K}_{\mathscr{C}(x)}$ to be the set of constant polynomials.1This definition restricts behavior of terminal arrows $\phi\vdash\psi$ for polynomials $\phi$ and $\psi$, but it will not make a difference for our purposes. Now take the polynomial system $\mathscr{C}[x]$ of Definition 11, and then take the smallest equivalence relation $=_{x}$ of paths in $\mathscr{C}[x]$ satisfying the conditions: (1) If $f=g$ in $\mathscr{C}$, then $f=_{x}g$ in $\mathscr{C}(x)$, (2) $(\phi\vdash\hat{\psi})\cdot\psi=_{x}(\phi\vdash\bar{\phi})$ unless $\phi=_{x}\bar{\psi}$, in which case $(\phi\vdash\hat{\psi})\cdot\psi=\psi$, (3) $\psi\cdot(\bar{\psi}\vdash\phi)=_{x}(\hat{\psi}\vdash\phi)$ unless $\phi=_{x}\hat{\psi}$, in which case $\psi\cdot(\bar{\psi}\vdash\phi)=_{x}(\hat{\psi}\vdash\phi),$ unless $\psi\in\mathscr{K}$ or $\bar{\psi}\vdash\phi\in\mathscr{K}$, (4) For all $\phi,\psi\in\mathscr{C}[x]$, if $(\chi\cdot\psi)\cdot\phi$ is defined, then $(\chi\cdot\psi)\cdot\phi=_{x}\chi\cdot(\psi\cdot\phi),$ (5) Composition $(\cdot)$, combination $\langle,\rangle$, and the turnstile $(\vdash)$ in $\mathscr{C}(x)$ is substitutive in both arguments: (a) if $\phi=_{x}\psi$ then $\phi\vdash\chi=_{x}\psi\vdash\chi$ and $\chi\vdash\phi=_{x}\chi\vdash\psi$, (b) if $\phi=_{x}\psi$ and $\phi\cdot\chi$ $\downarrow$ then $\phi\cdot\chi=_{x}\psi\cdot\chi$ and if $\chi^{\prime}\cdot\phi$ $\downarrow$ then $\chi^{\prime}\cdot\phi=_{x}\chi^{\prime}\cdot\psi$, (c) if $\phi=_{x}\psi$ and $\langle\phi,\chi\rangle$ $\downarrow$ then $\langle\phi,\chi\rangle=_{x}\langle\psi,\chi\rangle$ and $\langle\chi,\phi\rangle=_{x}\langle\chi,\psi\rangle$, (6) For all $\phi:a\to\top$, $f=_{x}a\vdash\top$, (7) For all pairs $(a,b)\in\mathscr{C}$ (viewed as a deductive system), if the unique good pair for $(a,b)$ is $(\pi_{a,b},\pi^{\prime}_{a,b})$ and any good evaluation $\epsilon_{a,b}$ is taken, then these are required to satisfy their usual equational properties in expressions involving $x$: (a) if $\pi_{a,b}\langle\phi,\psi\rangle$ $\downarrow$ then $\pi_{a,b}\langle\phi,\psi\rangle=_{x}\phi$, (b) if $\pi^{\prime}_{a,b}\langle\phi,\psi\rangle$ $\downarrow$ then $\pi^{\prime}_{a,b}\langle\phi,\psi\rangle=_{x}\psi$, (c) if $\langle\pi_{a,b}\cdot\phi,\pi^{\prime}_{a,b}\cdot\phi\rangle$ $\downarrow$ then $\langle\pi_{a,b}\cdot\phi,\pi^{\prime}_{a,b}\cdot\phi\rangle=_{x}\phi$, (d) if $\langle\phi\cdot\pi_{a,b},\psi\cdot\pi^{\prime}_{a,b}\rangle$ $\downarrow$ then $\langle\phi\cdot\pi_{a,b},\psi\cdot\pi^{\prime}_{a,b}\rangle=\phi\wedge\psi$, (e) if $\epsilon\langle\phi^{*}\cdot\pi_{c,a},\pi^{\prime}_{c,a}\rangle$ $\downarrow$ then $\epsilon\langle\phi^{*}\cdot\pi_{c,a},\pi^{\prime}_{c,a}\rangle=\phi$, (f) if $(\epsilon\langle\phi\cdot\pi_{c,a},\pi^{\prime}_{c,a}\rangle)^{*}$ $\downarrow$ then $(\epsilon\langle\phi\cdot\pi_{c,a},\pi^{\prime}_{c,a}\rangle)^{*}=\phi$.
Definition 8. An positive intuitionistic generalized deductive system is a generalized deductive system $(\mathscr{A},s,t,\cdot,\vdash,\mathscr{V})$ equipped with the additional structure $(\top,\wedge,\langle,\rangle,()^{*})$ consisting of: (1) A distinguished element $\top\in\mathscr{A}$, (2) A mapping $\wedge:\mathscr{A}\times\mathscr{A}\to\mathscr{A}$, (3) A partially defined mapping $\langle,\rangle:\mathscr{A}\times\mathscr{A}\to\mathscr{A}$, (4) A partially defined mapping $()^{*}:\mathscr{A}\to\mathscr{A}$ subject to the following axioms, (1) $\langle a,b\rangle$ is defined if and only if the source of $a$ and $b$ are identical. (2) $a^{*}$ is defined if and only if the source of $a$ is the wedge of two subjects in $\mathscr{A}$. the following source and target conditions: (1) $\hat{\top}=\bar{\top}=\top$, (2) $s(a\wedge b)=s(a)\wedge s(b)$ and $t(a\wedge b)=t(a)\wedge t(b)$, (3) $s(\langle a,b\rangle)=s(a)$ and $t(\langle a,b\rangle)=t(a)\wedge t(b)$ (4) $s(a^{*})=proj_{1}(s(a))$ and $t(a^{*})=proj_{2}(s(a))\vdash t(a)$, where $proj_{1}$ and $proj_{2}$ are the projections on wedge ($\wedge$) products. and the following rules, or validities: For all $a,b\in\mathscr{V}$, (1) $\top\in\mathscr{V}$, (2) $a\wedge b$ is valid if $a$ and $b$ are valid, (3) $\langle a,b\rangle$ is valid if $a$ and $b$ are valid, (4) $a^{*}$ is valid if $a$ is valid, (5) for every pair of subjects $a,b\in\mathscr{A}$, the following types are valid: (a) $\top\vdash a$ (b) $a\wedge b\vdash a$ (c) $a\wedge b\vdash b$ (d) $(a\vdash b)\wedge a\vdash b$ A morphism $f:\mathscr{A}\to\mathscr{B}$ of positive intuitionistic generalized deductive systems is a morphism of generalized deductive systems satisfying (1) $F(\top)=\top,$ (2) $F(a\wedge b)=F(a)\wedge F(b),$ (3) $F(\langle f,g\rangle)=\langle F(f),F(g)\rangle,$ (4) $F(f^{*})=F(f)^{*}.$ This gives a category ${\bf p.i.DedSys}$ of positive intuitionistic generalized deductive systems.
Definition 15. Let $\Lambda$ be a typed lambda calculus. Let $\mathscr{B}_{\Lambda}$ be the set of bulletins in $\Lambda$, that is, the set of terms in $\Lambda$ that have only one free variable. Also for $A\in\mathscr{T}_{\Lambda}$, let $\left({}^{\bullet}\,A\right):=\left({}^{x}\,\ulcorner A\urcorner\wr x\right),% \quad x:\bar{A},$ that is, a symbol $\left({}^{x}\,s\right)$ where $x$ is a variable of type $\bar{A}$, and $s$ is the term $\ulcorner A\urcorner\wr x$. By Axiom (6c) of Definition 14 we may identify these symbols with types in $\Lambda$. We define $\mathbf{C}\Lambda$ to be the set $\mathbf{C}\Lambda:=\{\left({}^{x}\,s\right)\mid s\in\mathscr{B}_{\Lambda},% \text{ $x$ a variable}\},$ of symbols $\left({}^{x}\,s\right)$ for variable $x$ and bulletin $s$, equipped with the structure $\displaystyle\overline{\left({}^{x}\,s\right)}$ $\displaystyle:=\left({}^{\bullet}\,\operatorname{ty}(x)\right),$ $\displaystyle\widehat{\left({}^{x}\,s\right)}$ $\displaystyle:=\left({}^{\bullet}\,\operatorname{ty}(s)\right),$ $\displaystyle\left({}^{x}\,s\right)\cdot\left({}^{y}\,t\right)$ $\displaystyle:=\left({}^{y^{\prime}}\,s[x/t]\right),$ $\displaystyle\left({}^{x}\,s\right)\vdash\left({}^{y}\,t\right)$ $\displaystyle:=\left({}^{u}\,v\right),\quad u:\operatorname{ty}(s),v:% \operatorname{ty}(t),$ where $y^{\prime}=\begin{cases}y&\text{ if $\operatorname{FV}(t)$ is empty},\\ inc_{n}(y)&\text{ if $\operatorname{FV}(t)=\{u\}$ and $\operatorname{FV}(s[x/t% ])=\{inc_{n}(u)\}$,}\end{cases}$ where $inc_{n}$ is the modification of the variable described after Definition 13. Let $\mathscr{K}_{\mathbf{C}\Lambda}$ be the set of symbols $\left({}^{x}\,k\right)$ where $k$ is a constant in $\Lambda$, that is, $\operatorname{FV}(k)=\text{{\O}}$. Let equality of symbols in $\mathbf{C}\Lambda$ be defined by (1) $\left({}^{x}\,s\right)=\left({}^{y}\,t\right)$ if $\operatorname{ty}(x)=\operatorname{ty}(y),\operatorname{ty}(s)=\operatorname{% ty}(t),$ and there is $z:\operatorname{ty}(x)$ such that $s[x/z]=t$, (2) $\left({}^{x}\,s\right)=\left({}^{x}\,u\right),\quad u:\operatorname{ty}{s},\,\,$ if $\operatorname{FV}(s)=\{y\}$ and $y\neq x$, (3) if $\operatorname{ty}(s)=\top$, then $\left({}^{x}\,s\right)=\left({}^{x}\,*\right)$, (4) for all bulletins $s$ and all variables $x,y$ of the same type, $\left({}^{x}\,s\right)=\left({}^{y}\,s[x/y]\right)$. This gives an ideal category $\mathbf{C}\Lambda$, where the identity of $\left({}^{x}\,s\right)$ is $1_{\left({}^{x}\,s\right)}=\left({}^{y}\,y\right),\quad y:s^{\natural},$ terminal arrows are of the form $\left({}^{y}\,*\right),$ and types (in the sense of section 3) are of the form $\left({}^{x}\,y\right),\quad x\neq y.$ Validities defining $\mathbf{C}\Lambda$ are the evident ones based on Definition 9.
Definition 15. An Archimedean unitary Riesz space is called uniformly complete if $\|\ \|_{u}$ is complete for some unit $u\in E$.
Definition 22. Let $E$ be an Archimedean Riesz space with a unit $u$. The spectrum of $E$ is defined to be the set $\Phi(E):=\{\varphi;\ \varphi\colon E\to\mathbbm{R}\ \text{Riesz homomorphism % with }\varphi(u)=1\}.$ which is a topological space with induced topology of the inclusion $\Phi(E)\subseteq\mathbbm{R}^{E}$ where we take the product topology on the latter.
Definition 11. 1. An element $u\in E^{+}$ is called an (order) unit if for every $x\in E$ there exists a $n\in\mathbbm{N}$ such that $|x|<n\cdot u$. A Riesz space is called unitary if it has a unit. 2. An element $\varepsilon\in E$ is called infinitesimal if there is a $b\in E$ such that $n\cdot\varepsilon\leq b$ for all $n\in\mathbbm{Z}$. A Riesz space is called Archimedean if its only infinitesimal is $0$.
Definition 7. Let $E$ be a Riesz space. A subset $D\subseteq E$ is called a Riesz ideal if it is the kernel of some Riesz homomorphism. The ideal $D$ is said to be proper when $D\neq E$. The set $D\subseteq E$ is called a Riesz subspace if $x\vee y,x\wedge y\in D$ whenever $x,y\in D$.
Definition 12. Given an Riesz space $E$ with unit $u\in E$ write $\|x\|_{u}:=\inf\{\lambda;\ \lambda\in\mathbbm{R}^{+};\ |x|\leq\lambda u\}.$
Definition 4. For any Riesz space $E$, define 1. the absolute value $|x|:=x\vee(-x)$ for $x,y\in E$; 2. the positive cone $E^{+}:=\{e\in E;e\geq 0\}$; 3. orthogonality $x\perp y:\Leftrightarrow|x|\wedge|y|=0$ for $x,y\in E$ and 4. the positive $x^{+}:=x\vee 0$ and negative parts $x^{-}:=(-x)\vee 0$.
Definition 1. 1. A real ordered vector space $E$ is a real vector space with a partial order $\leq$ such that for all $x,y\in E$ with $x\leq y$ we have (a) $x+a\leq y+a$ for any $a\in E$ and (b) $\lambda\cdot x\leq\lambda\cdot y$ for all scalars $\lambda\geq 0$. 2. A Riesz space is a real ordered vector space that is a lattice (i.e. all finite infima and suprema exist.) 3. A linear map $\varphi\colon E\to E^{\prime}$ between Riesz spaces is called a Riesz homomorphism if $\varphi$ preserves finite infima and suprema.
Definition 16. We write $\mathsf{CAURiesz}$ for the category of uniformly complete Archimedean Riesz spaces with distinguished unit as objects and Riesz homomorphisms that preserve the selected unit as arrows between.
Definition 3.3. The simplicial category $\mathbf{PDer}_{\bullet}^{\mathrm{eq}}$ is the sub-simplicial category of $\mathbf{PDer}_{\bullet}$ with $\mathbf{PDer}^{\mathrm{eq}}_{n}(\mathscr{D}_{1},\mathscr{D}_{2})=\mathbf{PDer}% ^{s}(\mathscr{D}_{1},\mathscr{D}_{2,\mathrm{eq}}^{[n]})$.
Definition 5.1. A $\mathbf{Cat}$-set is a presheaf on the category of small categories, that is, an ordinary functor $\mathbf{Cat}^{\mathrm{op}}\to\mathbf{Set}$.
Definition 2.4. Let $Q$ be a quasicategory. Then the prederivator $\mathrm{HO}(Q):\underline{\mathbf{Cat}}^{\mathrm{op}}\to\underline{\mathbf{CAT}}$ is given as the composition $\underline{\mathbf{Cat}}^{\mathrm{op}}\stackrel{{\scriptstyle{N^{\mathrm{op}}}% }}{{\longrightarrow}}\underline{\mathbf{QCat}}_{\mathrm{Ho}}^{\mathrm{op}}% \stackrel{{\scriptstyle{Q^{(-)}}}}{{\longrightarrow}}\underline{\mathbf{QCAT}}% _{\mathrm{Ho}}\stackrel{{\scriptstyle{\mathrm{Ho}}}}{{\longrightarrow}}% \underline{\mathbf{CAT}}$ In particular, $\mathrm{HO}(Q)$ maps a category $J$ to the homotopy category of $J$-shaped diagrams in $Q$, that is, to $\mathrm{Ho}(Q^{N(J)})$. Given a morphism of quasicategories $f:Q\to R$, we have a strict morphism of prederivators $\mathrm{HO}(f):\mathrm{HO}(Q)\to\mathrm{HO}(R)$ given as the analogous composition $\mathrm{HO}(f)=\mathrm{Ho}\circ f^{(-)}\circ N$, so that for each category $J$ the functor $\mathrm{HO}(f)_{J}$ is given by post-composition with $f$, that is, by $\mathrm{Ho}(f^{NJ}):\mathrm{Ho}(Q^{NJ})\to\mathrm{Ho}(R^{NJ})$.
Definition 1.3. A prederivator is simply a 2-functor $\mathscr{D}:\underline{\mathbf{Dia}}^{\mathrm{op}}\to\underline{\mathbf{CAT}}$ from a 2-category $\underline{\mathbf{Dia}}$ such as the 2-category of finite direct categories or that of all small categories to the 2-category $\underline{\mathbf{CAT}}$ of locally small categories. See [Gro13, Definition 1.12], for the exact conditions $\underline{\mathbf{Dia}}$ must satisfy. For categories $J,K\in\underline{\mathbf{Dia}}$, we have a functor $\mathrm{dia}_{J}^{K}:\mathscr{D}(J\times K)\to\mathscr{D}(J)^{K}$ induced by the action of $\mathscr{D}$ on the functors and natural transformations from $[0]$ to $K$. We refer to $\mathrm{dia}_{J}^{K}$ as a “partial underlying diagram functor,” and when $J=[0]$ simply as the “underlying diagram functor,” denoted $\mathrm{dia}^{K}$. We generally denote $\mathscr{D}(u)$ by $u^{*}$, for $u:J\to K$ a functor in $\underline{\mathbf{Dia}}$. The 2-functor $\mathscr{D}$ is a derivator if it satisfies the first four of the following axioms, a semiderivator if it satisfies the first two, and strong if it satisfies the fifth. We introduce here a variant (Der5’) of the fifth axiom, prederivators satisfying which will be called smothering, à la [RV15a]. (Der1) Let $(J_{i})_{i\in I}$ be a family of objects of $\underline{\mathbf{Dia}}$ such that $\coprod_{I}J_{i}\in\underline{\mathbf{Dia}}$ as well. Then the canonical map $\mathscr{D}\left(\coprod_{I}J_{i}\right)\to\prod_{I}\mathscr{D}(J_{i})$ is an equivalence. (Der2) For every $J\in\underline{\mathbf{Dia}}$, the underlying diagram functor $\mathrm{dia}^{J}:\mathscr{D}(J)\to\mathscr{D}([0])^{J}$ is conservative. (Der3) For every functor $u:J\to K$ in $\underline{\mathbf{Dia}}$, $u^{*}=\mathscr{D}(u):\mathscr{D}(K)\to\mathscr{D}(J)$ has both a left and a right adjoint, denoted by $u_{!}$ and $u_{*}$ respectively. (Der4) For every object $k$ of $K\in\underline{\mathbf{Dia}},$ functor $u:J\to K$, and object $X\in\mathscr{D}(J)$, the canonical map $p_{!}q^{*}X\to k^{*}u_{!}X$ is an isomorphism, where $q:u/k\to J$ is the canonical projection and $p:u/k\to[0]$ is the unique functor to the terminal category. Dually, for $u_{*}$. (Der5) For every $J\in\underline{\mathbf{Dia}}$, the partial underlying diagram functor $\mathrm{dia}_{J}^{[1]}:\mathscr{D}(J\times[1])\to\mathscr{D}(J)^{[1]}$ is full and essentially surjective. (Der5’) For every $J\in\underline{\mathbf{Dia}},$ the partial underlying diagram functor $\mathrm{dia}_{J}^{[1]}:\mathscr{D}(J\times[1])\to\mathscr{D}(J)^{[1]}$ is full and surjective on objects. Remark 1.4. Axiom (Der2) implies that all the partial underlying diagram functors are conservative, so that (Der5’) requires exactly that $\mathrm{dia}_{J}^{[1]}$ be smothering in the sense of [RV15a]. To lessen the sense of artificiality in asking in (Der5’) for strict surjectivity of a functor, we might note that asking a full conservative functor to strictly surjective onto its essential image is equivalent to asking that it be a fibration in the trivial model structure on the category of categories, that is, the unique model structure whose weak equivalences are equivalences of categories, see [JT91].
Definition 1.2. The nerve $N(J)$ of a category $J$ is the simplicial set defined by the formula $N(J)_{n}=\mathbf{Cat}([n],J)$.
Definition 3.4. A coherent equivalence of prederivators is a quadruple $(F,G,\alpha,\beta)$ of prederivator morphisms $F:\mathscr{D}_{1}\to\mathscr{D}_{2},G:\mathscr{D}_{2}\to\mathscr{D}_{1},\alpha% _{1}:\mathscr{D}_{1}\to\mathscr{D}_{1,\mathrm{eq}}^{[1]},$ and $\alpha_{2}:\mathscr{D}_{2}\to\mathscr{D}_{2,\mathrm{eq}}^{[1]}$ such that the vertices of $\alpha_{1}$ are $GF$ and $\mathrm{id}_{\mathscr{D}_{1}}$, and similarly for $\alpha_{2}$.
Definition 2.1. A map $F:Q\to R$ of quasicategories is said to be an equivalence if and only if it is an equivalence in the 2-category $\underline{\mathbf{QCat}}_{\mathrm{Ho}}$.
Definition 4.5. Let $\mathcal{S}$ be any simplicial category. Two objects $x,y\in\mathcal{S}$ are said to be homotopy equivalent if there exist maps $f:x\leftrightarrows y:g$ with homotopies-that is, 1- simplices in mapping spaces $\mathcal{S}(x,x)$ and $\mathcal{S}(y,y)$, giving rise to isomorphisms after applying $\tau_{1}$-between $gf,fg$, and the respective identities.
Definition 3.2. We define $\mathbf{PDer}_{\bullet}$ as a simplicially enriched category whose objects are the prederivators. The mapping simplicial sets have $n-$simplices as follows: $\mathbf{PDer}_{n}(\mathscr{D}_{1},\mathscr{D}_{2})=\mathbf{PDer}^{s}(\mathscr{% D}_{1},\mathscr{D}^{[n]}_{2})$. For $(f,g)\in\mathbf{PDer}_{n}(\mathscr{D}_{2},\mathscr{D}_{3})\times\mathbf{PDer}_% {n}(\mathscr{D}_{1},\mathscr{D}_{2})$, the composition $f*g:\mathscr{D}_{1}\to\mathscr{D}_{3}^{[n]}$ is given by the formula below, in which we repeatedly apply the internal hom 2-functor discussed above Remark 3.1. $\mathscr{D}_{1}\stackrel{{\scriptstyle{g}}}{{\longrightarrow}}\mathscr{D}_{2}^% {[n]}\stackrel{{\scriptstyle{f^{[n]}}}}{{\longrightarrow}}\left(\mathscr{D}_{3% }^{[n]}\right)^{[n]}\cong\mathscr{D}_{3}^{[n]\times[n]}\stackrel{{\scriptstyle% {\mathscr{D}_{3}^{\mathrm{diag}_{[n]}}}}}{{\longrightarrow}}\mathscr{D}_{3}^{[% n]}$
Definition 4.7. Let $(\mathcal{B},*,\mathcal{G})$ be a base for a category $\mathcal{D}$ such that $\mathcal{B}$ has a monoidal structure. Then the monoidal structure on $\mathcal{D}$ coming from the base satisfying the two conditions of above theorem is denoted by $\otimes_{\mathcal{G}}$, and we call this monoidal structure on $\mathcal{D}$ as induced tensor on $\mathcal{D}$ from the base $\mathcal{B}$. In this case, we call base as monoidal base.
Definition 2.1 (Lax Symmetric monoidal functor). Lax symmetric monoidal functor between symmetric monoidal categories consists of a functor $\mathcal{F}:\mathcal{C}\to\mathcal{D}$ and natural transformations $c:\mathcal{F}(M)\otimes\mathcal{F}(N)\to\mathcal{F}(M\otimes N)$ $i:\mathbb{I}_{\mathcal{D}}\to\mathcal{F}(\mathbb{I}_{\mathcal{C}})$ satisfying appropriate coherence axioms.
Definition 3.6 (Hybrid phase space, version 2). A hybrid phase space is a map of directed graphs ${\mathcal{R}}:A\to\mathsf{RR}.$
Definition 2.5. A vector field $X$ on a manifold with corners $D$ is a section of its tangent bundle $TD\to D$. We write $X\in\Gamma(TD)$. A integral curve of the vector field $X$ is a smooth map $x:I\to D$ of $X$ (where $I$ is an interval) so that $\frac{d}{dt}x=X(x(t))$ for all $t\in I$.
Definition 2.16 (An execution with jump times indexed by the natural numbers $\mathbb{N}$). Let $H=(A=\{A_{1}\rightrightarrows A_{0}\},\{(R_{a},X_{a})\}_{a\in A_{0}},\{R_{% \gamma}\}_{\gamma\in A_{1}}))$ be a hybrid dynamical system. An execution of $H$ is (2.16.i) an nondecreasing sequence $\{t_{i}\}_{i\geq 0}$ of real numbers (2.16.ii) a function $\varphi_{0}:\mathbb{N}\to A_{0}$; (2.16.iii) a function $\varphi_{1}:\mathbb{N}\to A_{1}$ compatible with $\varphi_{0}$: we require that $\mathfrak{s}(\varphi_{1}(i))=\varphi_{0}(i)$ and $\mathfrak{t}(\varphi_{1}(i))=\varphi_{0}(i+1)$; (2.16.iv) an integral curve $\sigma_{i}:[t_{i-1},t_{i}]\to R_{\varphi_{0}(i)}$ of $X_{\varphi_{0}(i)}$ (with $t_{-1}$ being some number less than $t_{0}$); (2.16.v) the terminal end point of $\sigma_{i}$ and the initial end point of $\sigma_{i+1}$ are related by the reset relation $R_{\varphi_{1}(i)}$: $(\sigma_{i+1}(t_{i}),\sigma_{i}(t_{i}))\in R_{\varphi_{1}(i)}.$
Definition 4.1 (Hybrid dynamical system, version 2). A hybrid dynamical system is a hybrid phase space ${\mathcal{R}}:A\to\mathsf{RR}.$ together with a family of vector field $\{X_{a}\in\Gamma(T{\mathcal{R}}(a))\}_{a\in A_{0}}$, one for each region ${\mathcal{R}}(a)$. Thus a hybrid dynamical system is a pair $({\mathcal{R}}:A\to\mathsf{RR},X=\{X_{a}\in\Gamma(T{\mathcal{R}}(a))\}_{a\in A% _{0}})$.
