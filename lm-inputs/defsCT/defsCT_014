Definition 2.18. An $\infty$-presheaf on manifolds is a functor $\mathscr{X}:\mathit{Mfd}^{op}\to\mathbf{Gpd}_{\infty}$ from (the opposite of) the category of smooth manifolds to the $\infty$-category of $\infty$-groupoids. We denote the $\infty$-category of such functors by $\operatorname{Psh}_{\infty}\left(\mathit{Mfd}\right).$ Given any weak presheaf of groupoids $\mathscr{X},$ there is an associated $\infty$-presheaf $\mathit{Mfd}^{op}\stackrel{{\scriptstyle\mathscr{X}}}{{\longrightarrow}}% \mathbf{Gpd}\hookrightarrow\mathbf{Gpd}_{\infty},$ and this assignment induces a canonical inclusion $\operatorname{Psh}_{1}\left(\mathit{Mfd}\right)\hookrightarrow\operatorname{% Psh}_{\infty}\left(\mathit{Mfd}\right).$
Definition B.2. A (left) $\mathcal{G}$-bundle over a manifold $M$ is a $\mathcal{G}$-manifold $P$ equipped with a $\mathcal{G}$-invariant projection map $\pi:P\to M$ which is a surjective submersion. Such a $\mathcal{G}$-bundle is principal if the induced map, $\mathcal{G}_{1}\times_{\mathcal{G}_{0}}P\to P\times_{M}P$ is a diffeomorphism. We usually use the notation $\xymatrix@R=2pc@C=0.15pc{\mathcal{G}_{1}\ar@<+.7ex>[d]\ar@<-.7ex>[d]&\hskip 2.% 845276pt{\begin{picture}(8.0,8.0)(0.0,0.0)\qbezier(7.0,6.0)(4.5,8.3)(2.0,7.0)% \qbezier(2.0,7.0)(-1.5,4.0)(2.0,1.0)\qbezier(2.0,1.0)(4.5,-0.3)(7.0,2.0)% \qbezier(7.0,6.0)(6.1,7.5)(6.8,9.0)\qbezier(7.0,6.0)(5.0,6.1)(4.2,4.4)% \end{picture}\hskip 2.845276pt}&P\ar_{\mu}[lld]\ar^{\pi}[d]\\ \mathcal{G}_{0}&&M}$ to denote such a principal $\mathcal{G}$-bundle.
Definition 2.22. Denote by $\mathit{Mfd}^{\acute{e}t}$ the category of manifolds and their local diffeomorphisms and by $j:\mathit{Mfd}^{\acute{e}t}\to\mathit{Mfd}$ the canonical functor. There is a canonical restriction functor $j^{*}:\operatorname{Sh_{\infty}}\left(\mathit{Mfd}\right)\to\operatorname{Sh_{% \infty}}\left(\mathit{Mfd}^{\acute{e}t}\right)$ and it admits a left adjoint $j_{!}$ called the étale prolongation functor. Similarly, denote by $j_{n}:n\mbox{-}\mathit{Mfd}^{\acute{e}t}\to\mathit{Mfd}$ the canonical functor from $n$-manifolds and their local diffeomorphisms to all smooth manifolds and all smooth maps. The restriction functor $j_{n}^{*}:\operatorname{Sh_{\infty}}\left(\mathit{Mfd}\right)\to\operatorname{% Sh_{\infty}}\left(\mathit{Mfd}^{\acute{e}t}\right)$ likewise admits a left adjoint $j^{n}_{!}$ called the $n$-dimensional étale prolongation functor.
Definition 2.6. If $\mathcal{G}$ is a Lie groupoid, we denote by $B\mathcal{G}$ the fat geometric realization (Definition 3.1) $||N\left(\mathcal{G}\right)||$ of the underlying simplicial space of the simplicial manifold $N\left(\mathcal{G}\right)_{\bullet}$, and call it the classifying space of $\mathcal{G}$.
Definition A.1. Suppose that $\mathscr{X}:\mathit{Mfd}^{op}\to\mathbf{Gpd}_{\infty}$ is an $\infty$-presheaf. We say that $\mathscr{X}$ is an $\infty$-stack (or $\infty$-sheaf) if for any manifold $M$ and any open cover $\left(U_{\alpha}\hookrightarrow M\right),$ the canonical map $\mathscr{X}\left(M\right)\to\varprojlim\left[\prod\limits_{\alpha}\mathscr{X}% \left(U_{\alpha}\right)\hskip 1.422638pt\mbox{\,\put(0.0,-2.0){$\rightarrow$}% \put(0.0,2.0){$\rightarrow$} }\prod\limits_{\alpha,\beta}\mathscr{X}\left(U% _{\alpha}\cap U_{\beta}\right)\hskip 1.422638pt\mbox{\,\put(0.0,-3.0){$% \rightarrow$}\put(0.0,1.0){$\rightarrow$}\put(0.0,5.0){$\rightarrow$} }% \prod\limits_{\alpha,\beta,\gamma}\mathscr{X}\left(U_{\alpha}\cap U_{\beta}% \cap U_{\gamma}\right)\ldots\right]$ is an equivalence of $\infty$-groupoids, where the above diagram is the entire cosimplicial diagram, with terms involving $n$-fold intersections of elements of the cover for all $n$. Denote the full subcategory of $\operatorname{Psh}_{\infty}\left(\mathit{Mfd}\right)$ on the $\infty$-stacks by $\operatorname{Sh_{\infty}}\left(\mathit{Mfd}\right).$ The canonical inclusion $\operatorname{Sh_{\infty}}\left(\mathit{Mfd}\right)\hookrightarrow% \operatorname{Psh}_{\infty}\left(\mathit{Mfd}\right)$ admits a left adjoint $a$ called the $\infty$-stackification functor, and $a$ preserve finite limits.
Definition 2.14. If $G\hskip 2.845276pt{\begin{picture}(8.0,8.0)(0.0,0.0)\qbezier(7.0,6.0)(4.5,8.3)% (2.0,7.0)\qbezier(2.0,7.0)(-1.5,4.0)(2.0,1.0)\qbezier(2.0,1.0)(4.5,-0.3)(7.0,2% .0)\qbezier(7.0,6.0)(6.1,7.5)(6.8,9.0)\qbezier(7.0,6.0)(5.0,6.1)(4.2,4.4)% \end{picture}\hskip 2.845276pt}M$ is a smooth action of a Lie group on a manifold, then we denote by $M//G$ the stack completion of the action groupoid $G\ltimes M,$ and call it the stacky-quotient of $M$ by $G$.
Definition 3.3. Let $F:\mathscr{C}\to\mathbf{Cat}$ be a functor from a small category $\mathscr{C}$ to the category of small categories. The Grothendieck construction of $F$ is the category $\int_{\mathscr{C}}F$ whose objects are pairs $\left(C,X\right)$ with $C$ an object of $\mathscr{C}$ and $X$ an object in $F\left(C\right).$ A morphism from $\left(C,X\right)$ to $\left(D,Y\right)$ is a morphism $f:C\to D$ in $\mathscr{C}$ together with a morphism $g:F\left(f\right)\left(X\right)\to Y$ in $F\left(D\right).$ Note that there is a canonical functor $\pi_{F}:\int_{\mathscr{C}}F\to\mathscr{C}.$ There is also a contravariant version, namely if $F:\mathscr{C}^{op}\to\mathbf{Cat}$, we can apply the Grothendieck construction to get a functor $\int_{\mathscr{C}^{op}}F\to\mathscr{C}^{op},$ and then consider (with slight abuse of notation) the induced functor $\pi_{F}:\left(\int_{\mathscr{C}}F\right):=\left(\int_{\mathscr{C}^{op}}F\right% )^{op}\to\left(\mathscr{C}^{op}\right)^{op}=\mathscr{C},$ which we will also call the Grothendieck construction of $F$.
Definition 2.9. A foliation with transverse symplectic structure on $M$ is a foliation $\mathcal{F}$ together with a closed $2$-form $\omega$ such that for all $x,$ $\ker\left(\omega_{x}\right)=\mathcal{F}_{x}.$
Definition 3.2. An embedding $Y\hookrightarrow Z$ of topological spaces is said to be relatively $T1$ if for any open subset $U\subseteq Y,$ and any point $z\in Z\backslash U,$ there is an open subset $W\subseteq Z$ such that $z\notin W$ and $U\subseteq W.$
Definition B.1. Given a Lie groupoid $\mathcal{G}$, a (left) $\mathcal{G}$-manifold is a (possibly non-Hausdorff or $2^{nd}$-countable) manifold $E$ equipped with a moment map $\mu:E\to\mathcal{G}_{0}$ and an action map $\rho:\mathcal{G}_{1}\times_{\mathcal{G}_{0}}E\to E$, where $\xymatrix{\mathcal{G}_{1}\times_{\mathcal{G}_{0}}E\ar[r]\ar[d]&E\ar^{-}{\mu}[d% ]\\ \mathcal{G}_{1}\ar^{-}{s}[r]&\mathcal{G}_{0}\\ }$ is the fibered product, such that the following conditions hold: i) $\left(gh\right)\cdot e=g\cdot\left(h\cdot e\right)$ whenever $e$ is an element of $E$ and $g$ and $h$ elements of $\mathcal{G}_{1}$ with domains such that the composition makes sense ii) $1_{\mu\left(e\right)}\cdot e=e$ for all $e\in E$ iii) $\mu\left(g\cdot e\right)=t\left(g\right)$ for all $g\in\mathcal{G}_{1}$ and $e\in E$.
Definition 2.17. Let $\Gamma^{n}$ denote the étale Lie groupoid from Example 2.6. Then $\left[\Gamma^{n}\right]=:\mathbb{H}_{n}$ is called the $n$-dimensional Haefliger stack.
Definition 4.2. Let $G$ be a Lie group of dimension $k$ and let $M$ be a smooth $\left(n+k\right)$-manifold equipped with an almost free $G$-action. Define the Borel category of $G\hskip 2.845276pt{\begin{picture}(8.0,8.0)(0.0,0.0)\qbezier(7.0,6.0)(4.5,8.3)% (2.0,7.0)\qbezier(2.0,7.0)(-1.5,4.0)(2.0,1.0)\qbezier(2.0,1.0)(4.5,-0.3)(7.0,2% .0)\qbezier(7.0,6.0)(6.1,7.5)(6.8,9.0)\qbezier(7.0,6.0)(5.0,6.1)(4.2,4.4)% \end{picture}\hskip 2.845276pt}M$, denoted as $\mathfrak{Bor}\left(G\hskip 2.845276pt{\begin{picture}(8.0,8.0)(0.0,0.0)% \qbezier(7.0,6.0)(4.5,8.3)(2.0,7.0)\qbezier(2.0,7.0)(-1.5,4.0)(2.0,1.0)% \qbezier(2.0,1.0)(4.5,-0.3)(7.0,2.0)\qbezier(7.0,6.0)(6.1,7.5)(6.8,9.0)% \qbezier(7.0,6.0)(5.0,6.1)(4.2,4.4)\end{picture}\hskip 2.845276pt}M\right)$, to be the following category. The objects consist of smooth maps $f:\mathbb{R}^{n}\to M$ which are transverse to all the $G$-orbits. An arrow from $f$ to $f^{\prime}$ consists of a pair $\left(\varphi,\tau\right)$ with $\varphi:\mathbb{R}^{n}\hookrightarrow\mathbb{R}^{n}$ an embedding, and with $\tau:\mathbb{R}^{n}\to G$ a smooth map such that for all $x\in\mathbb{R}^{n}$ we have $f\left(x\right)=\tau\left(x\right)\cdot f^{\prime}\left(\varphi\left(x\right)% \right).$ Composition $f\stackrel{{\scriptstyle\left(\varphi,\tau\right)}}{{-\!\!\!-\!\!\!-\!\!\!-\!% \!\!-\!\!\!-\!\!\!-\!\!\!-\!\!\!\longrightarrow}}f^{\prime}\stackrel{{% \scriptstyle\left(\varphi^{\prime},\tau^{\prime}\right)}}{{-\!\!\!-\!\!\!-\!\!% \!-\!\!\!-\!\!\!-\!\!\!-\!\!\!-\!\!\!\longrightarrow}}f^{\prime\prime}$ is defined as follows: $\left(\varphi^{\prime},\tau^{\prime}\right)\circ\left(\varphi,\tau\right):=% \left(\varphi^{\prime}\varphi,c\left(\tau,\tau^{\prime},\varphi\right)\right)$ where $\displaystyle c\left(\tau,\tau^{\prime},\varphi\right):\mathbb{R}^{n}$ $\displaystyle\to$ $\displaystyle G$ $\displaystyle x$ $\displaystyle\mapsto$ $\displaystyle\tau\left(x\right)\cdot\tau^{\prime}\left(\varphi\left(x\right)% \right).$
Definition 2.13. A stack of groupoids $\mathscr{X}$ on $\mathit{Mfd}$ is a differentiable stack if it is equivalent to $\left[\mathcal{G}\right]$ for some Lie groupoid $\mathcal{G}$.
Definition 2.21. An $\infty$-stack $\mathscr{X}$ on $\mathit{Mfd}$ is an étale differentiable $\infty$-stack if and only if it is equivalent to one of the form $\left[\mathcal{G}_{\bullet}\right]$ with $\mathcal{G}_{\bullet}$ an étale simplicial manifold. Denote the corresponding $\infty$-category by $\mathfrak{EtDiffSt}_{\infty}.$ Such an étale differentiable $\infty$-stack is said to be $n$-dimensional if $\mathscr{X}\simeq\left[\mathcal{G}_{\bullet}\right],$ with $\mathcal{G}_{\bullet}$ $n$-dimensional. Denote the corresponding $\infty$-category by $n\mbox{-}\mathfrak{EtDiffSt}_{\infty}.$
Definition 2.5. A smooth functor $\varphi:\mathcal{H}\to\mathcal{G}$ of Lie groupoids is a Morita equivalence if the following two properties hold: i) (Essentially Surjective) The map $t\circ pr_{1}:\mathcal{G}_{1}\times_{\mathcal{G}_{0}}\mathcal{H}_{0}\to% \mathcal{G}_{0}$ is a surjective submersion, where $\mathcal{G}_{1}\times_{\mathcal{G}_{0}}\mathcal{H}_{0}$ is the fibered product $\xymatrix{\mathcal{G}_{1}\times_{\mathcal{G}_{0}}\mathcal{H}_{0}\ar[r]^{-}{pr_% {2}}\ar[d]_{-}{pr_{1}}&\mathcal{H}_{0}\ar[d]^{-}{\varphi}\\ \mathcal{G}_{1}\ar[r]^{-}{s}&\mathcal{G}_{0}.}$ i) (Fully Faithful) The following is a fibered product: $\xymatrix{\mathcal{H}_{1}\ar[r]^{-}{\varphi}\ar[d]_{-}{\left(s,t\right)}&% \mathcal{G}_{1}\ar[d]^{-}{\left(s,t\right)}\\ \mathcal{H}_{0}\times\mathcal{H}_{0}\ar[r]^{-}{\varphi\times\varphi}&\mathcal{% G}_{0}\times\mathcal{G}_{0}.}$ Two Lie groupoids $\mathcal{L}$ and $\mathscr{K}$ are Morita equivalent if there is a chain of Morita equivalences $\mathcal{L}\leftarrow\mathcal{H}\rightarrow\mathscr{K}$.
Definition 4.1. Let $BG$ be a classifying space for $G$ (e.g. $BG=||N\left(G\right)||$) and let $EG\to BG$ be a universal principal $G$-bundle (e.g. $EG=||N\left(G\ltimes G\right)||$), then the Borel construction of $G\hskip 2.845276pt{\begin{picture}(8.0,8.0)(0.0,0.0)\qbezier(7.0,6.0)(4.5,8.3)% (2.0,7.0)\qbezier(2.0,7.0)(-1.5,4.0)(2.0,1.0)\qbezier(2.0,1.0)(4.5,-0.3)(7.0,2% .0)\qbezier(7.0,6.0)(6.1,7.5)(6.8,9.0)\qbezier(7.0,6.0)(5.0,6.1)(4.2,4.4)% \end{picture}\hskip 2.845276pt}T$ is the quotient of $X\times EG$ by the diagonal action of $G$, and is denoted by $X\times_{G}EG$.
Definition 2.7. Two foliations $\mathcal{F}_{0}$ and $\mathcal{F}_{1}$ on a manifold $M$ are integrably homotopic if there is a foliation $\mathcal{H}$ on $M\times I$ transverse to each slice $M\times\left\{t\right\}$ and inducing $\mathcal{F}_{i}$ on each $M\times\left\{i\right\},$ for $i=0,1.$
Definition 2.15. An étale differentiable stack is a stack $\mathscr{X}$ of groupoids on $\mathit{Mfd}$ such that $\mathscr{X}\simeq\left[\mathcal{G}\right]$ for $\mathcal{G}$ an étale Lie groupoid. We denote the full subcategory of $\operatorname{St}\left(\mathit{Mfd}\right)$ on the étale differentiable stacks by $\mathfrak{EtDiffSt}.$
Definition 2.3. A foliation groupoid is a Lie groupoid $\mathcal{G}$ such that for each $x\in\mathcal{G}_{0},$ the isotropy group $\mathcal{G}_{x}$ is discrete.
Definition 2.23. A morphism $f:\mathscr{X}\to\mathscr{Y}$ between étale differentiable $\infty$-stacks is a local diffeomorphism if it is in the essential image of $j_{!}$.
Definition 2.11. A weak presheaf of groupoids $\mathscr{X}:\mathit{Mfd}^{op}\to\mathbf{Gpd}$ is a stack (or $1$-sheaf) if and only if for every manifold $M$ and every open cover $\mathcal{U}=\left(U_{\alpha}\hookrightarrow M\right),$ the canonical map $\operatorname{Hom}\left(y\left(M\right),\mathscr{X}\right)\to\operatorname{Hom% }\left(\tilde{y}\left(M_{\mathcal{U}}\right),\mathscr{X}\right)$ is an equivalence of groupoids. Denote the full subcategory of $\operatorname{Psh}_{1}\left(\mathit{Mfd}\right)$ on the stacks by $\operatorname{St}\left(\mathit{Mfd}\right)$. The canonical inclusion $\operatorname{St}\left(\mathit{Mfd}\right)\hookrightarrow\operatorname{Psh}_{1% }\left(\mathit{Mfd}\right)$ admits a left adjoint $a$ called the stackification functor, and $a$ preserve finite limits.
Definition B.3. Let $\mathcal{G}$ and $\mathcal{H}$ be two Lie groupoids. A principal $\mathcal{G}$-bundle over $\mathcal{H}$ is a principal $\mathcal{G}$-bundle $\xymatrix@R=2pc@C=0.15pc{\mathcal{G}_{1}\ar@<+.7ex>[d]\ar@<-.7ex>[d]&\hskip 2.% 845276pt{\begin{picture}(8.0,8.0)(0.0,0.0)\qbezier(7.0,6.0)(4.5,8.3)(2.0,7.0)% \qbezier(2.0,7.0)(-1.5,4.0)(2.0,1.0)\qbezier(2.0,1.0)(4.5,-0.3)(7.0,2.0)% \qbezier(7.0,6.0)(6.1,7.5)(6.8,9.0)\qbezier(7.0,6.0)(5.0,6.1)(4.2,4.4)% \end{picture}\hskip 2.845276pt}&P\ar_{\mu}[lld]\ar^{\nu}[d]\\ \mathcal{G}_{0}&&\mathcal{H}_{0}}$ over $\mathcal{H}_{0}$, such that $P$ also has the structure of a right $\mathcal{H}$-bundle with moment map $\nu$, with the $\mathcal{G}$ and $\mathcal{H}$ actions commuting in the obvious sense. We typically denote such a bundle by $\xymatrix@R=2pc@C=0.15pc{\mathcal{G}_{1}\ar@<+.7ex>[d]\ar@<-.7ex>[d]&\hskip 2.% 845276pt{\begin{picture}(8.0,8.0)(0.0,0.0)\qbezier(7.0,6.0)(4.5,8.3)(2.0,7.0)% \qbezier(2.0,7.0)(-1.5,4.0)(2.0,1.0)\qbezier(2.0,1.0)(4.5,-0.3)(7.0,2.0)% \qbezier(7.0,6.0)(6.1,7.5)(6.8,9.0)\qbezier(7.0,6.0)(5.0,6.1)(4.2,4.4)% \end{picture}\hskip 2.845276pt}&P\ar_{\mu}[lld]\ar^{\nu}[rrd]&\hskip 2.845276% pt{\begin{picture}(8.0,8.0)(0.0,0.0)\qbezier(1.0,6.0)(3.5,8.3)(6.0,7.0)% \qbezier(6.0,7.0)(9.5,4.0)(6.0,1.0)\qbezier(6.0,1.0)(3.5,-0.3)(1.0,2.0)% \qbezier(1.0,6.0)(1.9,7.5)(1.2,9.0)\qbezier(1.0,6.0)(3.0,6.1)(3.8,4.4)% \end{picture}\hskip 2.845276pt}&\mathcal{H}_{1}\ar@<+.7ex>[d]\ar@<-.7ex>[d]\\ \mathcal{G}_{0}&&&&\mathcal{H}_{0}.}$
Definition 2.19. We say that an $\infty$-presheaf on manifolds $\mathscr{X}$ is an $\infty$-stack (or $\infty$-sheaf) if for any manifold $M$ and any open cover $\left(U_{\alpha}\hookrightarrow M\right),$ the canonical map $\operatorname{Hom}\left(y\left(M\right),\mathscr{X}\right)\to\operatorname{Hom% }\left(\tilde{y}\left(M_{\mathcal{U}}\right),\mathscr{X}\right)$ is an equivalence of $\infty$-groupoids. Denote the full subcategory of $\operatorname{Psh}_{\infty}\left(\mathit{Mfd}\right)$ on the $\infty$-stacks by $\operatorname{Sh_{\infty}}\left(\mathit{Mfd}\right).$ The canonical inclusion $\operatorname{Sh_{\infty}}\left(\mathit{Mfd}\right)\hookrightarrow% \operatorname{Psh}_{\infty}\left(\mathit{Mfd}\right)$ admits a left adjoint $a$ called the $\infty$-stackification functor, and $a$ preserve finite limits.
Definition 3.3. Let $V\in\mathscr{V}ect(\Bbbk)$. We say that $V$ is a $B_{\infty}$ algebra if there is a structure of a dg bialgebra on the cofree coalgebra $T^{\vee}(V[1])$ cogenerated by $V[1]$, whose underlying coalgebra is the cofree one.
Definition 1.2. Let $\mathscr{M}$ be a symmetric monoidal category with weak equivalences, see Definition 1.1. A Leinster monoid in $\mathscr{M}$ is a colax-monoidal functor $X_{L}\colon\Delta_{0}^{\mathrm{opp}}\to\mathscr{M}$ such that the colax-maps $\beta_{m,n}\colon X_{m+n}\to X_{m}\otimes X_{n}$ and the map $\alpha\colon X_{0}\to e_{\mathscr{M}}$ are weak equivalences. Here we use notation $X_{n}=X_{L}([n])$.
Definition 1. A Gerstenhaber algebra, or a 2-algebra $T$ is a graded vector space endowed with a commutative product $m\colon S^{2}(T)\to T$ and a Lie algebra structure $[-,-]$ on $T[1]$ such that the compatibility 0.1 holds.
Definition 3.4. Let $V\in\mathscr{V}ect(\Bbbk)$. We say that $V$ is a $B_{\mathrm{Lie}}$ algebra if there is a dg Lie bialgebra structure on the cofree Lie coalgebra $\mathrm{Lie}^{\vee}(V[1])$ cogenerated by $V[1]$ whose underlying Lie coalgebra structure is the cofree one.
Definition 1.3. Let $\mathscr{M}$ be a symmetric monoidal category. Define the Leinster $n$-monoids in $\mathscr{M}$ as the Leinster monoids in the symmetric monoidal category with weak equivalences $L_{n-1}(\mathscr{M})$ of Leinster $(n-1)$-monoids.
Definition 1.1. (i) A category $\mathscr{C}$ is called a category with weak equivalences if there is a class $\mathscr{W}$ of morphisms in $\mathscr{C}$ closed under the composition and such that all identity morphisms belong to $\mathscr{W}$. A $\Bbbk$-linear category with weak equivalences should obey the following property: for a morphism $f\in\mathscr{W}$ and for $\lambda\in\Bbbk^{*}$, the morphism $\lambda\cdot f$ belongs to $\mathscr{W}$, (ii) a monoidal category with weak equivalences is a monoidal category with a structure of a category with weak equivalences, with the following additional property: for $f\in\mathrm{Hom}(X,Y)$ and $g\in\mathrm{Hom}(X^{\prime},Y^{\prime})$ in $\mathscr{W}$, their product $f\otimes g\in\mathrm{Hom}(X\otimes X^{\prime},Y\otimes Y^{\prime})$ also belongs to $\mathscr{W}$.
Definition 2.3. Let $\mathcal{K}$ be a class of metric $L$-structures in the sense of Definition 2.1, and let $\preceq_{\mathcal{K}}$ be a partial order on $\mathcal{K}$. We say that $(\mathcal{K},\preceq_{\mathcal{K}})$ is a metric AEC is $\preceq_{\mathcal{K}}$ refines the usual metric substructure relation and the following additional conditions hold: (1) $\mathcal{K}$ and $\preceq_{\mathcal{K}}$ are closed under isomorphism. (2) (Colimits of chains) If $\langle M_{i}\,|\,i<\lambda\rangle$ is a $\preceq_{\mathcal{K}}$-increasing chain, then (a) (a) the function symbols in $L$ can be extended uniquely from $\bigcup_{i<\lambda}M_{i}$ to its completion in such a way that $\overline{\bigcup_{i<\lambda}M_{i}}\in\mathcal{K}$, (b) for all $i<\lambda$, $M_{i}\preceq_{\mathcal{K}}\overline{\bigcup_{i<\lambda}M_{i}}\in\mathcal{K}$, and (c) if $M_{i}\preceq_{\mathcal{K}}N$ for all $i<\lambda$, then $\overline{\bigcup_{i<\lambda}M_{i}}\in\mathcal{K}\preceq_{\mathcal{K}}N$. (3) (Coherence) If $M_{1}\subseteq_{L}M_{2}\preceq_{\mathcal{K}}M_{3}$ and $M_{1}\preceq_{\mathcal{K}}M_{3}$, then $M_{1}\preceq_{\mathcal{K}}M_{2}$. (4) (Löwenheim-Skolem) There exists an infinite cardinal $LS^{d}(\mathcal{K})$ such that for any $M\in\mathcal{K}$ and subset $A\subseteq M$, there is an $N$ in $\mathcal{K}$ with $\operatorname{dc}(N)\leq\operatorname{dc}(A)+LS^{d}(\mathcal{K})$ such that $A\subseteq N\preceq_{\mathcal{K}}M$.
Definition 2.1. A many-sorted metric $L$-structure is given by a tuple of interpretations of the symbols in $L$, $(\{(\sigma^{M},d_{\sigma}^{M})\}_{\sigma\in\mathcal{S}},\mathbb{R}^{M},\{R^{M}% \}_{R\in\mathcal{R}},\{F^{M}\}_{F\in\mathcal{F}},\{c^{M}\}_{c\in\mathcal{C}})$ Here each $(\sigma^{M},d_{\sigma}^{M})$ is a complete metric space, $\mathbb{R}^{M}$ is a copy of the real numbers, and each $c^{M}$ is an element of ${\nu(c)}^{M}$. The interest lies in the functions and relations: (1) Each $F\in\mathcal{F}$ is interpreted as a function $F^{M}:\nu(F)_{1}^{M}\times\dots\times\nu(F)_{m}^{M}\to\nu(F)^{M}$ that is weakly closed: if a sequence of m-tuples $(\bar{x}_{n})_{n\in\omega}$ converges to $\bar{x}$, then $(F^{M}(\bar{x}_{n}))_{n\in\omega}$ converges to $F^{M}(\bar{x})$. (2) Each $R\in\mathcal{R}$ is interpreted as a continuous predicate, $R^{M}:\nu(R)_{1}^{M}\times\dots\times\nu(R)_{n}^{M}\to[0,1]$ These are also weakly closed, as in (1).
Definition 2.5. Given $f:M\to N$, $M$ and $N$ in $\mathcal{K}$, we say that $f$ is a $\mathcal{K}$-embedding if $f[M]\preceq_{\mathcal{K}}N$.
Definition 2.2. The density character of a complete metric space $X$, denoted $\operatorname{dc}(X)$, is the cardinality of the smallest dense subset of $X$. We define the density character of a subset $A\subseteq X$ to be the density character of its completion, i.e. $\operatorname{dc}(A)=\operatorname{dc}(\overline{A})$.
Definition 1.2. Let $k:=n-m$ as above. An element $\lambda\in\mathcal{P}$ is called – $k$-regular, if $\lambda_{1}\leq k$ or $\lambda_{1}-\lambda_{2}=k+1$ or $\lambda_{1}-\lambda_{2}\geq 2k+3$. – $k$-quasiregular, if $\lambda_{1}\geq k+1$ and $\lambda_{1}-\lambda_{2}\leq k$. – $k$-singular, if $k+2\leq\lambda_{1}-\lambda_{2}\leq 2k+2$. We denote the sets of $k$-regular, $k$-quasiregular, and $k$-singular elements of $\mathcal{P}$ by $\mathcal{P}_{k,\mathrm{reg}}$, $\mathcal{P}_{k,\mathrm{qreg}}$, and $\mathcal{P}_{k,\mathrm{sing}}$.
Definition 1.5. The operators $D_{\lambda}\in\mathscr{PD}(V)^{\mathfrak{g}}$, where $\lambda\in\mathcal{P}$, are called the Capelli operators.
Definition 8.11. For $s\in\mathbb{C}$ such that $s\not\in 2\mathbb{Z}^{\leq 0}$, we define $\boldsymbol{D}_{s,t,\lambda}\in\mathsf{A}_{t}$ as follows. (i) If either $t\not\in 2\mathbb{Z}^{\leq 0}$, or $t\in 2\mathbb{Z}^{\leq 0}$ and $\lambda$ is $\underline{k}$-regular, then we set $\boldsymbol{D}_{s,t,\lambda}:={\boldsymbol{L}}_{s,t,\lambda}$. (ii) If $t\in 2\mathbb{Z}^{\leq 0}$ and $\lambda$ is $\underline{k}$-quasiregular, then we set $\boldsymbol{D}_{s,t,\lambda}:=(\boldsymbol{c}_{\lambda}(s)-\boldsymbol{c}_{% \lambda^{\dagger}}(s)){\boldsymbol{L}}_{s,t,\lambda}$. (iii) If $t\in 2\mathbb{Z}^{\leq 0}$ and $\lambda$ is $\underline{k}$-singular, then we set $\boldsymbol{D}_{s,t,\lambda}:={\boldsymbol{L}}_{s,t,\lambda}+{\boldsymbol{L}}_% {s,t,\lambda^{\dagger}}$.
Definition 3.4. For $D\in\mathscr{PD}(V)^{\mathfrak{g}}$, the polynomial $f_{D}(x,y)$ whose existence is guaranteed by Proposition 3.3 will be called the eigenvalue polynomial of $D$.
Definition 2.2. Let $f(x,y)\in\Bbbk[x,y]$ and let $k_{\circ}\in\mathbb{Q}$. Assume that the coefficients of $(\kappa-k_{\circ})f(x,y)$ do not have any poles at $\kappa=k_{\circ}$. (i) The singular part of $f(x,y)$ at $\kappa=k_{\circ}$ is the polynomial $\mathrm{Sing}_{k_{\circ}}(f)\in\mathbb{Q}[x,y]$ defined by $\mathrm{Sing}_{k_{\circ}}(f;x,y):=\lim_{\kappa\to k_{\circ}}(\kappa-k_{\circ})% f(x,y).$ (ii) The regular part of $f(x,y)$ at $\kappa=k_{\circ}$ is the polynomial $\mathrm{Reg}_{k_{\circ}}(f)\in\mathbb{Q}[x,y]$ defined by $\mathrm{Reg}_{k_{\circ}}(f;x,y):=\lim_{\kappa\to k_{\circ}}\left(f(x,y)-\frac{% 1}{\kappa-k_{\circ}}\mathrm{Sing}_{k_{\circ}}(f;x,y)\right).$
Definition 8.8. Let $\boldsymbol{D}\in\mathsf{A}_{t}$. The eigenvalue polynomial of $\boldsymbol{D}$ is the polynomial $\boldsymbol{f}_{\boldsymbol{D}}(x,y)\in\mathbb{C}[x,y]$ that is given in Proposition 8.7.
Definition 2.3. Let $\mathcal{C}$ be a category with subobjects and $d\in v\mathcal{C}$. Then a function $\gamma\colon v\mathcal{C}\to\mathcal{C}$, $a\mapsto\gamma(a)\in\mathcal{C}(a,d)$ is said to be a normal cone with apex $d$ if: (1) whenever $a\subseteq b$, $j(a,b)\gamma(b)=\gamma(a)$; (2) there exists at least one $c\in v\mathcal{C}$ such that $\gamma(c)\colon c\to d$ is an isomorphism.
Definition 3.1. Let $(\mathcal{C},\mathcal{P})$ be a category with subobjects. Then $(\mathcal{C},\mathcal{P})$ is called a semilattice ordered category (abbreviated as so-category in the sequel) if $v\mathcal{P}$ forms a semilattice with respect to the relation $\leq$ defined as: $p\leq q\iff\text{there is an inclusion from }p\text{ to }q$ for any $p,q\in v\mathcal{P}$.
Definition 3.4. A category $\mathcal{C}$ is said to be an inversive category if: (IC 1) $\mathcal{C}$ is an so-category; (IC 2) every inclusion in $\mathcal{C}$ splits uniquely; (IC 3) every morphism in $\mathcal{C}$ admits a unique normal factorisation; (IC 4) every morphism in $\langle\mathcal{C}\rangle$ has an inversive factorisation; (IC 5) for each $c\in v\mathcal{C}$, there is a unique inversive idempotent cone with apex $c$.
Definition 2.6. A functor $F$ between two unambiguous categories $\mathcal{C}$ and $\mathcal{D}$ is said to be a local isomorphism if $F$ is inclusion preserving, fully faithful and for each $c\in v\mathcal{C}$, $F_{|(c)}$ is an isomorphism of the ideal $(c)$ onto $(F(c))$.
Definition 3.5. Let $\mathcal{G}$ be a groupoid and denote by $\mathbf{d}\colon\mathcal{G}\to v\mathcal{G}$ and $\mathbf{r}\colon\mathcal{G}\to v\mathcal{G}$ its domain and codomain maps, respectively. Let $\leq$ be a partial order on $\mathcal{G}$. Then $(\mathcal{G},\leq)$ is called an inductive groupoid if $(v\mathcal{G},\leq)$ is a semilattice and for all $e,f\in v\mathcal{G}$ and all $x,y,u,v\in\mathcal{G}$, the following hold. (OG1) If $u\leq x$, $v\leq y$ and $\mathbf{r}(u)=\mathbf{d}(v)$, $\mathbf{r}(x)=\mathbf{d}(y)$, then $uv\leq xy$. (OG2) If $x\leq y$, then $x^{-1}\leq y^{-1}$. (OG3) If $1_{e}\leq 1_{\mathbf{d}(x)}$, then there exists a unique morphism $e{\downharpoonleft}x\in\mathcal{G}$ (called the restriction of $x$ to $e$) such that $e{\downharpoonleft}x\leq x$ and $\mathbf{d}(e{\downharpoonleft}x)=e$. (OG3${}^{*}$) If $1_{f}\leq 1_{\mathbf{r}(x)}$, then there exists a unique morphism $x{\downharpoonright}f\in\mathcal{G}$ (called the corestriction of $x$ to $f$) such that $x{\downharpoonright}f\leq x$ and $\mathbf{r}(x{\downharpoonright}f)=f$.
Definition 2.8. Given a cross-connection $\Omega=(\Gamma,\Delta;\mathcal{C},\mathcal{D})$, a normal cone $\gamma\in\widehat{\Gamma}$ is said to be linked to $\delta\in\widehat{\Delta}$ if there is a $(c,d)\in v\mathcal{C}\times v\mathcal{D}$ such that $\gamma\in\Gamma(c,d)$ and $\delta=\chi(c,d)(\gamma)$; we then say that the pair $(\gamma,\delta)$ is a linked pair.
Definition 2.5. [24, Section III.1.3] A category $\mathcal{C}$ is said to be a normal category if: (NC 1) $\mathcal{C}$ is a category with subobjects; (NC 2) every inclusion in $\mathcal{C}$ splits; (NC 3) every morphism in $\mathcal{C}$ admits a normal factorisation; (NC 4) for each $c\in v\mathcal{C}$ there exists a normal cone $\mu$ such that $\mu(c)=1_{c}$.
Definition 3.3. Let $\mathcal{C}$ be an so-category and $d\in v\mathcal{C}$. Then a cone is said to be an inversive cone with apex $d$ if: (1) the $M$-set $m_{\gamma}$ is a singleton. (2) for each $c\in v\mathcal{C}$, coim $\gamma(c)=c\wedge m_{\gamma}$.
Definition 1.1. [14] A semigroup $S$ with $0$ is called $0$-simple if its only two-sided ideals are itself and $\{0\}$, and $S^{2}\neq 0$. A semigroup $S$ with $0$ (respectively, without $0$) is completely $0$-simple (completely simple) if • $S$ is $0$-simple (simple) • $S$ has a primitive idempotent, i.e., a non-zero idempotent $e$ such that for every non-zero idempotents $f\in S$, $ef=fe=f\implies e=f$.
Definition 1.3. A semigroup $S$ is said to be regular if every element $x\in S$ has at least one inverse, i.e., an element $x^{\prime}\in S$ such that $xx^{\prime}x=x$ and $x^{\prime}xx^{\prime}=x^{\prime}$.
Definition 1.4. A regular semigroup is said to be fundamental if it cannot be shrunk homomorphically without collapsing its idempotents.
