Definition 3.1 A universe category functor from $({\cal C},p,pt)$ to $({\cal C}^{\prime},p^{\prime},pt^{\prime})$ is a triple ${\bf\Phi}=(\Phi,\phi,\widetilde{\phi})$ where $\Phi$ is a functor ${\cal C}\rightarrow{\cal C}^{\prime}$ and $\phi:\Phi(U)\rightarrow U^{\prime}$, $\widetilde{\phi}:\Phi(\widetilde{U})\rightarrow\widetilde{U}^{\prime}$ are two morphisms such that one has: 1. $\Phi$ takes $pt$ to a final object, 2. $\Phi$ takes the canonical pullbacks based on $p$ to pullbacks, 3. the square $\begin{CD}\Phi(\widetilde{U})@>{\widetilde{\phi}}>{}>\widetilde{U}^{\prime}\\ @V{\Phi(p)}V{}V@V{}V{p^{\prime}}V\\ \Phi(U)@>{\phi}>{}>U^{\prime}\end{CD}$ is a pullback.
Definition 4.3 Let $CC$ be a C-system. A pre-$(\Pi,\lambda)$-structure on $CC$ is a pair of morphisms (natural transformations) of presheaves $\Pi:{\mathcal{O}b}_{2}\rightarrow{\mathcal{O}b}_{1}$ $\lambda:{\widetilde{\mathcal{O}b}}_{2}\rightarrow{\widetilde{\mathcal{O}b}}_{1}$ such that the square $\begin{CD}{\widetilde{\mathcal{O}b}}_{2}@>{\lambda}>{}>{\widetilde{\mathcal{O}% b}}_{1}\\ @V{\partial}V{}V@V{}V{\partial}V\\ {\mathcal{O}b}_{2}@>{\Pi}>{}>{\mathcal{O}b}_{1}\end{CD}$ commutes. A pre-$(\Pi,\lambda)$-structure is called a $(\Pi,\lambda)$-structure if the square (4.2) is a pullback.
Definition 2.1 Let $CC$ be a C-system. We will say that an object $X$ is over an object $Y$ and write $X\geq Y$ if $l(X)\geq l(Y)$ and $Y=ft^{l(X)-l(Y)}(X)$. We say that $X$ is above $Y$ and write $X>Y$ if $X$ is over $Y$ and $l(X)>l(Y)$.
Definition 2.10 Let $CC$ be a C-system and $\Gamma\in CC$. A morphism $a:X\rightarrow Y$ in $CC$ is called a morphism over $\Gamma$ if $X$ and $Y$ are objects over $\Gamma$ and $a\circ p({Y,\Gamma})=p({X,\Gamma})$
Definition 4.1 A Cartmell-Streicher structure on a C-system $CC$ is a collection of data of the form 1. a function ${\bf\Pi}:Ob_{\geq 2}\rightarrow Ob$ such that for any $B\in Ob_{\geq 2}$ one has (a) $ft({\bf\Pi}(B))=\Gamma$, (b) for any $f:\Gamma^{\prime}\rightarrow\Gamma$ one has $f^{*}({\bf\Pi}(B))={\bf\Pi}(f^{*}(B))$, 2. for any $B\in Ob_{\geq 2}$ a morphism $Ap_{B}:A\times_{\Gamma}{\bf\Pi}(B)\rightarrow B$ 3In [9, Definition 1.13, p.71] these morphisms are denoted $eval_{B}$. such that (a) $Ap_{B}$ is a morphism over $A$, (b) for any $f:\Gamma^{\prime}\rightarrow\Gamma$ one has $f^{*}(Ap_{B})=Ap_{f^{*}(B)}$, (c) the function $\lambda inv_{B}:\partial^{-1}({\bf\Pi}(B))\rightarrow\partial^{-1}(B)$ given by $\lambda inv_{B}(s)=p_{A}^{*}(s)\circ Ap_{B}$ is a bijection.
Definition 1.3.1. We say that a CwF supports $\Sigma$-types if it is closed under the following rules: $\dfrac{\begin{array}[]{l}\Gamma\vdash A\,\mathsf{type}\qquad\Gamma.A\vdash B\,% \mathsf{type}\end{array}}{\Gamma\vdash\Sigma AB\,\mathsf{type}}\text{}\qquad% \dfrac{\begin{array}[]{l}\Gamma\vdash a:A\qquad\Gamma\vdash b:B[\mathrm{id},a]% \end{array}}{\Gamma\vdash(a,b):\Sigma AB}\text{}$ $\dfrac{\begin{array}[]{l}\Gamma\vdash p:\Sigma AB\end{array}}{\Gamma\vdash% \mathsf{fst}\,p:A}\text{}\qquad\dfrac{\begin{array}[]{l}\Gamma\vdash p:\Sigma AB% \end{array}}{\Gamma\vdash\mathsf{snd}\,p:B[\mathrm{id},\mathsf{fst}\,p]}\text{}$ where $(\mathsf{fst},\mathsf{snd})$ and $(\llcorner\hskip-1.72pt\lrcorner,\llcorner\hskip-1.72pt\lrcorner)$ are inverses and all four operations are natural in $\Gamma$: $\displaystyle(\Sigma AB)[\sigma]$ $\displaystyle=\Sigma(A[\sigma])(B[\sigma{+}]),$ $\displaystyle(a,b)[\sigma]$ $\displaystyle=(a[\sigma],b[\sigma]),\qquad(\mathsf{fst}\,p)[\sigma]=\mathsf{% fst}(p[\sigma]),\qquad(\mathsf{snd}\,p)[\sigma]=\mathsf{snd}(p[\sigma]).$
Definition 1.1.2. A category with families (CwF) [dybjer-cwf] consists of: (1) A category $\mathsf{Ctx}$ whose objects we call contexts, and whose morphisms we call substitutions. We also write $\Gamma\vdash\mathsf{Ctx}$ to say that $\Gamma$ is a context. (2) A contravariant functor $\mathrm{Ty}:\mathsf{Ctx}{{}^{\mathsf{op}}}\to\mathsf{Set}$. The elements $T\in\mathrm{Ty}(\Gamma)$ are called types over $\Gamma$ (also denoted $\Gamma\vdash T\,\mathsf{type}$). The action $\mathrm{Ty}(\sigma):\mathrm{Ty}(\Gamma)\to\mathrm{Ty}(\Delta)$ of a substitution $\sigma:\Delta\to\Gamma$ is denoted $\llcorner\hskip-1.72pt\lrcorner[\sigma]$, i.e. if $\Gamma\vdash T\,\mathsf{type}$ then $\Delta\vdash T[\sigma]\,\mathsf{type}$. (3) A contravariant functor $\mathrm{Tm}:\left(\int_{\mathsf{Ctx}}\mathrm{Ty}\right){{}^{\mathsf{op}}}\to% \mathsf{Set}$ from the category of elements of $\mathrm{Ty}$ to $\mathsf{Set}$. The elements $t\in\mathrm{Tm}(\Gamma,T)$ are called terms of $T$ (also denoted $\Gamma\vdash t:T$). The action $\mathrm{Tm}(\sigma|T):\mathrm{Tm}(\Gamma,T)\to\mathrm{Tm}(\Delta,T[\sigma])$ of $(\sigma|T):(\Delta,T[\sigma])\to(\Gamma,T)$ is denoted $\llcorner\hskip-1.72pt\lrcorner[\sigma]$, i.e. if $\Gamma\vdash t:T$, then $\Delta\vdash t[\sigma]:T[\sigma]$. (4) A terminal object $()$ of $\mathsf{Ctx}$ called the empty context. (5) A context extension operation: if $\Gamma\vdash\mathsf{Ctx}$ and $\Gamma\vdash T\,\mathsf{type}$, then there is a context $\Gamma.T$, a substitution $\pi:\Gamma.T\to\Gamma$ and a term $\Gamma.T\vdash\xi:T[\pi]$, such that for all $\Delta$, the map $\mathrm{Hom}(\Delta,\Gamma.T)\to\Sigma(\sigma:\mathrm{Hom}(\Delta,\Gamma)).% \mathrm{Tm}(\Delta,T[\sigma]):\tau\mapsto(\pi\tau,\xi[\tau])$ is invertible. We call the inverse $\llcorner\hskip-1.72pt\lrcorner,\llcorner\hskip-1.72pt\lrcorner$. Note that for more precision and less readability, we could write $\pi_{\Gamma,T}$, $\xi_{\Gamma,T}$ and $(\llcorner\hskip-1.72pt\lrcorner,\llcorner\hskip-1.72pt\lrcorner)_{\Gamma,T}$. If $\sigma:\Delta\to\Gamma$, then we will write $\sigma{+}=(\sigma\pi,\xi):\Delta.T[\sigma]\to\Gamma.T$. Sometimes, for clarity, we will use variable names: we write $\Gamma,{\mathbf{x}}:T$ instead of $\Gamma.T$, and $\pi^{{\mathbf{x}}}:(\Gamma,{\mathbf{x}}:T)\to\Gamma$ and $\Gamma,{\mathbf{x}}:T\vdash{\mathbf{x}}:T[\pi^{{\mathbf{x}}}]$ for $\pi$ and $\xi$. Their joint inverse will be called $(\llcorner\hskip-1.72pt\lrcorner,\llcorner\hskip-1.72pt\lrcorner/{\mathbf{x}})$.
Definition 1.4.1. We say that a CwF supports $\Pi$-types if it is closed under the following rules: $\dfrac{\begin{array}[]{l}\Gamma\vdash A\,\mathsf{type}\qquad\Gamma.A\vdash B\,% \mathsf{type}\end{array}}{\Gamma\vdash\Pi AB\,\mathsf{type}}\text{}\qquad% \dfrac{\begin{array}[]{l}\Gamma.A\vdash b:B\end{array}}{\Gamma\vdash\lambda b:% \Pi AB}\text{}\qquad\dfrac{\begin{array}[]{l}\Gamma\vdash f:\Pi AB\end{array}}% {\Gamma.A\vdash\mathsf{ap}f:B}\text{}$ such that $\mathsf{ap}$ and $\lambda$ are inverses and such that all three operations commute with substitution: $\displaystyle(\Pi AB)[\sigma]=\Pi(A[\sigma])(B[\sigma{+}]),\qquad(\lambda b)[% \sigma]=\lambda(b[\sigma{+}]),\qquad(\mathsf{ap}f)[\sigma{+}]=\mathsf{ap}(f[% \sigma])$ We will write $f\,a$ for $(\mathsf{ap}\,f)\left[\mathrm{id},a\right]$.
Definition 1.7.1. A CwF supports glueing if it is closed under the following rules: $\dfrac{\begin{array}[]{l}\Gamma\vdash P\,\mathsf{prop}\\ \Gamma.P\vdash T\,\mathsf{type}\\ \Gamma.P\vdash f:T\to A[\pi]\\ \Gamma\vdash A\,\mathsf{type}\end{array}}{\Gamma\vdash\mathsf{Glue}\left\{A% \leftarrow\left(P\,?\,{T,f}\right)\right\}\,\mathsf{type}}\text{},\qquad\dfrac% {\begin{array}[]{l}\Gamma\vdash\mathsf{Glue}\left\{A\leftarrow\left(P\,?\,{T,f% }\right)\right\}\,\mathsf{type}\\ \Gamma\vdash a:A\\ \Gamma.P\vdash t:T\\ \Gamma.P\vdash ft=a[\pi]:T\end{array}}{\Gamma\vdash\mathsf{glue}\left\{a% \mapsfrom\left(P\,?\,t\right)\right\}:\mathsf{Glue}\left\{A\leftarrow\left(P\,% ?\,{T,f}\right)\right\}}\text{},$ $\dfrac{\begin{array}[]{l}\Gamma\vdash b:\mathsf{Glue}\left\{A\leftarrow\left(P% \,?\,{T,f}\right)\right\}\end{array}}{\Gamma\vdash\mathsf{unglue}\,\left(P\,?% \,f\right)b:A}\text{},$ naturally in $\Gamma$, such that $\displaystyle\mathsf{Glue}\left\{A\leftarrow\left(\top\,?\,{T,f}\right)\right\}$ $\displaystyle=T[{\mathrm{id},\star}],$ $\displaystyle\mathsf{glue}\left\{a\mapsfrom\left(\top\,?\,t\right)\right\}$ $\displaystyle=t[{\mathrm{id},\star}],$ $\displaystyle\mathsf{unglue}\,\left(\top\,?\,f\right)b$ $\displaystyle=f[{\mathrm{id},\star}]\,b,$ $\displaystyle\mathsf{unglue}\,\left(P\,?\,f\right)(\mathsf{glue}\left\{a% \mapsfrom\left(P\,?\,t\right)\right\})$ $\displaystyle=a,$ $\displaystyle\mathsf{glue}\left\{\mathsf{unglue}\,\left(P\,?\,f\right)b% \mapsfrom\left(P\,?\,b[\pi]\right)\right\}$ $\displaystyle=b.$
Definition 1.1.1. Let $\mathcal{C}$ be a category and $A:\mathcal{C}\to\mathsf{Set}$ a functor. Then the category of elements $\int_{\mathcal{C}}A$ is the category whose • objects are pairs $(c,a)$ where $c$ is an object of $\mathcal{C}$ and $a\in A(c)$, • morphisms are pairs $(\varphi|a):(c,a)\to(c^{\prime},a^{\prime})$ where $\varphi:c\to c^{\prime}$ and $a^{\prime}=A(\varphi)(a)$. If the functor $A:\mathcal{C}{{}^{\mathsf{op}}}\to\mathsf{Set}$ is contravariant, we define $\int_{\mathcal{C}}A:=\left(\int_{\mathcal{C}{{}^{\mathsf{op}}}}A\right){{}^{% \mathsf{op}}}$. Thus, its morphisms are pairs $(\varphi|a^{\prime}):(c,a)\to(c^{\prime},a^{\prime})$ where $\varphi:c\to c^{\prime}$ and $a=A(\varphi)(a^{\prime})$.
Definition 2.1.1. A morphism of CwFs $F:\mathcal{C}\to\mathcal{D}$ consists of: (1) A functor $F_{\mathsf{Ctx}}:\mathcal{C}\to\mathcal{D}$, (2) A natural transformation $F_{\mathrm{Ty}}:\mathrm{Ty}_{\mathcal{C}}\to\mathrm{Ty}_{\mathcal{D}}\circ F_{% \mathsf{Ctx}}$, (3) A natural transformation $F_{\mathrm{Tm}}:\mathrm{Tm}_{\mathcal{C}}\to\mathrm{Tm}_{\mathcal{D}}\circ F_{\int}$, where $F_{\int}:\int_{\mathcal{C}}\mathrm{Ty}_{\mathcal{C}}\to\int_{\mathcal{D}}% \mathrm{Ty}_{\mathcal{D}}$ is easily constructed from $F_{\mathsf{Ctx}}$ and $F_{\mathrm{Ty}}$, (4) such that $F_{\mathsf{Ctx}}()=()$, (5) such that $F_{\mathsf{Ctx}}(\Gamma.T)=(F_{\mathsf{Ctx}}\Gamma).(F_{\mathrm{Ty}}T)$, $F_{\mathsf{Ctx}}\pi=\pi$ and $F_{\mathrm{Tm}}\xi=\xi$. The images of a context $\Gamma$, a substitution $\sigma$, a type $T$ and a term $t$ are also denoted $F\Gamma$, $F\sigma$, $FT$ and ${}^{F}t$ respectively. We choose to denote the action of terms differently because CwF morphisms act very differently on types and on terms of the universe: in general $\mathsf{El}\,({}^{F}A)$ will be different from $F(\mathsf{El}\,A)$.
Definition 1.6.1. We say that a CwF supports a universe for $\mathrm{Ty}^{*}$ if it is closed under the following rules: $\dfrac{\begin{array}[]{l}\Gamma\vdash\mathsf{Ctx}\end{array}}{\Gamma\vdash% \mathcal{U}^{*}\,\mathsf{type}}\text{}\qquad\dfrac{\begin{array}[]{l}\Gamma% \vdash T:\mathcal{U}^{*}\end{array}}{\Gamma\vdash\mathsf{El}\,T\,\mathsf{type}% ^{*}}\text{}\qquad\dfrac{\begin{array}[]{l}\Gamma\vdash T\,\mathsf{type}^{*}% \end{array}}{\Gamma\vdash\ulcorner T\urcorner:\mathcal{U}^{*}}\text{}$ where $\mathsf{El}$ and $\ulcorner\llcorner\hskip-1.72pt\lrcorner\urcorner$ are inverses and all three operators commute with substitution: $\mathcal{U}^{*}[\sigma]=\mathcal{U}^{*},\qquad(\mathsf{El}\,T)[\sigma]=\mathsf% {El}(T[\sigma]),\qquad\ulcorner T\urcorner[\sigma]=\ulcorner T[\sigma]\urcorner.$ Note that here, we are switching between term substitution and *-type substitution.
Definition 1.5.1. A CwF supports the identity type if it is closed under the following rules: $\dfrac{\begin{array}[]{l}\Gamma\vdash A\,\mathsf{type}\\ \Gamma\vdash a,b:A\end{array}}{\Gamma\vdash a=_{A}b\,\mathsf{type}}\text{}% \qquad\dfrac{\begin{array}[]{l}\Gamma\vdash a:A\end{array}}{\Gamma\vdash% \mathsf{refl}\,a:a=_{A}a}\text{}\qquad\dfrac{\begin{array}[]{l}\Gamma\vdash a,% b:A\\ \Gamma,{\mathbf{y}}:A,{\mathbf{w}}:(a[\pi^{{\mathbf{y}}}]=_{A[\pi^{{\mathbf{y}% }}]}{\mathbf{y}})\vdash C\,\mathsf{type}\\ \Gamma\vdash e:a=_{A}b\\ \Gamma\vdash c:C[\mathrm{id},a/{\mathbf{y}},\mathsf{refl}\,a/{\mathbf{w}}]\end% {array}}{\Gamma\vdash\mathsf{J}(a,b,{\mathbf{y}}.{\mathbf{w}}.C,e,c):C[\mathrm% {id},b/{\mathbf{y}},e/{\mathbf{w}}]}\text{}$ such that all three operations commute with substitution: $\displaystyle(a=_{A}b)[\sigma]$ $\displaystyle=\left(a[\sigma]=_{A[\sigma]}b[\sigma]\right)$ $\displaystyle(\mathsf{refl}\,a)[\sigma]$ $\displaystyle=\mathsf{refl}\,(a[\sigma])$ $\displaystyle\mathsf{J}(a,b,{\mathbf{y}}.{\mathbf{w}}.C,p,c)[\sigma]$ $\displaystyle=\mathsf{J}(a[\sigma],b[\sigma],{\mathbf{y}}.{\mathbf{w}}.C[% \sigma\pi^{{\mathbf{y}}}\pi^{{\mathbf{w}}},{\mathbf{y}}/{\mathbf{y}},{\mathbf{% w}}/{\mathbf{w}}],p[\sigma],c[\sigma])$ and such that $\mathsf{J}(a,a,{\mathbf{y}}.{\mathbf{w}}.C,\mathsf{refl}\,a,c)=c$.
Definition 1.8.1. A CwF supports welding if it is closed under the following rules: $\dfrac{\begin{array}[]{l}\Gamma\vdash P\,\mathsf{prop}\\ \Gamma,{\mathbf{p}}:P\vdash T\,\mathsf{type}\\ \Gamma,{\mathbf{p}}:P\vdash f:A[\pi]\to T\\ \Gamma\vdash A\,\mathsf{type}\end{array}}{\Gamma\vdash\mathsf{Weld}\left\{A\to% \left({\mathbf{p}}:P\,?\,{T,f}\right)\right\}\,\mathsf{type}}\text{},\qquad% \dfrac{\begin{array}[]{l}\Gamma\vdash\mathsf{Weld}\left\{A\to\left({\mathbf{p}% }:P\,?\,{T,f}\right)\right\}\,\mathsf{type}\\ \Gamma\vdash a:A\end{array}}{\Gamma\vdash\mathsf{weld}\,\left({\mathbf{p}}:P\,% ?\,f\right)a:\mathsf{Weld}\left\{A\to\left({\mathbf{p}}:P\,?\,{T,f}\right)% \right\}}\text{},$ $\dfrac{\begin{array}[]{l}\Gamma,{\mathbf{y}}:\mathsf{Weld}\left\{A\to\left({% \mathbf{p}}:P\,?\,{T,f}\right)\right\}\vdash C\,\mathsf{type}\\ \Gamma,{\mathbf{p}}:P,{\mathbf{y}}:T\vdash d:C[\pi^{{\mathbf{p}}}{+}]\\ \Gamma,{\mathbf{x}}:A\vdash c:C[\pi^{{\mathbf{x}}},\mathsf{weld}\,\left({% \mathbf{p}}:P[\pi^{{\mathbf{x}}}{+}]\,?\,f[\pi^{{\mathbf{x}}}{+}]\right){% \mathbf{x}}/{\mathbf{y}}]\\ \Gamma,{\mathbf{p}}:P,{\mathbf{x}}:A[\pi^{{\mathbf{p}}}]\vdash d[\pi^{{\mathbf% {x}}},f[\pi^{{\mathbf{x}}}]\,{\mathbf{x}}/{\mathbf{y}}]=c[\pi^{{\mathbf{p}}}{+% }]:C[\pi^{{\mathbf{p}}}\pi^{{\mathbf{x}}},f[\pi^{{\mathbf{x}}}]\,{\mathbf{x}}/% {\mathbf{y}}]\\ \Gamma\vdash b:\mathsf{Weld}\left\{A\to\left({\mathbf{p}}:P\,?\,{T,f}\right)% \right\}\end{array}}{\Gamma\vdash\mathsf{ind}_{\mathsf{Weld}}({\mathbf{y}}.C,% \left({\mathbf{p}}:P\,?\,{\mathbf{y}}.d\right),{\mathbf{x}}.c,b):C[\mathrm{id}% ,b/{\mathbf{y}}]}\text{}$ naturally in $\Gamma$, such that $\displaystyle\mathsf{Weld}\left\{A\to\left({\mathbf{p}}:\top\,?\,{T,f}\right)\right\}$ $\displaystyle=T[\mathrm{id},\star/{\mathbf{p}}],$ $\displaystyle\mathsf{weld}\,\left({\mathbf{p}}:\top\,?\,f\right)a$ $\displaystyle=f[\mathrm{id},\star/{\mathbf{p}}]a,$ $\displaystyle\mathsf{ind}_{\mathsf{Weld}}({\mathbf{y}}.C,\left({\mathbf{p}}:% \top\,?\,{\mathbf{y}}.d\right),{\mathbf{x}}.c,b)$ $\displaystyle=d[\mathrm{id},\star/{\mathbf{p}},b/{\mathbf{y}}],$ $\displaystyle\mathsf{ind}_{\mathsf{Weld}}({\mathbf{y}}.C,\left({\mathbf{p}}:P% \,?\,{\mathbf{y}}.d\right),{\mathbf{x}}.c,\mathsf{weld}\,\left({\mathbf{p}}:P% \,?\,f\right)a)$ $\displaystyle=c[\mathrm{id},a/{\mathbf{x}}].$
Definition 5. Suppose that $\pazocal{P}=\pazocal{T}(\pazocal{X})/(\pazocal{R})$ and $\pazocal{Q}=\pazocal{T}(\pazocal{Y})/(\pazocal{S})$ are two operads. The almost composite product of $\pazocal{P}$ and $\pazocal{Q}$, denoted $\pazocal{P}\triangleleft\pazocal{Q}$, is defined as $\pazocal{P}\triangleleft\pazocal{Q}:=\pazocal{P}\bigvee\pazocal{Q}/(\alpha(% \beta_{1},\ldots,\beta_{k})\colon\alpha\in\pazocal{Y},\beta_{i}\in\pazocal{X}).$
Definition 2. The Lie filtration $F^{\bullet}\operatorname{\mathbf{PreLie}}$ of the operad of pre-Lie algebras is defined as the filtration by powers of the ideal generated by the Lie bracket $[-,-]$. In other words, $F^{k}\operatorname{\mathbf{PreLie}}$ is the span of tree tensors in which at least $k$ vertices are labelled with $[-,-]$.
Definition 8. Let $\pazocal{P}=\pazocal{T}(\pazocal{X})/(\pazocal{R})$ and $\pazocal{Q}=\pazocal{T}(\pazocal{Y})/(\pazocal{S})$ be two operads, and let $\pazocal{O}$ be an operad of the form $\pazocal{O}:=\pazocal{P}\bigvee\pazocal{Q}/(\alpha(\beta_{1},\ldots,\beta_{k})% -f(\alpha(\beta_{1},\ldots,\beta_{k}))\colon\alpha\in\pazocal{Y},\beta_{i}\in% \pazocal{X}),$ where $f\colon\pazocal{Y}\circ\pazocal{X}\to\pazocal{P}\bigvee\pazocal{Q}$ is a linear map whose image is contained in the right ideal generated by $\pazocal{X}$. The map $f$ is said to be an almost distributive law between $\pazocal{P}$ and $\pazocal{Q}$ if for each $n$ we have an isomorphism of $\mathbb{S}$-modules $(\pazocal{P}\triangleleft\pazocal{Q})(n)\cong\pazocal{O}(n).$
Definition 11. The operad of pre-Lie commutative algebras is generated by a symmetric binary operation $-\circ-$ and a binary operation $-\cdot-$ without any symmetry satisfying the following relations: $\displaystyle(a_{1}\circ a_{2})\circ a_{3}=a_{1}\circ(a_{2}\circ a_{3}),$ $\displaystyle(a_{1}\cdot a_{2})\cdot a_{3}-a_{1}\cdot(a_{2}\cdot a_{3})=(a_{1}% \cdot a_{3})\cdot a_{2}-a_{1}\cdot(a_{3}\cdot a_{2}),$ $\displaystyle(a_{1}\circ a_{2})\cdot a_{3}=(a_{1}\cdot a_{3})\circ a_{2}+a_{1}% \circ(a_{2}\cdot a_{3}).$
Definition 1. The operad $\operatorname{\mathbf{FMan}}$ of $F$-manifold algebras is generated by a symmetric binary operation $-\circ-$ and a skew-symmetric binary operation $[-,-]$ satisfying the associativity relation and the Jacobi identity $\displaystyle(a_{1}\circ a_{2})\circ a_{3}=a_{1}\circ(a_{2}\circ a_{3}),$ $\displaystyle,a_{3}]+[[a_{2},a_{3}],a_{1}]+[[a_{3},a_{1}],a_{2}]=0,$ and related to each other by the Hertling–Manin relation $\displaystyle[a_{1}\circ a_{2},a_{3}\circ a_{4}]=[a_{1}\circ a_{2},a_{3}]\circ a% _{4}+[a_{1}\circ a_{2},a_{4}]\circ a_{3}+a_{1}\circ[a_{2},a_{3}\circ a_{4}]+a_% {2}\circ[a_{1},a_{3}\circ a_{4}]-\\ \displaystyle(a_{1}\circ a_{3})\circ[a_{2},a_{4}]-(a_{2}\circ a_{3})\circ[a_{1% },a_{4}]-(a_{2}\circ a_{4})\circ[a_{1},a_{3}]-(a_{1}\circ a_{4})\circ[a_{2},a_% {3}].$
Definition 4.5.6. Denote by $\operatorname{res}^{l}$ the morphism $\Delta^{t}_{k+1}\rightarrow\Delta^{t}_{k}$ given by the diagram $\xymatrix{1\ar@{-}[d]&2\ar@{-}[d]&3\ar@{-}[d]&\ldots&l-1\ar@{-}[d]&l&l+1\ar@{-% }[dl]&l+2\ar@{-}[dl]&\ldots&k+1\ar@{-}[dl]\\ 1&2&3&\ldots&l-1&l&l+1&\ldots&k}$
Definition 4.6.1. The category ${\it O}^{\mathfrak{p}}_{t,V}$ is defined to be the full subcategory of $\operatorname{Mod}_{\mathcal{U}({\mathfrak{gl}}(V))}$ whose objects $M$ satisfy the following conditions: • $M$ is a Harish-Chandra module for the pair $({\mathfrak{gl}}(V),{\operatorname{Aut}}(V,v_{0}))$, i.e. the action of the Lie subalgebra $\mathfrak{u}_{\mathfrak{p}}^{+}\oplus\mathfrak{gl}(U)$ on $M$ integrates to the action of the mirabolic subgroup ${\operatorname{Aut}}(V,v_{0})$, with quotient $GL(U)$ acting polynomially (i.e. $M$ . • $M$ is a finitely generated $\mathcal{U}({\mathfrak{gl}}(V))$-module. • $\operatorname{Id}_{V}\in{\mathfrak{gl}}(V)$ acts by $t\operatorname{Id}_{M}$ on $M$.
Definition 3.4.1. A Frobenius object in ${\mathcal{A}}$ is a tuple $(A,m,\Delta,\eta)$ where $A$ is an object of ${\mathcal{A}}$, and $m:A\otimes A\to A$ and $\Delta:A\to A\otimes A$ and $\eta:A\to{\mathbb{C}}$ are morphisms in ${\mathcal{A}}$, such that: • $m$ defines an associative commutative algebra structure on $A$. • $(\Delta,\eta)$ defines a counital coassociative cocommutative coalgebra structure on $A$. • $m\Delta=\operatorname{Id}$ and $\Delta m=(m\otimes 1)(1\otimes\Delta)$.
Definition 5.2. A metric space is a pair $(X,a)$ consisting of a set $X$ and a map $a\colon X\times X\to[0,1]$ satisfying $\displaystyle 0\geqslant a(x,x)$ and $\displaystyle a(x,y)\oplus a(y,z)\geqslant a(x,z),$ for all $x,y,z\in X$. A map $f\colon X\to Y$ between metric spaces $(X,a)$, $(Y,b)$ is called non-expansive whenever $a(x,x^{\prime})\geqslant b(f(x),f(x^{\prime})),$ for all $x,x^{\prime}\in X$. Metric spaces and non-expansive maps form the category $\mathsf{Met}$.
Definition 3.13. Let $\overline{\mathsf{A}}$ be the $\aleph_{1}$-ary quasivariety obtained by adding one $\aleph_{1}$-ary operation symbol to the theory of $\mathsf{A}$ (see Remark 3.1). Then $[0,1]$ becomes an object of $\overline{\mathsf{A}}$ by interpreting this operation symbol by $\delta=\lim\cdot\gamma\cdot\mu\colon[0,1]^{\mathds{N}}\to[0,1].$
Definition 2.1. A partially ordered compact space $(X,\leq,\tau)$ consists of a set $X$, a partial order $\leq$ on $X$ and a compact topology $\tau$ on $X$ so that $\{(x,y)\in X\times X\mid x\leq y\}$ is closed in $X\times X$ with respect to the product topology.
Definition 3.14. Let $\overline{\mathsf{A}}_{0}$ be the subcategory of $\overline{\mathsf{A}}$ defined by those objects $A$ where the cone of all morphisms from $A$ to $[0,1]$ is point-separating.
Definition 5.8. A partially ordered compact space $X$ is called metrisable whenever there is a metric on $X$ which induces the order and the topology of $X$. We denote the full subcategory of $\mathsf{PosComp}$ defined by all metrisable spaces by $\mathsf{PosComp}_{\mathrm{met}}$.
Definition 1. Let $f$ and $g$ be a pair of morphisms from a category. We say that “ $f$ has the left lifting property wrt $g$ ”, “ $f$ is (left) orthogonal to $g$ ”, and write $f\,\rightthreetimes\,g$, iff for each $i:A\longrightarrow X$, $j:B\longrightarrow Y$ such that $ig=fj$ (“the square commutes”), there is $j^{\prime}:B\longrightarrow X$ such that $fj^{\prime}=i$ and $j^{\prime}g=j$ (“there is a diagonal making the diagram commute”).
1.2 Definition. An object $A$ in a topos $\gamma:\mathcal{E}\to\mathcal{S}$ is a Galois object if: i) The canonical map $A\times\gamma^{*}Aut(A)\buildrel{}\over{\longrightarrow}A\times A$, described by $(a,\,h)\mapsto(a,\,h(a))$, is an isomorphism. ii) $A$ is connected and $A\to 1$ is epimorphic. In particular, $A$ is a connected locally constant object. It follows: iii) “$Z\subset A\hskip 17.2pt\Rightarrow\hskip 17.2ptZ=\emptyset\hskip 8.6ptor\hskip 8% .6ptZ=A$”.
1.1 Definition. Let $\mathcal{E}\buildrel{\gamma}\over{\longrightarrow}\mathcal{S}$ be a topos furnished with a surjective point, that is, a geometric morphism $\mathcal{S}\buildrel{p}\over{\longrightarrow}\mathcal{E}$ whose inverse image functor reflects isomorphisms. Then, an object $A$ is a Galois object if: i) There exists $a\in p^{*}A$ such that the map $Aut(A)\buildrel{a^{*}}\over{\longrightarrow}p^{*}A$, defined by $a^{*}(h)=p^{*}(h)(a)$ is a bijection (the same holds then for any other $b\in p^{*}A$). ii) $A$ is connected and $A\to 1$ is epimorphic.
Definition 2.5. For an object $(A,\alpha,\phi)$ of $(C_{0}(X),\gamma)\downarrow\mathcal{A}(G)$ we define $\operatorname{Fix}A=\operatorname{Fix}(A,\alpha,\phi)$ to be the norm closure of $E(A_{0})$ in $M(A)$.
Definition 3.3 The first differentials $d^{1,1}:C^{1,1}_{f}(A;A)\rightarrow C^{2,1}_{f}(A;A)$ and $d^{1,2}:C^{1,1}_{f}(A;A)\rightarrow C^{2,2}_{f}(A;A)$ are defined, respectively, by $\displaystyle d^{1,1}(h)$ $\displaystyle=$ $\displaystyle\mu(h\otimes|)+\mu(|\otimes h)-h\mu,$ $\displaystyle d^{1,2}(h)$ $\displaystyle=$ $\displaystyle(h\otimes|)\Delta+(|\otimes h)\Delta-\Delta h.$ Then define $D_{1}:C^{1}_{f}(A;A)\rightarrow C^{2}_{f}(A;A)$ by $D_{1}=d^{1,1}-d^{1,2}$.
Definition 3.10 Define $d^{4,2}$ as follows: $\displaystyle d^{4,2}(\zeta_{1},\zeta_{2},\zeta_{3},\zeta_{4})$ $\displaystyle=$ $\displaystyle\Delta\zeta_{1}+\zeta_{2}({|}\otimes{|}\otimes\mu)+(\mu\otimes{|}% )({|}\otimes\zeta_{2})$ $\displaystyle-(\zeta_{1}\otimes{|})({|}\otimes{|}\otimes{|}\otimes\Delta)-% \zeta_{2}(\mu\otimes{|}\otimes{|})-\zeta_{2}({|}\otimes\mu\otimes{|}).$
Definition 3.4 Define the second differentials by: $\displaystyle d^{2,1}(\phi_{1},\phi_{2})=d^{2,1}(\phi_{1})$ $\displaystyle=$ $\displaystyle\mu(\phi_{1}\otimes|)+\phi_{1}(\mu\otimes|)-\mu(|\otimes\phi_{1})% -\phi_{1}(|\otimes\mu),$ $\displaystyle d^{2,2}_{(1)}(\phi_{1},\phi_{2})$ $\displaystyle=$ $\displaystyle\Delta\phi_{1}+\phi_{2}\mu-(\phi_{1}\otimes|)(|\otimes\Delta)-(% \mu\otimes|)(|\otimes\phi_{2}),$ $\displaystyle d^{2,2}_{(2)}(\phi_{1},\phi_{2})$ $\displaystyle=$ $\displaystyle\Delta\phi_{1}+\phi_{2}\mu-(|\otimes\phi_{1})(\Delta\otimes|)-(|% \otimes\mu)(\phi_{2}\otimes|),$ $\displaystyle d^{2,3}(\phi_{1},\phi_{2})=d^{2,3}(\phi_{2})$ $\displaystyle=$ $\displaystyle(\phi_{2}\otimes|)\Delta+(\Delta\otimes|)\phi_{2}-(|\otimes\phi_{% 2})\Delta-(|\otimes\Delta)\phi_{2}.$
Definition 3.14 The Frobenius $n$-coboundary, cocycle, and cohomology groups are defined by: $\displaystyle B^{n}_{f}(A;A)$ $\displaystyle=$ $\displaystyle{\rm Image}(D_{n-1}),$ $\displaystyle Z^{n}_{f}(A;A)$ $\displaystyle=$ $\displaystyle{\rm Ker}(D_{n}),$ $\displaystyle H^{n}_{f}(A;A)$ $\displaystyle=$ $\displaystyle Z^{n}_{f}(A;A)/B^{n}_{f}(A;A)$ for $n=1,2,3,4$.
Definition 3.7 Define the third differentials by: $\displaystyle d^{3,1}(\xi_{1},\xi_{2},\xi_{3})$ $\displaystyle=$ $\displaystyle\mu(\xi_{1}\otimes|)+\xi_{1}(|\otimes\mu\otimes|)+\mu(|\otimes\xi% _{1})-\xi_{1}(\mu\otimes|)-\xi_{1}(|\otimes\mu),$ $\displaystyle d^{3,2}(\xi_{1},\xi_{2},\xi_{3})$ $\displaystyle=$ $\displaystyle\Delta\xi_{1}+\xi_{2}(|\otimes\mu)+(\mu\otimes|)(|\otimes\xi_{2})% -\xi_{2}(\mu\otimes|)-(\xi_{1}\otimes|)(|^{\otimes 2}\otimes\Delta),$ $\displaystyle d^{3,3}(\xi_{1},\xi_{2},\xi_{3})$ $\displaystyle=$ $\displaystyle\xi_{3}\mu+(|\otimes\Delta)\xi_{2}+(|\otimes\xi_{2})(\Delta% \otimes|)-(\Delta\otimes|)\xi_{2}-(|^{\otimes 2}\otimes\mu)(\xi_{3}\otimes|),$ $\displaystyle d^{3,4}(\xi_{1},\xi_{2},\xi_{3})$ $\displaystyle=$ $\displaystyle(\xi_{3}\otimes|)\Delta+(|\otimes\Delta\otimes|)\xi_{3}+(|\otimes% \xi_{3})\Delta-\xi_{1}(\mu\otimes|)-(|\otimes\Delta)\xi_{3}.$
Definition 4.3. A topological spaceoid $({\mathscr{E}},\pi,{\mathscr{X}})$ is a saturated unital rank-one Fell bundle over the product involutive topological category ${\mathscr{X}}:=\Delta_{X}\times{\mathscr{R}}_{\mathcal{O}}$.
Definition 4.4. A morphism of spaceoids $({\mathscr{E}}_{1},\pi_{1},{\mathscr{X}}_{1})\xrightarrow{(f,\mathcal{F})}({% \mathscr{E}}_{2},\pi_{2},{\mathscr{X}}_{2})$ is a pair $(f,\mathcal{F})$ where • $f:=(f_{\Delta},f_{\mathscr{R}})$ with $f_{\Delta}:\Delta_{1}\to\Delta_{2}$ a continuous map of topological spaces and $f_{\mathscr{R}}:{\mathscr{R}}_{1}\to{\mathscr{R}}_{2}$ an isomorphism of equivalence relations; • $\mathcal{F}:f^{\bullet}({\mathscr{E}}_{2})\to{\mathscr{E}}_{1}$ is a fiberwise linear $*$-functor such that $\pi_{1}\circ{\mathscr{F}}=(\pi_{2})^{f}$, where $(f^{\bullet}({\mathscr{E}}_{2}),\pi_{2}^{f},{\mathscr{X}}_{1})$ denotes an $f$-pull-back of $({\mathscr{E}}_{2},\pi_{2},{\mathscr{X}}_{2})$.
Definition 4.1. Two unital $\operatorname{C}^{*}$-algebras ${\mathscr{A}},{\mathscr{B}}$ are said to be strongly Morita equivalent if there exists an imprimitivity bimodule ${}_{\mathscr{A}}X_{\mathscr{B}}$.
Definition 10. A Cauchy structure is a premetric space $R$ together with the following structure. $\displaystyle\operatorname{\mathsf{rat}}:$ $\displaystyle\mathbf{Q}\to R$ $\displaystyle\operatorname{\mathsf{lim}}:$ $\displaystyle\mathcal{C}_{R}\to R$ $\displaystyle\operatorname{\mathsf{eq}}:$ $\displaystyle\prod_{u,v:R}\left(\forall(\varepsilon:\mathbf{Q}_{+}).u\sim_{% \varepsilon}v\right)\to u=_{R}v$ $\displaystyle\prod_{q,r:\mathbf{Q}}\prod_{\varepsilon:\mathbf{Q}_{+}}(-% \varepsilon<q-r<\varepsilon)\to\operatorname{\mathsf{rat}}(q)\sim_{\varepsilon% }\operatorname{\mathsf{rat}}(r)$ $\displaystyle\prod_{q:\mathbf{Q}}\prod_{y:\mathcal{C}_{R}}\prod_{\varepsilon,% \delta:\mathbf{Q}_{+}}\operatorname{\mathsf{rat}}(q)\sim_{\varepsilon}y_{% \delta}\to\operatorname{\mathsf{rat}}(q)\sim_{\varepsilon+\delta}\operatorname% {\mathsf{lim}}(y)$ $\displaystyle\prod_{x:\mathcal{C}_{R}}\prod_{r:\mathbf{Q}}\prod_{\varepsilon,% \delta:\mathbf{Q}_{+}}x_{\delta}\sim_{\varepsilon}\operatorname{\mathsf{rat}}(% r)\to\operatorname{\mathsf{lim}}(x)\sim_{\varepsilon+\delta}\operatorname{% \mathsf{rat}}(r)$ $\displaystyle\prod_{x:\mathcal{C}_{R}}\prod_{y:\mathcal{C}_{R}}\prod_{% \varepsilon,\delta,\eta:\mathbf{Q}_{+}}x_{\delta}\sim_{\varepsilon}y_{\eta}\to% \operatorname{\mathsf{lim}}(x)\sim_{\varepsilon+\delta+\eta}\operatorname{% \mathsf{lim}}(y)$ A morphism of Cauchy structures from $R$ to $S$ is a map $f:R\to S$ and a family of maps $g_{\varepsilon,u,v}:u\sim_{\varepsilon}v\to f(u)\sim_{\varepsilon}f(v)$ that preserve $\operatorname{\mathsf{rat}}$, $\operatorname{\mathsf{lim}}$ and $\operatorname{\mathsf{eq}}$ in the obvious sense. Explicitly: $\displaystyle\operatorname{\mathsf{CS-hom}}(R,S)\coloneqq$ $\displaystyle\sum_{f:R\to S}\quad\sum_{g:\prod\limits_{\varepsilon:\mathbf{Q}_% {+}}\prod\limits_{u,v:R}u\sim_{\varepsilon}v\,\to\,f(u)\sim_{\varepsilon}f(v)}$ $\displaystyle\left(\prod_{q:\mathbf{Q}}f(\operatorname{\mathsf{rat}}(q))=% \operatorname{\mathsf{rat}}(q)\right)\times\left(\prod_{x:\mathcal{C}_{R}}f(% \operatorname{\mathsf{lim}}(x))=\operatorname{\mathsf{lim}}(x)\right)$ $\displaystyle\times\left(\prod_{u,v:R}\enskip\prod_{p:\forall(\varepsilon:% \mathbf{Q}_{+}).u\sim_{\varepsilon}v}f^{*}(\operatorname{\mathsf{eq}}(u,v,p))=% \operatorname{\mathsf{eq}}(u,v,p)\right).$
Definition 16. Given a type $A:\mathcal{U}$, a type family $B:A\to\mathcal{U}$, a path $p:x=_{A}y$ in $A$, and elements $u:B(x)$ and $v:B(y)$, the type of dependent paths $u=_{p}^{B}v$ is defined by induction on $p$: if $p$ is $\operatorname{\mathsf{refl}}(x)$ then $(u=_{\operatorname{\mathsf{refl}}(x)}^{B}v)\coloneqq(u=_{B(x)}v)$. We refer to elements of $u=_{p}^{B}v$ as paths from $u$ to $v$ over $p$.
Definition 2. Given a function $f:C\to A$, we say $f$ is an embedding, and write $f:C\hookrightarrow A$, if one of these two equivalent conditions holds: $\displaystyle\prod_{a:A}\mathsf{isProp}\left(\sum_{c:C}fc=a\right)$ $\displaystyle\prod_{c,c^{\prime}:C}\mathsf{isEquiv}(\mathsf{ap}_{f,c,c^{\prime% }})$ The second condition expresses that $\mathsf{ap}_{f,c,c^{\prime}}:(c=_{C}c^{\prime})\to(fc=_{A}fc^{\prime})$ is an equivalence for all $c,c^{\prime}:C$.
Definition 24 (Escardo and Simpson [2]). The type ${\mathbf{R}_{\mathbf{E}}}$ of Euclidean reals is the smallest Cauchy complete subset of the Dedekind reals containing the rational numbers.
Definition 8. If $R$ is a premetric space, then $x:\mathbf{Q}_{+}\to R$ is a Cauchy approximation if $\operatorname{\mathsf{isCauchy}}(x)\coloneqq\forall(\delta,\varepsilon:\mathbf% {Q}_{+}).x_{\delta}\sim_{\delta+\varepsilon}x_{\varepsilon}.$ We define the type $\mathcal{C}_{R}$ of Cauchy approximations in $R$ as $\mathcal{C}_{R}\coloneqq\sum_{x:\mathbf{Q}_{+}\to R}\operatorname{\mathsf{% isCauchy}}(x).$ Since being a Cauchy approximation is a property rather than structure, we conflate elements of $\mathcal{C}_{R}$ with their underlying map $\mathbf{Q}_{+}\to R$.
Definition 13. Given $\displaystyle A$ $\displaystyle:{\mathbf{R}_{\mathbf{C}}}\to\mathcal{U}$ $\displaystyle B$ $\displaystyle:\prod_{u,v:{\mathbf{R}_{\mathbf{C}}}}A(u)\to A(v)\to\prod_{% \varepsilon:\mathbf{Q}_{+}}(u\sim_{\varepsilon}v)\to\Omega$ we obtain a natural premetric on $\sum_{u:{\mathbf{R}_{\mathbf{C}}}}A(u)$, given by the relation: $(u,a)\sim_{\varepsilon}(v,b)\coloneqq\sum_{\zeta:u\sim_{\varepsilon}v}B(u,v,a,% b,\varepsilon,\zeta)$
Definition 1. By a subtype of $A:\mathcal{U}$ we mean a map $B:A\to\Omega$. For $a:A$ we define $(a\in B)\coloneqq B(a)$.
Definition 11. ${\mathbf{R}_{\mathbf{C}}}$ is a homotopy-initial Cauchy structure, in the sense that for any other Cauchy structure $S$, the type of Cauchy structure morphisms from ${\mathbf{R}_{\mathbf{C}}}$ to $S$ is contractible.
Definition 7. A premetric on a type $R:\mathcal{U}$ is a relation $\cdot\sim_{\cdot}\cdot:\mathbf{Q}_{+}\times R\times R\to\Omega.$ We will often write $R$ for the premetric space $(R,\sim)$, leaving the premetric $\sim$ implicit. In the case that $u\sim_{\varepsilon}v$ holds (where $\varepsilon:\mathbf{Q}_{+}$ and $u,v:R$) we say that $u$ and $v$ are $\varepsilon$-close.
Definition 18. $x=(L,U)$ is a Dedekind cut if it satisfies the following conditions. 1. inhabited: $\exists(q:\mathbf{Q}).q<x$ and $\exists(r:Q).x<r$. 2. rounded: For all $q:\mathbf{Q}$, $\displaystyle q<x$ $\displaystyle\Leftrightarrow\exists(q^{\prime}:\mathbf{Q}).(q<q^{\prime})\land% (q^{\prime}<x)\qquad\text{and}$ $\displaystyle x<r$ $\displaystyle\Leftrightarrow\exists.(r^{\prime}:\mathbf{Q}).(r^{\prime}<r)% \land(x<r^{\prime}).$ 3. transitivity: $(q<x)\land(x<r)\Rightarrow(q<r)$ for all $q:\mathbf{Q}$. 4. located: $(q<r)\Rightarrow(q<x)\lor(x<r)$ for all $q,r:\mathbf{Q}$. We let $\operatorname{isCut}(L,U)$ denote the conjunction of these conditions. The type of Dedekind reals is ${\mathbf{R}_{\mathbf{D}}}\coloneqq\left\{(L,U):(\mathbf{Q}\to\Omega)\times(% \mathbf{Q}\to\Omega)\mid\operatorname{isCut}(L,U)\right\}.$
Definition 9. If $x$ is a Cauchy approximation in a premetric space $R$, then we say that $u:R$ is a limit of $x$ if $\forall(\varepsilon,\theta:\mathbf{Q}_{+}).x_{\varepsilon}\sim_{\varepsilon+% \theta}u.$ If every Cauchy approximation has a limit, we say that $R$ is Cauchy complete.
