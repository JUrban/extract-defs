Definition 4.6 (The categorified category of lists $(\mathsf{Cat}/\mathbb{D})^{\Rightarrow}$). Fix a double category $\mathbb{D}$. An object of the categorified category of lists $(\mathsf{Cat}/\mathbb{D})^{\Rightarrow}$ is a double functor $\tau:\mathsf{C}\to\mathbb{D}$ where $\mathsf{C}$ is a small category thought of as a discrete double category. A morphism in $(\mathsf{C}/\mathbb{D})^{\Rightarrow}$ from a double functor $\tau:\mathsf{C}\to\mathbb{D}$ to a double functor $\tau^{\prime}:\mathsf{C}^{\prime}\to\mathbb{D}$ is a commuting triangle of the form $\xy(-10,10)*+{\mathsf{C}}="1";(10,10)*+{\mathsf{C}^{\prime}}="2";(0,-2)*+{% \mathbb{D}}="3";{\ar@{->}_{\tau}"1";"3"};{\ar@{->}^{\varphi}"1";"2"};{\ar@{->}% ^{\tau^{\prime}}"2";"3"};{\ar@{<=}_{\scriptstyle\Phi}(4,6)*{};(-0.4,4)*{}};\endxy$ where $\varphi:\mathsf{C}\to\mathsf{C}^{\prime}$ is a double functor and $\Phi:\tau\Rightarrow\tau^{\prime}\circ\varphi$ is a vertical transformation. Given a pair of composable morphisms $(\varphi,\Phi):(\mathsf{C}\xrightarrow{\tau}\mathbb{D})\to(\mathsf{C}^{\prime}% \xrightarrow{\tau^{\prime}}\mathbb{D})$ and $(\psi,\Psi):(\mathsf{C}^{\prime\prime}\xrightarrow{\tau^{\prime\prime}}\mathbb% {D})$ their composite is defined by pasting of the 2-commuting triangles. That is, the composite is the pair $(\psi\circ\varphi,\Xi)$ where $\Xi=(\Psi\circ\varphi)\circ_{v}\Phi.$ Here $\Psi\circ\varphi:\tau\Rightarrow\tau^{\prime\prime}$ is the whiskering of the vertical transformation with a double functor and $\circ_{v}$ denotes the vertical composition of vertical transformations (Remark 2.30).
Definition A.5. A vector field $X$ on a manifold with corners $M$ is a section of its tangent bundle $TM\to M$. An integral curve of a vector field $X$ is a smooth map $x:I\to M$ where $I\subset\mathbb{R}$ is an interval, which may be open or closed, bounded or unbounded. We require that $\frac{d}{dt}x=X(x(t))$ for all $t\in I$.
Definition 5.10 (The double category $\mathsf{HySSub}^{\Box}$ of hybrid surjective submersions). The objects of the double category $\mathsf{HySSub}^{\Box}$ are hybrid surjective submersions. The horizontal 1-morphisms are morphisms of surjective submersions.The vertical 1-morphisms are interconnection morphisms (Definition 5.6). The 2-cells of $\mathsf{SSub}^{\Box}$ are commuting squares $\xy(-10,10)*+{c}="1";(10,10)*+{a}="2";(-10,-5)*+{d}="3";(10,-5)*+{b}="4";{\ar@% {<-}^{\mu}"1";"2"};{\ar@{->}_{g}"1";"3"};{\ar@{->}^{f}"2";"4"};{\ar@{<-}_{\nu}% "3";"4"};\endxy$ in the category $\mathsf{HySSub}$ of hybrid surjective submersions, where $\mu,\nu$ are maps of hybrid submersions and $f$, $g$ are the interconnection morphisms. In particular the category of objects of the double category $\mathsf{HySSub}^{\Box}$ is the category $\mathsf{HySSub}^{\mathsf{int}}$ of hybrid surjective submersions and interconnection morphisms.
Definition 2.36. Suppose $\varphi:a\to b$ is an interconnection morphism (Definition 2.21). Then $\varphi$ induces a linear map $\varphi^{*}:\mathsf{Crl}(b)\to\mathsf{Crl}(a)$. It is defined by $\varphi^{*}F:=T(\varphi_{\mathsf{st}})^{-1}\circ F\circ\varphi_{\mathsf{tot}}$ for all open systems $F\in\mathsf{Crl}(b)$.
Definition 2.14. 2-cells in a double category $\mathbb{D}$ of the form (2.13) are called globular.
Definition 2.49 (The category $(\mathsf{FinSet}/\mathsf{C})^{\Leftarrow}$). The objects of the category $(\mathsf{FinSet}/\mathsf{C})^{\Leftarrow}$ are finite lists $\tau:X\to\mathsf{C}$ (i.e., they are the same as the objects of the category $\mathsf{FinSet}/\mathsf{C}$ of finite lists in the category $\mathsf{C}$). A morphism $(\varphi,\Phi):(X\xrightarrow{\tau}\mathsf{C})\to(Y\xrightarrow{\mu}\mathsf{C}$ is a pair $(\varphi,\Phi)$ where $\varphi:X\to Y$ is a map of sets and $\Phi$ is now a natural transformation from $\mu\circ\varphi$ to $\tau$. That is, the morphism is a 2-commuting triangle of the form $\xy(-10,10)*+{X}="1";(10,10)*+{Y}="2";(0,-2)*+{\mathsf{C}}="3";{\ar@{->}_{\tau% }"1";"3"};{\ar@{->}^{\varphi}"1";"2"};{\ar@{->}^{\mu}"2";"3"};{\ar@{=>}_{% \scriptstyle\Phi}(4,6)*{};(-0.4,4)*{}};\endxy.$ The composition in $(\mathsf{FinSet}/\mathsf{C})^{\Leftarrow}$ is defined by pasting of the traingles.
Definition 2.16 (The double category $\mathsf{RelMan}^{\Box}$). The objects of the double category $\mathsf{RelMan}^{\Box}$ are manifolds with corners. The vertical arrows are the smooth maps. Thus the category of objects $(\mathsf{RelMan}^{\Box})_{0}$ is the category $\mathsf{Man}$ of manifolds with corners and smooth maps. A horizontal arrow $\mu:M\to N$ is a set-theoretic relation $\mu$ from $M$ to $N$, that is a subset of $M\times N$ (cf. Definition 2.1). A 2-cell $\alpha$ from a relation $\mu:M\to N$ to a relation $\nu:P\to Q$ is a pair of smooth maps $(g:M\to P,f:N\to Q)$ so that $(g\times f)(\mu)\subset\nu.$ The composition in the arrows category $(\mathsf{RelMan}^{\Box})_{1}$ is given by composing pairs of maps: $(\tau\xleftarrow{(k,l)}\nu)\circ(\nu\xleftarrow{(g,f)}\mu)=\tau\xleftarrow{(k% \circ g,l\circ f)}\mu.$ The functor $\mathfrak{m}:(\mathsf{RelMan}^{\Box})_{1}\times_{\mathfrak{s},(\mathsf{RelMan}% ^{\Box})_{0},\mathfrak{t}}(\mathsf{RelMan}^{\Box})_{1}\to(\mathsf{RelMan}^{% \Box})_{1}$ is defined by composing relations: $\mathfrak{m}\left((\nu^{\prime}\xleftarrow{(h,g)}\mu^{\prime},\nu\xleftarrow{(% g,f)}R\right):=(\nu^{\prime}\circ\nu\xleftarrow{(h,f)}\mu^{\prime}\circ\mu).$
Definition 4.16. An execution of a hybrid dynamical system $(a,X)$ is a map of hybrid dynamical systems $(\varphi,\sigma):(\mathscr{I}(\{t_{i}\}),\partial)\to(a,X)$.
Definition 2.31 (Open (control) system). An open (or a control) system is a pair $(a,F)$ where $a=(a_{\mathsf{tot}}\xrightarrow{p_{a}}a_{\mathsf{st}})$ is a surjective submersion and $F:a_{\mathsf{tot}}\to Ta_{\mathsf{st}}$ is a smooth map such that $F(q)\in T_{p_{a}(q)}a_{\mathsf{st}}$ for all $q\in a_{\mathsf{tot}}$. That is $\pi_{a_{\mathsf{st}}}\circ F=p_{a}$, where $\pi_{a_{\mathsf{st}}}:Ta_{\mathsf{st}}\to a_{\mathsf{st}}$ is the canonical submersion.
Definition 2.1. We define a relation $R:X\to Y$ from a set $X$ to a set $Y$ to be a subset of the product $X\times Y$. The composition of relations $(Z\xleftarrow{S}Y)\circ(Y\xleftarrow{R}X)$ is defined by $S\circ R:=\{(x,z)\in X\times Z\mid\textrm{ there exists }y\in Y\textrm{ with }% (y,z)\in S,(x,y)\in R\}.$ A relation $Y\xleftarrow{R}X$ is a function if for any $x\in X$ the intersection $(\{x\}\times Y)\cap R$ is a singleton. In other words we identify a function $Y\xleftarrow{f}X$ with its graph $\mathsf{Graph}(f):=\{(x,y)\in X\times Y\mid y=f(x)\}$. A relation $Y\xleftarrow{R}X$ is a partial function if for any $x\in X$ the intersection $(\{x\}\times Y)\cap R$ is either empty or a single point (and so defines a function from a subset of $X$ to $Y$).
Definition 3.1 (The category of elements $\int_{C}F$ of a lax functor $F:\mathsf{C}\to\mathsf{RelVect}$). Let $\mathsf{C}$ be a category and $F:\mathsf{C}\to\mathsf{RelVect}$ a lax 2-functor with values in the 2-category $\mathsf{RelVect}$ of linear relations. We define the category of elements $\int_{\mathsf{C}}F$ of $F$ as follows. (1) The objects of $\int_{\mathsf{C}}F$ are pairs $(c,x)$ where $c$ is an object of $\mathsf{C}$ and $x$ is a vector in the vector space $F(c)$. (2) A morphism from $(c,x)$ to $(c^{\prime},x^{\prime})$ is a morphism $h:c\to c^{\prime}$ such that $(x,x^{\prime})$ is an element of the linear relation $F(h)\subset F(c)\times F(c^{\prime})$. It is easy to see that $\int_{\mathsf{C}}F$ is a category. We also have a functor $\pi_{F}:\int_{\mathsf{C}}F\to\mathsf{C}$ which is defined by $\pi_{F}((c,x)\xrightarrow{h}(c^{\prime},x^{\prime}))=c\xrightarrow{h}c^{\prime}.$
Definition 2.18 (The double category $\mathsf{RelVect}^{\Box}$). The objects of the double category $\mathsf{RelVect}^{\Box}$ are (real) vector spaces. The vertical arrows are linear maps. Thus the category $(\mathsf{RelVect}^{\Box})_{0}$ of objects is the category $\mathsf{Vect}$ of vector spaces and linear maps. A horizontal arrow $\mu:V\to W$ is a linear relation $\mu$ from a vector space $V$ to a vector space $W$, which is a vector subspace of $V\times W$. A 2-cell $\alpha$ from a relation $\mu:V\to W$ to a relation $\nu:X\to Y$ is a pair of linear maps $(g:V\to X,f:W\to Y)$ so that $(g\times f)(\mu)\subset\nu.$ The composition in the category $(\mathsf{RelVect}^{\Box})_{1}$ of arrows is given by composing pairs of maps: $(\tau\xleftarrow{(k,l)}\nu)\circ(\nu\xleftarrow{(g,f)}\mu)=\tau\xleftarrow{(k% \circ g,l\circ f)}\mu.$ The functor $\mathfrak{m}:(\mathsf{RelVect}^{\Box})_{1}\times_{\mathfrak{s},(\mathsf{RelMan% }^{\Box})_{0},\mathfrak{t}}(\mathsf{RelVect}^{\Box})_{1}\to(\mathsf{RelMan}^{% \Box})_{1}$ is defined by composing relations: $\mathfrak{m}\left((\nu^{\prime}\xleftarrow{(h,g)}\mu^{\prime},\nu\xleftarrow{(% g,f)}R\right):=(\nu^{\prime}\circ\nu\xleftarrow{(h,f)}\mu^{\prime}\circ\mu).$
Definition 5.1 (The category $\mathsf{HySSub}$ of hybrid submersion). Observe that the category $\mathsf{SSub}$ of surjective submersions in a full subcategory of the category of arrows $\mathsf{Man}^{[1]}$. We define the category $\mathsf{HySSub}$ of hybrid surjective submersions to be the preimage $\mathbb{U}^{-1}(\mathsf{SSub})$ in the category of arrows $\mathsf{HyPh}^{[1]}$. Here $\mathbb{U}:\mathsf{HyPh}^{[1]}\to\mathsf{Man}^{[1]}$ is the forgetful functor induced by $\mathbb{U}:\mathsf{HyPh}\to\mathsf{Man}$. More concretely the objects of $\mathsf{HySSub}$ are hybrid surjective submersions. These are maps of hybrid phase spaces $a_{\mathsf{tot}}\xrightarrow{p_{a}}a_{\mathsf{st}}$ such that the underlying maps of manifolds $\mathbb{U}(p_{a}):\mathbb{U}(a_{\mathsf{tot}})\to\mathbb{U}(a_{\mathsf{st}})$ are surjective submersions. A morphism in $\mathsf{HySSub}$ from $a_{\mathsf{tot}}\xrightarrow{p_{a}}a_{\mathsf{st}}$ to $b_{\mathsf{tot}}\xrightarrow{p_{b}}b_{\mathsf{st}}$ is a pair of maps of hybrid phase spaces $f_{\mathsf{tot}}:a_{\mathsf{tot}}\to b_{\mathsf{tot}}$, $f_{\mathsf{st}}:a_{\mathsf{st}}\to b_{\mathsf{st}}$ making the appropriate diagram commute: $f_{\mathsf{st}}\circ p_{a}=p_{b}\circ f_{\mathsf{tot}}.$
Definition A.1 (Manifold with corners). Let $V$ be an arbitrary subset of $\mathbb{R}^{n}$. A map $\varphi:V\to\mathbb{R}^{m}$ is smooth if for every point $p$ of $V$ there exist an open subset $\Omega$ in $\mathbb{R}^{n}$ containing $p$ and a smooth map from $\Omega$ to $\mathbb{R}^{m}$ whose restriction to $\Omega\cap V$ coincides with $\varphi|_{\Omega\cap V}$, i.e., $\varphi$ extends locally to a smooth map in the conventional sense. A map $\varphi$ from the set $V$ to a subset of $\mathbb{R}^{m}$ is smooth if it is smooth as a map from $V$ to $\mathbb{R}^{m}$. A map $\varphi$ from a subset $V$ of $\mathbb{R}^{n}$ to a subset $W$ of $\mathbb{R}^{m}$ is a diffeomorphism if $\varphi$ is a bijection and both $\varphi$ and its inverse $\varphi^{-1}:W\to V$ are smooth. A sector is the space $[0,\infty)^{k}\times\mathbb{R}^{n-k}$ where $n$ is a non-negative integer and $k$ is an integer between $0$ and $n$. We equip the sector with the topology inherited from its inclusion in $\mathbb{R}^{n}$. Let $X$ be a Hausdorff paracompact topological space. A chart on an open subset $U$ of $X$ is a homeomorphism $\varphi$ from $U$ to an open subset $V$ of a sector. Charts $\varphi:U\to V$ and $\varphi^{\prime}:U^{\prime}\to V^{\prime}$ are compatible if $\varphi^{\prime}\circ\varphi^{-1}$ is a diffeomorphism from $\varphi(U\cap U^{\prime})$ to $\varphi^{\prime}(U\cap U^{\prime})$. An atlas on a Hausdorff paracompact topological space $X$ is a set of pairwise compatible charts whose domains cover $X$. Two atlases are equivalent if their union is an atlas. A manifold with corners is a Hausdorff paracompact topological space equipped with an equivalence class of atlases.
Definition 2.34. Let $f:a\to b$ be a map of surjective submersions, that is, a a pair of smooth map $f_{\mathsf{tot}}:a_{\mathsf{tot}}\to b_{\mathsf{tot}}$, $f_{\mathsf{st}}:a_{\mathsf{st}}\to b_{\mathsf{st}}$ such that the diagram $\xy(-10,6)*+{a_{\mathsf{tot}}}="1";(10,6)*+{b_{\mathsf{tot}}}="2";(-10,-10)*+{% a_{\mathsf{st}}}="3";(10,-10)*+{b_{\mathsf{st}}}="4";{\ar@{->}_{p_{a}}"1";"3"}% ;{\ar@{->}^{p_{b}}"2";"4"};{\ar@{->}^{f_{\mathsf{tot}}}"1";"2"};{\ar@{->}_{f_{% \mathsf{st}}}"3";"4"};\endxy$ commutes. We define a linear relation $\mathsf{Crl}(f):\mathsf{Crl}(a)\to\mathsf{Crl}(b)$ by $\mathsf{Crl}(f):=\left\{(F,G)\in\mathsf{Crl}(a)\times\mathsf{Crl}(b)\left|% \quad\xy(-10,6)*+{a_{\mathsf{tot}}}="1";(10,6)*+{b_{\mathsf{tot}}}="2";(-10,-1% 0)*+{Ta_{\mathsf{st}}}="3";(10,-10)*+{Tb_{\mathsf{st}}}="4";{\ar@{->}_{F}"1";"% 3"};{\ar@{->}^{G}"2";"4"};{\ar@{->}^{f_{\mathsf{tot}}}"1";"2"};{\ar@{->}_{Tf_{% \mathsf{st}}}"3";"4"};\endxy\quad\textrm{commutes}\right\}.\right.$
Definition 6.1. A network of open systems is a pair $(X\xrightarrow{\tau}\mathsf{SSub},b\xrightarrow{\psi}\Pi(\tau))$ where $\tau$ is an element of $(\mathsf{FinSet}/\mathsf{SSub})^{\Leftarrow}$ (Definition 2.41), that is, a list of surjective submersions indexed by the finite set $X$, $\Pi:((\mathsf{FinSet}/\mathsf{SSub})^{\Leftarrow})^{\mathsf{op}}\to\mathsf{SSub}$ is the product functor (Remark 2.51) so that $\Pi(\tau)=\prod_{x\in X}\tau(x)$, and $\psi$ is an interconnection morphism (Definition 2.21).
Definition 2.25 (Strict 1-morphism/map/double functor of double categories). A strict morphism/map/double functor $F$ from a double category $\mathbb{B}$ to a double category $\mathbb{D}$ is a pair of ordinary functors $F_{0}:\mathbb{B}_{0}\to\mathbb{D}_{0}$, $F_{1}:\mathbb{B}_{1}\to\mathbb{D}_{1}$ which commute strictly with the source, target and unit functors of the double categories $\mathbb{B}$ and $\mathbb{D}$ (i.e., $\mathfrak{s}\circ F_{1}=F_{0}\circ\mathfrak{s}$, $\mathfrak{t}\circ F_{1}=F_{0}\circ\mathfrak{t}$ and $\mathfrak{u}\circ F_{0}=F_{1}\circ\mathfrak{u}$) and strictly preserves the composition functor $\mathfrak{m}$: the diagram $\xy(-20,10)*+{\mathbb{B}_{1}\times_{\mathbb{B}_{0}}\mathbb{B}_{1}}="1";(20,10)% *+{\mathbb{D}_{1}\times_{\mathbb{D}_{0}}\mathbb{D}_{1}}="2";(-20,-6)*+{\mathbb% {B}_{2}}="3";(20,-6)*+{\mathbb{D}}="4";{\ar@{->}^{F_{1}\times_{F_{0}}F_{1}}"1"% ;"2"};{\ar@{->}^{F_{1}}"3";"4"};{\ar@{->}_{\mathfrak{m}}"1";"3"};{\ar@{->}^{% \mathfrak{m}}"2";"4"};\endxy$ strictly commutes in the 2-category $\mathsf{CAT}$ of categories.
Definition 4.7 (A category $\mathsf{HyPh}$ of hybrid phase spaces). We define a category $\mathsf{HyPh}$ of hybrid phase spaces to be the categorified category of lists $(\mathsf{Cat}/\mathsf{RelMan}^{\Box})^{\Rightarrow}$ (see Definition 4.6) where $\mathsf{Cat}$ is the category of small categories and $\mathsf{RelMan}^{\Box}$ is the double category of manifolds with corners, smooth maps and arbitrary relations (Definition 2.16). Thus $\mathsf{HyPh}:=(\mathsf{Cat}/\mathsf{RelMan}^{\Box})^{\Rightarrow}.$
Definition B.1. For the purposes of this paper a graph $A$ is a directed multigraph. Thus $A$ is a pair of collections $A_{0}$ (nodes, vertices) and $A_{1}$ (arrows, edges) together with two maps $\mathfrak{s},\mathfrak{t}:A_{1}\to A_{0}$ (source and target). We do not require that $A_{1},A_{0}$ are sets in the sense of ZFC. We depict an arrow $\gamma\in A_{1}$ with the source $a$ and target $b$ as $a\xrightarrow{\gamma}b$. We write $A=\{A_{1}\rightrightarrows A_{0}\}$ to remind ourselves that our graph $A$ consists of two collections and two maps.
Definition 2.41 (The category of lists $\mathsf{Set}/\mathsf{C}$ in a category $\mathsf{C}$). Fix a category $\mathsf{C}$. An object of the category of lists $\mathsf{Set}/\mathsf{C}$ is a functor $\tau:X\to\mathsf{C}$ where $X$ is a set thought of as a discrete category. A morphism in $\mathsf{Set}/\mathsf{C}$ from a functor $\tau:X\to\mathsf{C}$ to a functor $\tau^{\prime}:X^{\prime}\to\mathsf{C}$ is a map of sets $\varphi:X\to X^{\prime}$ so that the triangle of functors $\xy(-10,10)*+{X}="1";(10,10)*+{X^{\prime}}="2";(0,-2)*+{\mathsf{C}}="3";{\ar@{% ->}_{\tau}"1";"3"};{\ar@{->}^{\varphi}"1";"2"};{\ar@{->}^{\tau^{\prime}}"2";"3% "};\endxy$ commutes. The composition is defined by pasting of the triangles: $\left(\xy(-10,6)*+{X^{\prime\prime}}="1";(10,6)*+{X^{\prime}}="2";(0,-6)*+{% \mathsf{C}}="3";{\ar@{->}_{\tau^{\prime\prime}}"1";"3"};{\ar@{<-}^{\psi}"1";"2% "};{\ar@{->}^{\tau^{\prime}}"2";"3"};\endxy\right)\circ\left(\xy(-10,6)*+{X^{% \prime}}="1";(10,6)*+{X}="2";(0,-4)*+{\mathsf{C}}="3";{\ar@{->}_{\tau^{\prime}% }"1";"3"};{\ar@{<-}^{\varphi}"1";"2"};{\ar@{->}^{\tau}"2";"3"};\endxy\right)=% \xy(-10,6)*+{X^{\prime\prime}}="1";(10,6)*+{X}="2";(0,-6)*+{\mathsf{C}}="3";{% \ar@{->}_{\tau^{\prime\prime}}"1";"3"};{\ar@{<-}^{\psi\circ\varphi}"1";"2"};{% \ar@{->}^{\tau}"2";"3"};\endxy$
Definition 6.8 (Maps between networks of hybrid open systems). A map from a network $(X\xrightarrow{\tau}\mathsf{HySSub},b\xrightarrow{\psi}\Pi(\tau))$ of hybrid open systems to a network $(Y\xrightarrow{\mu}\mathsf{HySSub},c\xrightarrow{\nu}\Pi(\mu))$ is a pair $((\varphi,\Phi),f)$ where $(\varphi,\Phi):\tau\to\mu$ is a morphism in $(\mathsf{FinSet}/\mathsf{HySSub})^{\Leftarrow}$ and $f:c\to b$ is a morphism in $\mathsf{HySSub}$ so that the diagram $\xy(-12,10)*+{\Pi(\mu)}="1";(12,10)*+{\Pi(\tau)}="2";(-12,-10)*+{c}="3";(12,-1% 0)*+{b}="4";{\ar@{->}^{\nu}"3";"1"};{\ar@{->}^{\Pi(\varphi,\Phi)}"1";"2"};{\ar% @{->}_{\psi}"4";"2"};{\ar@{->}_{f}"3";"4"};\endxy$ it commutes in $\mathsf{HySSub}$ of hybrid surjective submersions. That is, the diagram is a is a 2-cell in the double category $\mathsf{HySSub}^{\Box}$ with the source $f$ and target $\Pi(\varphi,\Phi)$. Here as before $\Pi:(\mathsf{FinSet}/\mathsf{HySSub})^{\Leftarrow}\to\mathsf{HySSub}$ is the product functor (Remark 2.51).
Definition 2.4 (The 2-category $\mathsf{RelVect}$). Vector spaces and linear relations form a 2-category $\mathsf{RelVect}$: the objects of $\mathsf{RelSet}$ are sets, a 1-arrow $W\xleftarrow{R}V$ is a linear subspace $R$ of $W\times V$, that is, a linear relation. The composition of linear relations is defined by (2.2), that is, it is defined exactly the same way as the composition of set-theoretic relations. A 2-arrow from a linear relation $W\xleftarrow{R}V$ to a linear relation $W\xleftarrow{R^{\prime}}V$ is the (linear) inclusion $R\hookrightarrow R^{\prime}$.
Definition 4.4 (provisional). A hybrid phase space is a functor $a:S_{a}\to\mathsf{RelMan}$ from some category $S_{a}$ to the category $\mathsf{RelMan}$ of manifolds with corners and set-theoretic relations. A map from a hybrid phase space $a:S_{a}\to\mathsf{RelMan}$ to a hybrid phase space $b:S_{b}\to\mathsf{RelMan}$ is a functor $\varphi:S_{a}\to S_{b}$ together with a collection of smooth maps $\{f_{x}:a(x)\to b(\varphi(x))\}_{x\in(S_{a})_{0}}$ so that for each arrow $x\xrightarrow{\gamma}y$ of the category $S_{a}$ the diagram $\xy(-15,10)*+{a(x)}="1";(-15,-10)*+{b(\varphi(x))}="2";(15,10)*+{a(y)}="3";(15% ,-10)*+{b(\varphi(y))}="4";{\ar@{->}_{f_{x}}"1";"2"};{\ar@{->}^{a(\gamma)}"1";% "3"};{\ar@{->}_{b(\varphi(\gamma))}"2";"4"};{\ar@{->}^{f_{y}}"3";"4"};{\ar@{=>% }(0,3);(0,-3)};\endxy$ is a 2-cell in the double category $\mathsf{RelMan}^{\Box}$. In other words we require that for each $x\xrightarrow{\gamma}y\in(S_{a})_{1}$ the smooth maps $f_{x}\times f_{y}:a(x)\times a(y)\to b(\varphi(x))\times b(\varphi(y))$ map the relation $a(\gamma)\subset a(x)\times a(y)$ to the relation $b(\varphi(\gamma)\subset b(\varphi(x))\times b(\varphi(y))$.
Definition A.4. The tangent space $T_{x}M$ of a manifold with corners $M$ at a point $x\in M$ is the space of $\mathbb{R}$-valued derivations at $x$ of germs at $x$ of smooth functions defined near $x$.
Definition 5.6. A map $f=(f_{\mathsf{tot}},f_{\mathsf{st}}):a\to b$ of hybrid surjective submersions is an interconnection morphism if the underlying map $\mathbb{U}(f_{\mathsf{st}}):\mathbb{U}(a_{\mathsf{st}})\to\mathbb{U}(b_{% \mathsf{st}})$ is an interconnection map of surjective submersions.
Definition 2.35. Let $f:a\to b$ be a map of surjective submersions. Suppose $w\in\mathsf{Crl}(b)$ and $u\in\mathsf{Crl}(a)$ are two open systems so that $(u,w)\in\mathsf{Crl}(f)$, i.e., the diagram $\xy(-10,6)*+{a_{\mathsf{tot}}}="1";(10,6)*+{b_{\mathsf{tot}}}="2";(-10,-10)*+{% Ta_{\mathsf{st}}}="3";(10,-10)*+{Tb_{\mathsf{st}}}="4";{\ar@{->}_{u}"1";"3"};{% \ar@{->}^{w}"2";"4"};{\ar@{->}^{f_{\mathsf{tot}}}"1";"2"};{\ar@{->}_{Tf_{% \mathsf{st}}}"3";"4"};\endxy$ commutes. We then say that the control system $u$ is $f$-related to the control system $w$.
Definition 2.3 (The 2-category $\mathsf{RelSet}$). Sets and relations form a 2-category $\mathsf{RelSet}$: the objects of $\mathsf{RelSet}$ are sets, the 1-arrows are relations with composition defined by (2.2). A 2-arrow from a relation $Y\xleftarrow{R}X$ to a relation $Y\xleftarrow{R^{\prime}}X$ is the inclusion $R\hookrightarrow R^{\prime}$.
Definition 2.46 (The category of lists $(\mathsf{Set}/\mathsf{C})^{\Rightarrow}$). Fix a category $\mathsf{C}$. An object of the category of lists $(\mathsf{Set}/\mathsf{C})^{\Rightarrow}$ is a functor $\tau:X\to\mathsf{C}$ where $X$ is a set thought of as a discrete category. That is, the objects of $(\mathsf{Set}/\mathsf{C})^{\Rightarrow}$ are the same as the objects of $\mathsf{Set}/\mathsf{C}$. A morphism in $(\mathsf{Set}/\mathsf{C})^{\Rightarrow}$ from a functor $\tau:X\to\mathsf{C}$ to a functor $\tau^{\prime}:X^{\prime}\to\mathsf{C}$ is a 2-commuting triangle $\xy(-10,10)*+{X}="1";(10,10)*+{X^{\prime}}="2";(0,-2)*+{\mathsf{C}}="3";{\ar@{% ->}_{\tau}"1";"3"};{\ar@{->}^{\varphi}"1";"2"};{\ar@{->}^{\tau^{\prime}}"2";"3% "};{\ar@{<=}_{\scriptstyle\Phi}(4,6)*{};(-0.4,4)*{}};\endxy.$ In other words a morphism in $(\mathsf{Set}/\mathsf{C})^{\Rightarrow}$ is pair $(\varphi,\Phi)$ where $\varphi:X\to X^{\prime}$ is a map of sets and $\Phi:\tau\Rightarrow\tau^{\prime}\circ\varphi$ is a natural transformation. Given a pair of composible morphisms $(\varphi,\Phi):(X\xrightarrow{\tau}\mathsf{C})\to(X^{\prime}\xrightarrow{\tau^% {\prime}}\mathsf{C})$ and $(\psi,\Psi):(X^{\prime}\xrightarrow{\tau^{\prime}}\mathsf{C})\to(X^{\prime% \prime}\xrightarrow{\tau^{\prime\prime}}\mathsf{C})$ their composition is defined by pasting of the 2-commuting triangles. That is, $(\psi,\Psi)\circ(\varphi,\Phi):=(\psi\circ\varphi,(\Psi\circ\varphi)\circ_{v}% \Phi),$ where $\Psi\circ\varphi:\tau\Rightarrow\tau^{\prime\prime}$ is the whiskering of the natural transformation with a functor and $\circ_{v}$ denotes the vertical composition of natural transformations.
Definition B.8 (An execution with jump times indexed by the natural numbers $\mathbb{N}$). Let $H=(A=\{A_{1}\rightrightarrows A_{0}\},\{(R_{x},X_{x})\}_{x\in A_{0}},\{R_{% \gamma}\}_{\gamma\in A_{1}}))$ be a hybrid dynamical system. An execution of $H$ is (1) an nondecreasing sequence $\{t_{i}\}_{i\geq 0}$ of real numbers (2) a function $\varphi_{0}:\mathbb{N}\to A_{0}$; (3) a function $\varphi_{1}:\mathbb{N}\to A_{1}$ compatible with $\varphi_{0}$: we require that $\mathfrak{s}(\varphi_{1}(i))=\varphi_{0}(i)$ and $\mathfrak{t}(\varphi_{1}(i))=\varphi_{0}(i+1)$ (where as before $\mathfrak{s},\mathfrak{t}:A_{1}\to A_{0}$ are the source and target maps, respectively); (4) an integral curve $\sigma_{i}:[t_{i-1},t_{i}]\to R_{\varphi_{0}(i)}$ of $X_{\varphi_{0}(i)}$ (with $t_{-1}$ being some number less than $t_{0}$); (5) the terminal end point of $\sigma_{i}$ and the initial end point of $\sigma_{i+1}$ are related by the reset relation $R_{\varphi_{1}(i)}$: $(\sigma_{i}(t_{i}),\sigma_{i+1}(t_{i}))\in R_{\varphi_{1}(i)}.$
Definition 2.12 (Horizontal 2-category of a double category). Associated to a double category $\mathbb{D}$ there is a horizontal 2-category ${\mathcal{H}}(\mathbb{D})$ whose objects are the objects of $\mathbb{D}$, 1-arrows are the horizontal morphisms of $\mathbb{D}$ and 2-arrows are the 2-cells of $\mathbb{D}$ of the form $\xy(-8,6)*+{c}="1";(8,6)*+{a}="2";(-8,-8)*+{c}="3";(8,-8)*+{a}="4";{\ar@{->}_{% \mu}"2";"1"};{\ar@{->}^{\nu}"4";"3"};{\ar@{->}_{\mathsf{id}}"1";"3"};{\ar@{->}% ^{\mathsf{id}}"2";"4"};{\ar@{=>}^{\alpha}(0,3)*{};(0,-3)};\endxy$
Definition 4.15 (The hybrid dynamical system $(\mathscr{I},\partial)=(\mathscr{I}(\{t_{i}\}),\partial)$ associated with increasing sequence $\{t_{i}\}_{i=0}^{\infty}$ of real numbers). Let $\{t_{i}\}$ be an increasing sequence of real numbers. Let $\mathscr{T}$ be the graph with the set of vertices $\mathscr{T}_{0}=\mathbb{N}$, the set of natural numbers (that includes 0), the set of arrows $\mathscr{T}_{1}=\mathbb{N}$ and the source and target maps $\mathfrak{s}\times\mathfrak{t}:\mathscr{T}_{1}\to\mathscr{T}_{0}\times\mathscr% {T}_{0}$ given by $i\mapsto(i,i+1)$. In other words arrows of the graph $\mathscr{T}$ are of the form $i\xrightarrow{i}i+1$. Define a map of graphs $\bar{\tau}:\mathscr{T}\to U(\mathsf{RelMan})$ (recall that $U(\mathsf{RelMan})$ is the graph underlying the category of manifolds with corners and relations) by $\bar{\tau}(i\xrightarrow{i}i+1)=[t_{i},t_{i+1}]\xrightarrow{\{(t_{i+1},t_{i+1}% )\}}[t_{i+1},t_{i+2}].$ Here $\{(t_{i+1},t_{i+1})\}\subset[t_{i},t_{i+1}]\times[t_{i+1},t_{i+2}]$ is a relation consisting of one point. We define the hybrid phase space $\mathscr{I}$ to be the corresponding functor $\tau:\mathsf{Free}(\mathscr{T})\to\mathsf{RelMan}$. We define the vector field $\partial$ on the underlying manifold $\mathbb{U}(\tau)=\bigsqcup_{i=0}^{\infty}[t_{i},t_{i+1}]$ by $\partial|_{[t_{i},t_{i+1}]}:=\frac{d}{dt}$.
Definition 2.29 (vertical transformation). Let $F,G:\mathbb{B}\to\mathbb{D}$ be two strict double functors between two double categories. A vertical transformation $\alpha$ from $F$ to $G$ is a pair of natural transformations $\alpha_{0}:F_{0}\Rightarrow G_{0}$, $\alpha_{1}:F_{1}\Rightarrow G_{1}$ (both often written as $\alpha$) subject to the following conditions: (1) $\alpha$ is compatible with the source and target functors: for any object $\mu$ of $\mathbb{B}_{1}$ $\mathfrak{s}((\alpha_{1})_{\mu})=(\alpha_{0})_{\mathfrak{s}(\mu)},\qquad% \mathfrak{t}((\alpha_{1})_{\mu})=(\alpha_{0})_{\mathfrak{t}(\mu)};$ (2) $\alpha$ is compatible with the multiplication/composition functors $\mathfrak{m}$ of $\mathbb{B}$ and $\mathbb{D}$: for any pair $\mu,\nu$ of composable objects of $\mathbb{B}_{1}$ $(\alpha_{1})_{\mu*\nu}=(\alpha_{1})_{\mu}*(\alpha_{1})_{\nu};$ (3) $\alpha$ is compatible with the unit functors: for any object $a$ of $\mathbb{B}$ $\mathfrak{u}((\alpha_{0})_{a})=(\alpha_{1})_{\mathfrak{u}(a)}.$ We write $\alpha:F\Rightarrow G$.
Definition 5. A preadditive category which is also a proper category is termed as a preadditive proper category. A preadditive proper category $\mathcal{C}$ satisfying the following conditions: (1) the object set $\textit{v}\mathcal{C}$ with partial order induced by subobject relation is a relatively complemented lattice and (2) every subset of the object set which has an upper bound contains a unique maximal element is called an $RR-$proper category and these conditions are termed as $RR-$conditions.
Definition 2. A normal category is a pair $(\mathcal{C},\mathcal{P})$ satisfying the following: (1) $(\mathcal{C},\mathcal{P})$ is a category with subobjects (2) every inclusion in $\mathcal{C}$ splits (3) Any morphism in $\mathcal{C}$ has a normal factorization (4) for each $a\in\textit{v}\mathcal{C}$ there is a normal cone $\gamma$ with vertex $a$ and $\gamma(a)=I_{a}.$
Definition 3. Let $\mathcal{C}$ be a category with subobjects, every inclusion splits and every morphism has canonical factorization. A proper cone $\gamma$ in $\mathcal{C}$ is a cone with vertex $d$ such that there exists at least one $c\in\textit{v}\mathcal{C}$ with $\gamma(c):c\rightarrow d$ is an epimorphism (i.e., $\gamma(c)=\gamma(c)^{o}$).
Definition 1. (cf.[4]) A preadditive category(or Ab-category) is a category satisfying: (1) each hom-set is an additive abelian group, (2) composition of arrows is bilinear relative to this addition, (3) category has zero object.
Definition 6. Let $\mathcal{C}$ be an $RR-$proper category and $\mathcal{PC}$ the semigroup of proper cones in $\mathcal{C}$. For $\gamma,\delta\in\mathcal{PC}$, with vertices $c_{\gamma}=c$ and $c_{\delta}=d$, define $\gamma+\delta=(\gamma\oplus\delta)^{\ast}$ where $(\gamma\oplus\delta)^{\ast}(a)=(\gamma\oplus\delta)(a)e(c\vee d,d_{0})$ for all $a\in\textit{v}\mathcal{C}$. Then $\gamma+\delta$ is a proper cone with vertex $d_{0}$, where $d_{0}=max\{im(\gamma\oplus\delta)(a),/a\in\textit{v}\mathcal{C}\}$.
Definition 4. A small category $\mathcal{C}$ with subobjects is called proper category if it satisfies the following: (1) every inclusion in $\mathcal{C}$ splits, (2) any morphism $f\in\mathcal{C}$ has canonical factorization and (3) each object of $\mathcal{C}$ is a vertex of a proper cone $\gamma\in\mathcal{PC}$.
Definition 1.2. A tensor functor from a tensor category $(C,\otimes)$ to a tensor category $(C^{\prime},\otimes^{\prime})$ is a pair $(T,c)$, where $T\colon C\to C^{\prime}$ is a functor and $c$ is an isomorphism of functors with components $c_{X,Y}\colon T(X)\otimes^{\prime}T(Y)\to T(X\otimes Y)$ for objects $X,Y$ of $C$ such that (i) $\xymatrix{T(X)\otimes^{\prime}(T(Y)\otimes^{\prime}T(Z))\ar^{\operatorname{id}% \otimes^{\prime}c}[r]\ar_{\Phi^{\prime}}[d]&T(X)\otimes^{\prime}(T(Y\otimes T(% Z))\ar^{-}c[r]&T(X\otimes(Y\otimes Z))\ar^{T(\Phi)}[d]\\ (T(X)\otimes^{\prime}T(Y))\otimes^{\prime}T(Z)\ar[r]^{-}{c\otimes^{\prime}% \operatorname{id}}&T(X\otimes Y)\otimes^{\prime}T(Z)\ar^{c}[r]&T((X\otimes Y)% \otimes Z)}$ commutes for all objects $X,Y,Z$ of $C$, (ii) $\xymatrix{T(X)\otimes^{\prime}T(Y)\ar_{\Psi^{\prime}}[d]\ar^{c}[r]&T(X\otimes Y% )\ar^{T(\Psi)}[d]\\ T(Y)\otimes^{\prime}T(X)\ar^{c}[r]&T(Y\otimes X)}$ commutes for all objects $X$ and $Y$ of $C$ and (iii) if $(\mathds{1},u)$ is an identity object of $(C,\otimes)$, then $(T(\mathds{1}),T(u))$ is an identity object of $(C^{\prime},\otimes^{\prime})$. A tensor functor $(T,c)$ is strict if $c$ is the identity transformation. In particular, $T(X)\otimes^{\prime}T(Y)=T(X\otimes Y)$ for all objects $X$ and $Y$ of $C$. A tensor functor $(T,c)$ is a tensor equivalence if $T$ is an equivalence of categories.
Definition 1.3. Let $(T_{1},c_{1})$ and $(T_{2},c_{2})$ be tensor functors from $(C,\otimes)$ to $(C^{\prime},\otimes^{\prime})$. A morphism $\alpha\colon T_{1}\to T_{2}$ of functors is a morphism of tensor functors if (i) $\xymatrix{T_{1}(X)\otimes^{\prime}T_{1}(Y)\ar^{-}{c_{1}}[r]\ar_{\alpha_{X}% \otimes^{\prime}\alpha_{Y}}[d]&T_{1}(X\otimes Y)\ar^{\alpha_{X\otimes Y}}[d]\\ T_{2}(X)\otimes^{\prime}T_{2}(Y)\ar^{-}{c_{2}}[r]&T_{2}(X\otimes Y)}$ commutes for all objects $X,Y$ of $C$ and (ii) $\xymatrix{&\mathds{1}^{\prime}\ar[ld]\ar[rd]&\\ T_{1}(\mathds{1})\ar^{-}{\alpha_{\mathds{1}}}[rr]&&T_{2}(\mathds{1})}$ commutes, where the downwards morphisms are deduced from the uniqueness of the identity object in $(C^{\prime},\otimes^{\prime})$.
Definition 1.5. Let $k$ be a field. A neutral tannakian category over $k$ is a rigid abelian tensor category $(C,\otimes)$ together with an isomorphism $k\simeq\operatorname{End}(\mathds{1})$ such that there exists an exact $k$-linear tensor functor $\omega\colon(C,\otimes)\to(\operatorname{Vec}_{k},\otimes_{k})$. Any such functor is called a (neutral) fibre functor.
Definition 1.12. A tensor category $(C,\otimes)$ is tensor skeletal if (i) any two isomorphic tensor irreducible objects are equal, (ii) every object of $C$ is isomorphic to a tensor irreducible object and (iii) $C$ has the unique tensor factorization property.
Definition 1.8. Let $(C,\otimes)$ be a tensor category. An object $V$ of $C$ is tensor irreducible if it is not in the image of $\otimes\colon C\times C\to C$, i.e., $V$ is not equal to $V_{1}\otimes W_{1}$ for objects $V_{1}$ and $W_{2}$ of $C$. The tensor category $(C,\otimes)$ has the unique tensor factorization property if (i) $V_{1}\otimes W_{1}=V_{2}\otimes W_{2}$ implies $V_{1}=V_{2}$ and $W_{1}=W_{2}$ for objects, $V_{1},V_{2},W_{1},W_{2}$ of $C$, i.e., $\otimes$ is injective on objects and (ii) every object of $C$ is a finite tensor product of tensor irreducible objects.
Definition 1.11. Let $(C,\otimes)$ be a tensor category with the unique tensor factorization property. The tensor length of an object $V$ of $C$ is the length of the unique completely parenthesized sequence of tensor irreducible objects whose tensor product equals $V$.
Definition 1.4. A tensor category $(C,\otimes)$ is rigid, if for every object $X$ of $C$ there exists an object $X^{\vee}$ (called a dual of $X$) of $C$ together with morphisms $\operatorname{ev}\colon X\otimes X^{\vee}\to\mathds{1}$ and $\delta\colon\mathds{1}\to X^{\vee}\otimes X$ such that $X\xrightarrow{r}X\otimes\mathds{1}\xrightarrow{\operatorname{id}\otimes\delta}% X\otimes(X^{\vee}\otimes X)\xrightarrow{\Phi}(X\otimes X^{\vee})\otimes X% \xrightarrow{\operatorname{ev}\otimes\operatorname{id}}\mathds{1}\otimes X% \xrightarrow{l^{-1}}X$ and $X^{\vee}\xrightarrow{l}\mathds{1}\otimes X^{\vee}\xrightarrow{\delta\otimes% \operatorname{id}}(X^{\vee}\otimes X)\otimes X^{\vee}\xrightarrow{\Phi^{-1}}X^% {\vee}\otimes(X\otimes X^{\vee})\xrightarrow{\operatorname{id}\otimes% \operatorname{ev}}X^{\vee}\otimes\mathds{1}\xrightarrow{r^{-1}}X^{\vee}$ are the identity morphism.
Definition 1.1. A tensor category is a tuple $(C,\otimes,\Phi,\Psi)$, where $C$ is a category, $\otimes\colon C\times C\to C$ is a functor and $\Phi$ and $\Psi$ are isomorphisms of functors, called the associativity and commutativity constraints respectively. More specifically, $\Phi$ has components $\Phi_{X,Y,Z}\colon X\otimes(Y\otimes Z)\to(X\otimes Y)\otimes Z$ and $\Psi$ has components $\Psi_{X,Y}\colon X\otimes Y\to Y\otimes X$ for objects $X,Y,Z$ of $C$ such that three commutative diagrams are satisfies. See [DM82, Section 1] for details. It is also required that there exists an identity object $(\mathds{1},u)$. This means that $C\to C,\ X\rightsquigarrow\mathds{1}\otimes X$ is an equivalence of categories and $u\colon\mathds{1}\to\mathds{1}\otimes\mathds{1}$ is an isomorphism.
Definition 4.4. The defining degree of $G$ is the smallest $d$ such that $G=G_{\leq d}$.
Definition 1.15. A neutral tannakian category $(C,\otimes)$ over a field $k$ is pointed skeletal if it has exactly one zero object and the full subcategory of all objects that are not zero objects is tensor skeletal.
Definition 2.6. Consider a vector field $X:\mathbb{R}^{n}\to\mathbb{R}^{n}$. Choose $s\in\mathbb{N}$, $\{a_{ij}\}_{i,j=1}^{s}$, and $\{b_{i}\}_{i=1}^{s}$. The Runge-Kutta method with matrix $a_{ij}$, weights $b_{i}$, and stepsize $h$, denoted $D_{X}^{(A,b,h)}$, is defined as follows (see [9, (12.51), pages 351—352]): For $i=1,\dots,s$, we set $k_{X,i}(x):=X\left(x+h\sum_{j=1}^{s}a_{i,j}k_{X,j}(x)\right),$ and then $D_{X}^{(A,b,h)}(x):=x+h\sum_{i=1}^{s}b_{i}k_{X,i}(x).$ We say that the method is explicit if $a_{ij}=0$ whenever $i\leq j$. Otherwise the method is implicit.
Definition 2.1. Let $f:N\to M$ be a differentiable map between two manifolds. A vector field $X$ on $N$ is $f$-related to the vector field $Y$ on $M$ if $df_{x}(X(x))=Y(f(x))$ for all $x\in N$. Here and elsewhere $df_{x}:T_{x}N\to T_{f(x)}M$ denotes the differential of the map $f$.
